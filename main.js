var R_=Object.create;var Es=Object.defineProperty;var N_=Object.getOwnPropertyDescriptor;var M_=Object.getOwnPropertyNames;var I_=Object.getPrototypeOf,k_=Object.prototype.hasOwnProperty;var D_=(t,e,n)=>e in t?Es(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _s=(t,e)=>()=>(t&&(e=t(t=0)),e);var ln=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),se=(t,e)=>{for(var n in e)Es(t,n,{get:e[n],enumerable:!0})},Zm=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of M_(e))!k_.call(t,o)&&o!==n&&Es(t,o,{get:()=>e[o],enumerable:!(i=N_(e,o))||i.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?R_(I_(t)):{},Zm(e||!t||!t.__esModule?Es(n,"default",{value:t,enumerable:!0}):n,t)),U_=t=>Zm(Es({},"__esModule",{value:!0}),t);var Bu=(t,e,n)=>(D_(t,typeof e!="symbol"?e+"":e,n),n);var lh=ln(V=>{"use strict";var Ju=Symbol.for("react.transitional.element"),P_=Symbol.for("react.portal"),L_=Symbol.for("react.fragment"),H_=Symbol.for("react.strict_mode"),G_=Symbol.for("react.profiler"),O_=Symbol.for("react.consumer"),q_=Symbol.for("react.context"),F_=Symbol.for("react.forward_ref"),V_=Symbol.for("react.suspense"),z_=Symbol.for("react.memo"),nh=Symbol.for("react.lazy"),B_=Symbol.for("react.activity"),Wm=Symbol.iterator;function $_(t){return t===null||typeof t!="object"?null:(t=Wm&&t[Wm]||t["@@iterator"],typeof t=="function"?t:null)}var ih={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oh=Object.assign,sh={};function uo(t,e,n){this.props=t,this.context=e,this.refs=sh,this.updater=n||ih}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rh(){}rh.prototype=uo.prototype;function Ku(t,e,n){this.props=t,this.context=e,this.refs=sh,this.updater=n||ih}var Xu=Ku.prototype=new rh;Xu.constructor=Ku;oh(Xu,uo.prototype);Xu.isPureReactComponent=!0;var jm=Array.isArray;function Yu(){}var me={H:null,A:null,T:null,S:null},ah=Object.prototype.hasOwnProperty;function Qu(t,e,n){var i=n.ref;return{$$typeof:Ju,type:t,key:e,ref:i!==void 0?i:null,props:n}}function Y_(t,e){return Qu(t.type,e,t.props)}function Zu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ju}function J_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eh=/\/+/g;function $u(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J_(""+t.key):e.toString(36)}function K_(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Yu,Yu):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function lo(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Ju:case P_:r=!0;break;case nh:return r=t._init,lo(r(t._payload),e,n,i,o)}}if(r)return o=o(t),r=i===""?"."+$u(t,0):i,jm(o)?(n="",r!=null&&(n=r.replace(eh,"$&/")+"/"),lo(o,e,n,"",function(f){return f})):o!=null&&(Zu(o)&&(o=Y_(o,n+(o.key==null||t&&t.key===o.key?"":(""+o.key).replace(eh,"$&/")+"/")+r)),e.push(o)),1;r=0;var l=i===""?".":i+":";if(jm(t))for(var u=0;u<t.length;u++)i=t[u],s=l+$u(i,u),r+=lo(i,e,n,s,o);else if(u=$_(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=l+$u(i,u++),r+=lo(i,e,n,s,o);else if(s==="object"){if(typeof t.then=="function")return lo(K_(t),e,n,i,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function qr(t,e,n){if(t==null)return t;var i=[],o=0;return lo(t,i,"","",function(s){return e.call(n,s,o++)}),i}function X_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var th=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Q_={map:qr,forEach:function(t,e,n){qr(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qr(t,function(){e++}),e},toArray:function(t){return qr(t,function(e){return e})||[]},only:function(t){if(!Zu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Activity=B_;V.Children=Q_;V.Component=uo;V.Fragment=L_;V.Profiler=G_;V.PureComponent=Ku;V.StrictMode=H_;V.Suspense=V_;V.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me;V.__COMPILER_RUNTIME={__proto__:null,c:function(t){return me.H.useMemoCache(t)}};V.cache=function(t){return function(){return t.apply(null,arguments)}};V.cacheSignal=function(){return null};V.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=oh({},t.props),o=t.key;if(e!=null)for(s in e.key!==void 0&&(o=""+e.key),e)!ah.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var r=Array(s),l=0;l<s;l++)r[l]=arguments[l+2];i.children=r}return Qu(t.type,o,i)};V.createContext=function(t){return t={$$typeof:q_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:O_,_context:t},t};V.createElement=function(t,e,n){var i,o={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)ah.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=e[i]);var r=arguments.length-2;if(r===1)o.children=n;else if(1<r){for(var l=Array(r),u=0;u<r;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(i in r=t.defaultProps,r)o[i]===void 0&&(o[i]=r[i]);return Qu(t,s,o)};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:F_,render:t}};V.isValidElement=Zu;V.lazy=function(t){return{$$typeof:nh,_payload:{_status:-1,_result:t},_init:X_}};V.memo=function(t,e){return{$$typeof:z_,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=me.T,n={};me.T=n;try{var i=t(),o=me.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Yu,th)}catch(s){th(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),me.T=e}};V.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()};V.use=function(t){return me.H.use(t)};V.useActionState=function(t,e,n){return me.H.useActionState(t,e,n)};V.useCallback=function(t,e){return me.H.useCallback(t,e)};V.useContext=function(t){return me.H.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t,e){return me.H.useDeferredValue(t,e)};V.useEffect=function(t,e){return me.H.useEffect(t,e)};V.useEffectEvent=function(t){return me.H.useEffectEvent(t)};V.useId=function(){return me.H.useId()};V.useImperativeHandle=function(t,e,n){return me.H.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return me.H.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return me.H.useLayoutEffect(t,e)};V.useMemo=function(t,e){return me.H.useMemo(t,e)};V.useOptimistic=function(t,e){return me.H.useOptimistic(t,e)};V.useReducer=function(t,e,n){return me.H.useReducer(t,e,n)};V.useRef=function(t){return me.H.useRef(t)};V.useState=function(t){return me.H.useState(t)};V.useSyncExternalStore=function(t,e,n){return me.H.useSyncExternalStore(t,e,n)};V.useTransition=function(){return me.H.useTransition()};V.version="19.2.3"});var Yt=ln((jD,uh)=>{"use strict";uh.exports=lh()});var Sh=ln(_e=>{"use strict";function tc(t,e){var n=t.length;t.push(e);e:for(;0<n;){var i=n-1>>>1,o=t[i];if(0<Fr(o,e))t[i]=e,t[n]=o,n=i;else break e}}function un(t){return t.length===0?null:t[0]}function zr(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var i=0,o=t.length,s=o>>>1;i<s;){var r=2*(i+1)-1,l=t[r],u=r+1,f=t[u];if(0>Fr(l,n))u<o&&0>Fr(f,l)?(t[i]=f,t[u]=n,i=u):(t[i]=l,t[r]=n,i=r);else if(u<o&&0>Fr(f,n))t[i]=f,t[u]=n,i=u;else break e}}return e}function Fr(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}_e.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(ch=performance,_e.unstable_now=function(){return ch.now()}):(Wu=Date,fh=Wu.now(),_e.unstable_now=function(){return Wu.now()-fh});var ch,Wu,fh,Sn=[],Kn=[],Z_=1,It=null,et=3,nc=!1,As=!1,Cs=!1,ic=!1,mh=typeof setTimeout=="function"?setTimeout:null,hh=typeof clearTimeout=="function"?clearTimeout:null,dh=typeof setImmediate<"u"?setImmediate:null;function Vr(t){for(var e=un(Kn);e!==null;){if(e.callback===null)zr(Kn);else if(e.startTime<=t)zr(Kn),e.sortIndex=e.expirationTime,tc(Sn,e);else break;e=un(Kn)}}function oc(t){if(Cs=!1,Vr(t),!As)if(un(Sn)!==null)As=!0,fo||(fo=!0,co());else{var e=un(Kn);e!==null&&sc(oc,e.startTime-t)}}var fo=!1,xs=-1,gh=5,yh=-1;function vh(){return ic?!0:!(_e.unstable_now()-yh<gh)}function ju(){if(ic=!1,fo){var t=_e.unstable_now();yh=t;var e=!0;try{e:{As=!1,Cs&&(Cs=!1,hh(xs),xs=-1),nc=!0;var n=et;try{t:{for(Vr(t),It=un(Sn);It!==null&&!(It.expirationTime>t&&vh());){var i=It.callback;if(typeof i=="function"){It.callback=null,et=It.priorityLevel;var o=i(It.expirationTime<=t);if(t=_e.unstable_now(),typeof o=="function"){It.callback=o,Vr(t),e=!0;break t}It===un(Sn)&&zr(Sn),Vr(t)}else zr(Sn);It=un(Sn)}if(It!==null)e=!0;else{var s=un(Kn);s!==null&&sc(oc,s.startTime-t),e=!1}}break e}finally{It=null,et=n,nc=!1}e=void 0}}finally{e?co():fo=!1}}}var co;typeof dh=="function"?co=function(){dh(ju)}:typeof MessageChannel<"u"?(ec=new MessageChannel,ph=ec.port2,ec.port1.onmessage=ju,co=function(){ph.postMessage(null)}):co=function(){mh(ju,0)};var ec,ph;function sc(t,e){xs=mh(function(){t(_e.unstable_now())},e)}_e.unstable_IdlePriority=5;_e.unstable_ImmediatePriority=1;_e.unstable_LowPriority=4;_e.unstable_NormalPriority=3;_e.unstable_Profiling=null;_e.unstable_UserBlockingPriority=2;_e.unstable_cancelCallback=function(t){t.callback=null};_e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gh=0<t?Math.floor(1e3/t):5};_e.unstable_getCurrentPriorityLevel=function(){return et};_e.unstable_next=function(t){switch(et){case 1:case 2:case 3:var e=3;break;default:e=et}var n=et;et=e;try{return t()}finally{et=n}};_e.unstable_requestPaint=function(){ic=!0};_e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=et;et=t;try{return e()}finally{et=n}};_e.unstable_scheduleCallback=function(t,e,n){var i=_e.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?i+n:i):n=i,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,t={id:Z_++,callback:e,priorityLevel:t,startTime:n,expirationTime:o,sortIndex:-1},n>i?(t.sortIndex=n,tc(Kn,t),un(Sn)===null&&t===un(Kn)&&(Cs?(hh(xs),xs=-1):Cs=!0,sc(oc,n-i))):(t.sortIndex=o,tc(Sn,t),As||nc||(As=!0,fo||(fo=!0,co()))),t};_e.unstable_shouldYield=vh;_e.unstable_wrapCallback=function(t){var e=et;return function(){var n=et;et=e;try{return t.apply(this,arguments)}finally{et=n}}}});var Eh=ln((tU,Th)=>{"use strict";Th.exports=Sh()});var Ah=ln(st=>{"use strict";var W_=Yt();function _h(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Xn(){}var ot={d:{f:Xn,r:function(){throw Error(_h(522))},D:Xn,C:Xn,L:Xn,m:Xn,X:Xn,S:Xn,M:Xn},p:0,findDOMNode:null},j_=Symbol.for("react.portal");function eA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j_,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var ws=W_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Br(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}st.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ot;st.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(_h(299));return eA(t,e,null,n)};st.flushSync=function(t){var e=ws.T,n=ot.p;try{if(ws.T=null,ot.p=2,t)return t()}finally{ws.T=e,ot.p=n,ot.d.f()}};st.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,ot.d.C(t,e))};st.prefetchDNS=function(t){typeof t=="string"&&ot.d.D(t)};st.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Br(n,e.crossOrigin),o=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?ot.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:s}):n==="script"&&ot.d.X(t,{crossOrigin:i,integrity:o,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};st.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Br(e.as,e.crossOrigin);ot.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&ot.d.M(t)};st.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Br(n,e.crossOrigin);ot.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};st.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Br(e.as,e.crossOrigin);ot.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else ot.d.m(t)};st.requestFormReset=function(t){ot.d.r(t)};st.unstable_batchedUpdates=function(t,e){return t(e)};st.useFormState=function(t,e,n){return ws.H.useFormState(t,e,n)};st.useFormStatus=function(){return ws.H.useHostTransitionStatus()};st.version="19.2.3"});var wh=ln((iU,xh)=>{"use strict";function Ch(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ch)}catch(t){console.error(t)}}Ch(),xh.exports=Ah()});var G0=ln(hl=>{"use strict";var Ge=Eh(),Wg=Yt(),tA=wh();function C(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function jg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ey(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ty(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bh(t){if(dr(t)!==t)throw Error(C(188))}function nA(t){var e=t.alternate;if(!e){if(e=dr(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return bh(o),t;if(s===i)return bh(o),e;s=s.sibling}throw Error(C(188))}if(n.return!==i.return)n=o,i=s;else{for(var r=!1,l=o.child;l;){if(l===n){r=!0,n=o,i=s;break}if(l===i){r=!0,i=o,n=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===n){r=!0,n=s,i=o;break}if(l===i){r=!0,i=s,n=o;break}l=l.sibling}if(!r)throw Error(C(189))}}if(n.alternate!==i)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function ny(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=ny(t),e!==null)return e;t=t.sibling}return null}var ye=Object.assign,iA=Symbol.for("react.element"),$r=Symbol.for("react.transitional.element"),Us=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),iy=Symbol.for("react.strict_mode"),Oc=Symbol.for("react.profiler"),oy=Symbol.for("react.consumer"),bn=Symbol.for("react.context"),Pf=Symbol.for("react.forward_ref"),qc=Symbol.for("react.suspense"),Fc=Symbol.for("react.suspense_list"),Lf=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy");Symbol.for("react.scope");var Vc=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var oA=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var Rh=Symbol.iterator;function bs(t){return t===null||typeof t!="object"?null:(t=Rh&&t[Rh]||t["@@iterator"],typeof t=="function"?t:null)}var sA=Symbol.for("react.client.reference");function zc(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===sA?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case Oc:return"Profiler";case iy:return"StrictMode";case qc:return"Suspense";case Fc:return"SuspenseList";case Vc:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Us:return"Portal";case bn:return t.displayName||"Context";case oy:return(t._context.displayName||"Context")+".Consumer";case Pf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lf:return e=t.displayName||null,e!==null?e:zc(t.type)||"Memo";case Qn:e=t._payload,t=t._init;try{return zc(t(e))}catch{}}return null}var Ps=Array.isArray,L=Wg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=tA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ui={pending:!1,data:null,method:null,action:null},Bc=[],So=-1;function mn(t){return{current:t}}function ze(t){0>So||(t.current=Bc[So],Bc[So]=null,So--)}function pe(t,e){So++,Bc[So]=t.current,t.current=e}var pn=mn(null),Ws=mn(null),ai=mn(null),Ca=mn(null);function xa(t,e){switch(pe(ai,e),pe(Ws,t),pe(pn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Pg(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Pg(e),t=C0(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ze(pn),pe(pn,t)}function Ho(){ze(pn),ze(Ws),ze(ai)}function $c(t){t.memoizedState!==null&&pe(Ca,t);var e=pn.current,n=C0(e,t.type);e!==n&&(pe(Ws,t),pe(pn,n))}function wa(t){Ws.current===t&&(ze(pn),ze(Ws)),Ca.current===t&&(ze(Ca),ur._currentValue=Ui)}var rc,Nh;function Mi(t){if(rc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rc=e&&e[1]||"",Nh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rc+t+Nh}var ac=!1;function lc(t,e){if(!t||ac)return"";ac=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(h){var m=h}Reflect.construct(t,[],p)}else{try{p.call()}catch(h){m=h}t.call(p.prototype)}}else{try{throw Error()}catch(h){m=h}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],l=s[1];if(r&&l){var u=r.split(`
`),f=l.split(`
`);for(o=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;o<f.length&&!f[o].includes("DetermineComponentFrameRoot");)o++;if(i===u.length||o===f.length)for(i=u.length-1,o=f.length-1;1<=i&&0<=o&&u[i]!==f[o];)o--;for(;1<=i&&0<=o;i--,o--)if(u[i]!==f[o]){if(i!==1||o!==1)do if(i--,o--,0>o||u[i]!==f[o]){var d=`
`+u[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=o);break}}}finally{ac=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Mi(n):""}function rA(t,e){switch(t.tag){case 26:case 27:case 5:return Mi(t.type);case 16:return Mi("Lazy");case 13:return t.child!==e&&e!==null?Mi("Suspense Fallback"):Mi("Suspense");case 19:return Mi("SuspenseList");case 0:case 15:return lc(t.type,!1);case 11:return lc(t.type.render,!1);case 1:return lc(t.type,!0);case 31:return Mi("Activity");default:return""}}function Mh(t){try{var e="",n=null;do e+=rA(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Yc=Object.prototype.hasOwnProperty,Hf=Ge.unstable_scheduleCallback,uc=Ge.unstable_cancelCallback,aA=Ge.unstable_shouldYield,lA=Ge.unstable_requestPaint,At=Ge.unstable_now,uA=Ge.unstable_getCurrentPriorityLevel,sy=Ge.unstable_ImmediatePriority,ry=Ge.unstable_UserBlockingPriority,ba=Ge.unstable_NormalPriority,cA=Ge.unstable_LowPriority,ay=Ge.unstable_IdlePriority,fA=Ge.log,dA=Ge.unstable_setDisableYieldValue,pr=null,Ct=null;function ni(t){if(typeof fA=="function"&&dA(t),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(pr,t)}catch{}}var xt=Math.clz32?Math.clz32:hA,pA=Math.log,mA=Math.LN2;function hA(t){return t>>>=0,t===0?32:31-(pA(t)/mA|0)|0}var Yr=256,Jr=262144,Kr=4194304;function Ii(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ja(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var o=0,s=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?o=Ii(i):(r&=l,r!==0?o=Ii(r):n||(n=l&~t,n!==0&&(o=Ii(n))))):(l=i&~s,l!==0?o=Ii(l):r!==0?o=Ii(r):n||(n=i&~t,n!==0&&(o=Ii(n)))),o===0?0:e!==0&&e!==o&&(e&s)===0&&(s=o&-o,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:o}function mr(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function gA(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ly(){var t=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),t}function cc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hr(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function yA(t,e,n,i,o,s){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,f=t.hiddenUpdates;for(n=r&~n;0<n;){var d=31-xt(n),p=1<<d;l[d]=0,u[d]=-1;var m=f[d];if(m!==null)for(f[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~p}i!==0&&uy(t,i,0),s!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=s&~(r&~e))}function uy(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-xt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-xt(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}function fy(t,e){var n=e&-e;return n=(n&42)!==0?1:Gf(n),(n&(t.suspendedLanes|e))!==0?0:n}function Gf(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Of(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function dy(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:P0(t.type))}function Ih(t,e){var n=ie.p;try{return ie.p=t,e()}finally{ie.p=n}}var Ti=Math.random().toString(36).slice(2),Ke="__reactFiber$"+Ti,mt="__reactProps$"+Ti,Ko="__reactContainer$"+Ti,Jc="__reactEvents$"+Ti,vA="__reactListeners$"+Ti,SA="__reactHandles$"+Ti,kh="__reactResources$"+Ti,gr="__reactMarker$"+Ti;function qf(t){delete t[Ke],delete t[mt],delete t[Jc],delete t[vA],delete t[SA]}function To(t){var e=t[Ke];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ko]||n[Ke]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qg(t);t!==null;){if(n=t[Ke])return n;t=qg(t)}return e}t=n,n=t.parentNode}return null}function Xo(t){if(t=t[Ke]||t[Ko]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ls(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(C(33))}function Mo(t){var e=t[kh];return e||(e=t[kh]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ve(t){t[gr]=!0}var py=new Set,my={};function Bi(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(my[t]=e,t=0;t<e.length;t++)py.add(e[t])}var TA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dh={},Uh={};function EA(t){return Yc.call(Uh,t)?!0:Yc.call(Dh,t)?!1:TA.test(t)?Uh[t]=!0:(Dh[t]=!0,!1)}function ua(t,e,n){if(EA(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Xr(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Tn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Dt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _A(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kc(t){if(!t._valueTracker){var e=hy(t)?"checked":"value";t._valueTracker=_A(t,e,""+t[e])}}function gy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=hy(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ra(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var AA=/[\n"\\]/g;function Lt(t){return t.replace(AA,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Xc(t,e,n,i,o,s,r,l){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Dt(e)):t.value!==""+Dt(e)&&(t.value=""+Dt(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?Qc(t,r,Dt(e)):n!=null?Qc(t,r,Dt(n)):i!=null&&t.removeAttribute("value"),o==null&&s!=null&&(t.defaultChecked=!!s),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Dt(l):t.removeAttribute("name")}function yy(t,e,n,i,o,s,r,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){Kc(t);return}n=n!=null?""+Dt(n):"",e=e!=null?""+Dt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),Kc(t)}function Qc(t,e,n){e==="number"&&Ra(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Io(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Dt(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function vy(t,e,n){if(e!=null&&(e=""+Dt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Dt(n):""}function Sy(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(C(92));if(Ps(i)){if(1<i.length)throw Error(C(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Dt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Kc(t)}function Oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var CA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ph(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||CA.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Ty(t,e,n){if(e!=null&&typeof e!="object")throw Error(C(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var o in e)i=e[o],e.hasOwnProperty(o)&&n[o]!==i&&Ph(t,o,i)}else for(var s in e)e.hasOwnProperty(s)&&Ph(t,s,e[s])}function Ff(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(t){return wA.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Rn(){}var Zc=null;function Vf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eo=null,ko=null;function Lh(t){var e=Xo(t);if(e&&(t=e.stateNode)){var n=t[mt]||null;e:switch(t=e.stateNode,e.type){case"input":if(Xc(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Lt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=i[mt]||null;if(!o)throw Error(C(90));Xc(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&gy(i)}break e;case"textarea":vy(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Io(t,!!n.multiple,e,!1)}}}var fc=!1;function Ey(t,e,n){if(fc)return t(e,n);fc=!0;try{var i=t(e);return i}finally{if(fc=!1,(Eo!==null||ko!==null)&&(fl(),Eo&&(e=Eo,t=ko,ko=Eo=null,Lh(e),t)))for(e=0;e<t.length;e++)Lh(t[e])}}function js(t,e){var n=t.stateNode;if(n===null)return null;var i=n[mt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wc=!1;if(Dn)try{po={},Object.defineProperty(po,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Wc=!1}var po,ii=null,zf=null,fa=null;function _y(){if(fa)return fa;var t,e=zf,n=e.length,i,o="value"in ii?ii.value:ii.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===o[s-i];i++);return fa=o.slice(t,1<i?1-i:void 0)}function da(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qr(){return!0}function Hh(){return!1}function ht(t){function e(n,i,o,s,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qr:Hh,this.isPropagationStopped=Hh,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),e}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=ht($i),yr=ye({},$i,{view:0,detail:0}),bA=ht(yr),dc,pc,Rs,tl=ye({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rs&&(Rs&&t.type==="mousemove"?(dc=t.screenX-Rs.screenX,pc=t.screenY-Rs.screenY):pc=dc=0,Rs=t),dc)},movementY:function(t){return"movementY"in t?t.movementY:pc}}),Gh=ht(tl),RA=ye({},tl,{dataTransfer:0}),NA=ht(RA),MA=ye({},yr,{relatedTarget:0}),mc=ht(MA),IA=ye({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),kA=ht(IA),DA=ye({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UA=ht(DA),PA=ye({},$i,{data:0}),Oh=ht(PA),LA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GA[t])?!!e[t]:!1}function Bf(){return OA}var qA=ye({},yr,{key:function(t){if(t.key){var e=LA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=da(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(t){return t.type==="keypress"?da(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?da(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FA=ht(qA),VA=ye({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qh=ht(VA),zA=ye({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),BA=ht(zA),$A=ye({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),YA=ht($A),JA=ye({},tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KA=ht(JA),XA=ye({},$i,{newState:0,oldState:0}),QA=ht(XA),ZA=[9,13,27,32],$f=Dn&&"CompositionEvent"in window,Os=null;Dn&&"documentMode"in document&&(Os=document.documentMode);var WA=Dn&&"TextEvent"in window&&!Os,Ay=Dn&&(!$f||Os&&8<Os&&11>=Os),Fh=String.fromCharCode(32),Vh=!1;function Cy(t,e){switch(t){case"keyup":return ZA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function jA(t,e){switch(t){case"compositionend":return xy(e);case"keypress":return e.which!==32?null:(Vh=!0,Fh);case"textInput":return t=e.data,t===Fh&&Vh?null:t;default:return null}}function eC(t,e){if(_o)return t==="compositionend"||!$f&&Cy(t,e)?(t=_y(),fa=zf=ii=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ay&&e.locale!=="ko"?null:e.data;default:return null}}var tC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tC[t.type]:e==="textarea"}function wy(t,e,n,i){Eo?ko?ko.push(i):ko=[i]:Eo=i,e=Ya(e,"onChange"),0<e.length&&(n=new el("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qs=null,er=null;function nC(t){E0(t,0)}function nl(t){var e=Ls(t);if(gy(e))return t}function Bh(t,e){if(t==="change")return e}var by=!1;Dn&&(Dn?(Wr="oninput"in document,Wr||(hc=document.createElement("div"),hc.setAttribute("oninput","return;"),Wr=typeof hc.oninput=="function"),Zr=Wr):Zr=!1,by=Zr&&(!document.documentMode||9<document.documentMode));var Zr,Wr,hc;function $h(){qs&&(qs.detachEvent("onpropertychange",Ry),er=qs=null)}function Ry(t){if(t.propertyName==="value"&&nl(er)){var e=[];wy(e,er,t,Vf(t)),Ey(nC,e)}}function iC(t,e,n){t==="focusin"?($h(),qs=e,er=n,qs.attachEvent("onpropertychange",Ry)):t==="focusout"&&$h()}function oC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(er)}function sC(t,e){if(t==="click")return nl(e)}function rC(t,e){if(t==="input"||t==="change")return nl(e)}function aC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bt=typeof Object.is=="function"?Object.is:aC;function tr(t,e){if(bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Yc.call(e,o)||!bt(t[o],e[o]))return!1}return!0}function Yh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jh(t,e){var n=Yh(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yh(n)}}function Ny(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ny(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function My(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Ra(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ra(t.document)}return e}function Yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var lC=Dn&&"documentMode"in document&&11>=document.documentMode,Ao=null,jc=null,Fs=null,ef=!1;function Kh(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ef||Ao==null||Ao!==Ra(i)||(i=Ao,"selectionStart"in i&&Yf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fs&&tr(Fs,i)||(Fs=i,i=Ya(jc,"onSelect"),0<i.length&&(e=new el("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ao)))}function Ni(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Co={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionrun:Ni("Transition","TransitionRun"),transitionstart:Ni("Transition","TransitionStart"),transitioncancel:Ni("Transition","TransitionCancel"),transitionend:Ni("Transition","TransitionEnd")},gc={},Iy={};Dn&&(Iy=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Yi(t){if(gc[t])return gc[t];if(!Co[t])return t;var e=Co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Iy)return gc[t]=e[n];return t}var ky=Yi("animationend"),Dy=Yi("animationiteration"),Uy=Yi("animationstart"),uC=Yi("transitionrun"),cC=Yi("transitionstart"),fC=Yi("transitioncancel"),Py=Yi("transitionend"),Ly=new Map,tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tf.push("scrollEnd");function Xt(t,e){Ly.set(t,e),Bi(e,[t])}var Na=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},kt=[],xo=0,Jf=0;function il(){for(var t=xo,e=Jf=xo=0;e<t;){var n=kt[e];kt[e++]=null;var i=kt[e];kt[e++]=null;var o=kt[e];kt[e++]=null;var s=kt[e];if(kt[e++]=null,i!==null&&o!==null){var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}s!==0&&Hy(n,o,s)}}function ol(t,e,n,i){kt[xo++]=t,kt[xo++]=e,kt[xo++]=n,kt[xo++]=i,Jf|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Kf(t,e,n,i){return ol(t,e,n,i),Ma(t)}function Ji(t,e){return ol(t,null,null,e),Ma(t)}function Hy(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var o=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(o=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,o&&e!==null&&(o=31-xt(n),t=s.hiddenUpdates,i=t[o],i===null?t[o]=[e]:i.push(e),e.lane=n|536870912),s):null}function Ma(t){if(50<Qs)throw Qs=0,Af=null,Error(C(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var wo={};function dC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(t,e,n,i){return new dC(t,e,n,i)}function Xf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mn(t,e){var n=t.alternate;return n===null?(n=Et(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Gy(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function pa(t,e,n,i,o,s){var r=0;if(i=t,typeof t=="function")Xf(t)&&(r=1);else if(typeof t=="string")r=hx(t,n,pn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Vc:return t=Et(31,n,e,o),t.elementType=Vc,t.lanes=s,t;case vo:return Pi(n.children,o,s,e);case iy:r=8,o|=24;break;case Oc:return t=Et(12,n,e,o|2),t.elementType=Oc,t.lanes=s,t;case qc:return t=Et(13,n,e,o),t.elementType=qc,t.lanes=s,t;case Fc:return t=Et(19,n,e,o),t.elementType=Fc,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bn:r=10;break e;case oy:r=9;break e;case Pf:r=11;break e;case Lf:r=14;break e;case Qn:r=16,i=null;break e}r=29,n=Error(C(130,t===null?"null":typeof t,"")),i=null}return e=Et(r,n,e,o),e.elementType=t,e.type=i,e.lanes=s,e}function Pi(t,e,n,i){return t=Et(7,t,i,e),t.lanes=n,t}function yc(t,e,n){return t=Et(6,t,null,e),t.lanes=n,t}function Oy(t){var e=Et(18,null,null,0);return e.stateNode=t,e}function vc(t,e,n){return e=Et(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Xh=new WeakMap;function Ht(t,e){if(typeof t=="object"&&t!==null){var n=Xh.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Mh(e)},Xh.set(t,e),e)}return{value:t,source:e,stack:Mh(e)}}var bo=[],Ro=0,Ia=null,nr=0,Ut=[],Pt=0,gi=null,cn=1,fn="";function xn(t,e){bo[Ro++]=nr,bo[Ro++]=Ia,Ia=t,nr=e}function qy(t,e,n){Ut[Pt++]=cn,Ut[Pt++]=fn,Ut[Pt++]=gi,gi=t;var i=cn;t=fn;var o=32-xt(i)-1;i&=~(1<<o),n+=1;var s=32-xt(e)+o;if(30<s){var r=o-o%5;s=(i&(1<<r)-1).toString(32),i>>=r,o-=r,cn=1<<32-xt(e)+o|n<<o|i,fn=s+t}else cn=1<<s|n<<o|i,fn=t}function Qf(t){t.return!==null&&(xn(t,1),qy(t,1,0))}function Zf(t){for(;t===Ia;)Ia=bo[--Ro],bo[Ro]=null,nr=bo[--Ro],bo[Ro]=null;for(;t===gi;)gi=Ut[--Pt],Ut[Pt]=null,fn=Ut[--Pt],Ut[Pt]=null,cn=Ut[--Pt],Ut[Pt]=null}function Fy(t,e){Ut[Pt++]=cn,Ut[Pt++]=fn,Ut[Pt++]=gi,cn=e.id,fn=e.overflow,gi=t}var Xe=null,ge=null,W=!1,li=null,Gt=!1,nf=Error(C(519));function yi(t){var e=Error(C(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ir(Ht(e,t)),nf}function Qh(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ke]=t,e[mt]=i,n){case"dialog":J("cancel",e),J("close",e);break;case"iframe":case"object":case"embed":J("load",e);break;case"video":case"audio":for(n=0;n<ar.length;n++)J(ar[n],e);break;case"source":J("error",e);break;case"img":case"image":case"link":J("error",e),J("load",e);break;case"details":J("toggle",e);break;case"input":J("invalid",e),yy(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":J("invalid",e);break;case"textarea":J("invalid",e),Sy(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||A0(e.textContent,n)?(i.popover!=null&&(J("beforetoggle",e),J("toggle",e)),i.onScroll!=null&&J("scroll",e),i.onScrollEnd!=null&&J("scrollend",e),i.onClick!=null&&(e.onclick=Rn),e=!0):e=!1,e||yi(t,!0)}function Zh(t){for(Xe=t.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:Gt=!1;return;case 27:case 3:Gt=!0;return;default:Xe=Xe.return}}function mo(t){if(t!==Xe)return!1;if(!W)return Zh(t),W=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Rf(t.type,t.memoizedProps)),n=!n),n&&ge&&yi(t),Zh(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));ge=Og(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));ge=Og(t)}else e===27?(e=ge,Ei(t.type)?(t=kf,kf=null,ge=t):ge=e):ge=Xe?qt(t.stateNode.nextSibling):null;return!0}function Oi(){ge=Xe=null,W=!1}function Sc(){var t=li;return t!==null&&(dt===null?dt=t:dt.push.apply(dt,t),li=null),t}function ir(t){li===null?li=[t]:li.push(t)}var of=mn(null),Ki=null,Nn=null;function Wn(t,e,n){pe(of,e._currentValue),e._currentValue=n}function In(t){t._currentValue=of.current,ze(of)}function sf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function rf(t,e,n,i){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){var r=o.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=o;for(var u=0;u<e.length;u++)if(l.context===e[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),sf(s.return,n,t),i||(r=null);break e}s=l.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(C(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),sf(r,n,t),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===t){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Qo(t,e,n,i){t=null;for(var o=e,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(C(387));if(r=r.memoizedProps,r!==null){var l=o.type;bt(o.pendingProps.value,r.value)||(t!==null?t.push(l):t=[l])}}else if(o===Ca.current){if(r=o.alternate,r===null)throw Error(C(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(ur):t=[ur])}o=o.return}t!==null&&rf(e,t,n,i),e.flags|=262144}function ka(t){for(t=t.firstContext;t!==null;){if(!bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function qi(t){Ki=t,Nn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qe(t){return Vy(Ki,t)}function jr(t,e){return Ki===null&&qi(t),Vy(t,e)}function Vy(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Nn===null){if(t===null)throw Error(C(308));Nn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Nn=Nn.next=e;return n}var pC=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},mC=Ge.unstable_scheduleCallback,hC=Ge.unstable_NormalPriority,ke={$$typeof:bn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new pC,data:new Map,refCount:0}}function vr(t){t.refCount--,t.refCount===0&&mC(hC,function(){t.controller.abort()})}var Vs=null,af=0,qo=0,Do=null;function gC(t,e){if(Vs===null){var n=Vs=[];af=0,qo=Ad(),Do={status:"pending",value:void 0,then:function(i){n.push(i)}}}return af++,e.then(Wh,Wh),e}function Wh(){if(--af===0&&Vs!==null){Do!==null&&(Do.status="fulfilled");var t=Vs;Vs=null,qo=0,Do=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function yC(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var jh=L.S;L.S=function(t,e){n0=At(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&gC(t,e),jh!==null&&jh(t,e)};var Li=mn(null);function jf(){var t=Li.current;return t!==null?t:fe.pooledCache}function ma(t,e){e===null?pe(Li,Li.current):pe(Li,e.pool)}function zy(){var t=jf();return t===null?null:{parent:ke._currentValue,pool:t}}var Zo=Error(C(460)),ed=Error(C(474)),sl=Error(C(542)),Da={then:function(){}};function eg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function By(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Rn,Rn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ng(t),t;default:if(typeof e.status=="string")e.then(Rn,Rn);else{if(t=fe,t!==null&&100<t.shellSuspendCounter)throw Error(C(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=i}},function(i){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ng(t),t}throw Hi=e,Zo}}function ki(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Hi=n,Zo):n}}var Hi=null;function tg(){if(Hi===null)throw Error(C(459));var t=Hi;return Hi=null,t}function ng(t){if(t===Zo||t===sl)throw Error(C(483))}var Uo=null,or=0;function ea(t){var e=or;return or+=1,Uo===null&&(Uo=[]),By(Uo,t,e)}function Ns(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ta(t,e){throw e.$$typeof===iA?Error(C(525)):(t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function $y(t){function e(g,v){if(t){var S=g.deletions;S===null?(g.deletions=[v],g.flags|=16):S.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function i(g){for(var v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function o(g,v){return g=Mn(g,v),g.index=0,g.sibling=null,g}function s(g,v,S){return g.index=S,t?(S=g.alternate,S!==null?(S=S.index,S<v?(g.flags|=67108866,v):S):(g.flags|=67108866,v)):(g.flags|=1048576,v)}function r(g){return t&&g.alternate===null&&(g.flags|=67108866),g}function l(g,v,S,_){return v===null||v.tag!==6?(v=yc(S,g.mode,_),v.return=g,v):(v=o(v,S),v.return=g,v)}function u(g,v,S,_){var x=S.type;return x===vo?d(g,v,S.props.children,_,S.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Qn&&ki(x)===v.type)?(v=o(v,S.props),Ns(v,S),v.return=g,v):(v=pa(S.type,S.key,S.props,null,g.mode,_),Ns(v,S),v.return=g,v)}function f(g,v,S,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=vc(S,g.mode,_),v.return=g,v):(v=o(v,S.children||[]),v.return=g,v)}function d(g,v,S,_,x){return v===null||v.tag!==7?(v=Pi(S,g.mode,_,x),v.return=g,v):(v=o(v,S),v.return=g,v)}function p(g,v,S){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=yc(""+v,g.mode,S),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $r:return S=pa(v.type,v.key,v.props,null,g.mode,S),Ns(S,v),S.return=g,S;case Us:return v=vc(v,g.mode,S),v.return=g,v;case Qn:return v=ki(v),p(g,v,S)}if(Ps(v)||bs(v))return v=Pi(v,g.mode,S,null),v.return=g,v;if(typeof v.then=="function")return p(g,ea(v),S);if(v.$$typeof===bn)return p(g,jr(g,v),S);ta(g,v)}return null}function m(g,v,S,_){var x=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return x!==null?null:l(g,v,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $r:return S.key===x?u(g,v,S,_):null;case Us:return S.key===x?f(g,v,S,_):null;case Qn:return S=ki(S),m(g,v,S,_)}if(Ps(S)||bs(S))return x!==null?null:d(g,v,S,_,null);if(typeof S.then=="function")return m(g,v,ea(S),_);if(S.$$typeof===bn)return m(g,v,jr(g,S),_);ta(g,S)}return null}function h(g,v,S,_,x){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return g=g.get(S)||null,l(v,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $r:return g=g.get(_.key===null?S:_.key)||null,u(v,g,_,x);case Us:return g=g.get(_.key===null?S:_.key)||null,f(v,g,_,x);case Qn:return _=ki(_),h(g,v,S,_,x)}if(Ps(_)||bs(_))return g=g.get(S)||null,d(v,g,_,x,null);if(typeof _.then=="function")return h(g,v,S,ea(_),x);if(_.$$typeof===bn)return h(g,v,S,jr(v,_),x);ta(v,_)}return null}function y(g,v,S,_){for(var x=null,b=null,A=v,M=v=0,R=null;A!==null&&M<S.length;M++){A.index>M?(R=A,A=null):R=A.sibling;var I=m(g,A,S[M],_);if(I===null){A===null&&(A=R);break}t&&A&&I.alternate===null&&e(g,A),v=s(I,v,M),b===null?x=I:b.sibling=I,b=I,A=R}if(M===S.length)return n(g,A),W&&xn(g,M),x;if(A===null){for(;M<S.length;M++)A=p(g,S[M],_),A!==null&&(v=s(A,v,M),b===null?x=A:b.sibling=A,b=A);return W&&xn(g,M),x}for(A=i(A);M<S.length;M++)R=h(A,g,M,S[M],_),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?M:R.key),v=s(R,v,M),b===null?x=R:b.sibling=R,b=R);return t&&A.forEach(function(k){return e(g,k)}),W&&xn(g,M),x}function E(g,v,S,_){if(S==null)throw Error(C(151));for(var x=null,b=null,A=v,M=v=0,R=null,I=S.next();A!==null&&!I.done;M++,I=S.next()){A.index>M?(R=A,A=null):R=A.sibling;var k=m(g,A,I.value,_);if(k===null){A===null&&(A=R);break}t&&A&&k.alternate===null&&e(g,A),v=s(k,v,M),b===null?x=k:b.sibling=k,b=k,A=R}if(I.done)return n(g,A),W&&xn(g,M),x;if(A===null){for(;!I.done;M++,I=S.next())I=p(g,I.value,_),I!==null&&(v=s(I,v,M),b===null?x=I:b.sibling=I,b=I);return W&&xn(g,M),x}for(A=i(A);!I.done;M++,I=S.next())I=h(A,g,M,I.value,_),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?M:I.key),v=s(I,v,M),b===null?x=I:b.sibling=I,b=I);return t&&A.forEach(function(X){return e(g,X)}),W&&xn(g,M),x}function T(g,v,S,_){if(typeof S=="object"&&S!==null&&S.type===vo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $r:e:{for(var x=S.key;v!==null;){if(v.key===x){if(x=S.type,x===vo){if(v.tag===7){n(g,v.sibling),_=o(v,S.props.children),_.return=g,g=_;break e}}else if(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Qn&&ki(x)===v.type){n(g,v.sibling),_=o(v,S.props),Ns(_,S),_.return=g,g=_;break e}n(g,v);break}else e(g,v);v=v.sibling}S.type===vo?(_=Pi(S.props.children,g.mode,_,S.key),_.return=g,g=_):(_=pa(S.type,S.key,S.props,null,g.mode,_),Ns(_,S),_.return=g,g=_)}return r(g);case Us:e:{for(x=S.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(g,v.sibling),_=o(v,S.children||[]),_.return=g,g=_;break e}else{n(g,v);break}else e(g,v);v=v.sibling}_=vc(S,g.mode,_),_.return=g,g=_}return r(g);case Qn:return S=ki(S),T(g,v,S,_)}if(Ps(S))return y(g,v,S,_);if(bs(S)){if(x=bs(S),typeof x!="function")throw Error(C(150));return S=x.call(S),E(g,v,S,_)}if(typeof S.then=="function")return T(g,v,ea(S),_);if(S.$$typeof===bn)return T(g,v,jr(g,S),_);ta(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,v!==null&&v.tag===6?(n(g,v.sibling),_=o(v,S),_.return=g,g=_):(n(g,v),_=yc(S,g.mode,_),_.return=g,g=_),r(g)):n(g,v)}return function(g,v,S,_){try{or=0;var x=T(g,v,S,_);return Uo=null,x}catch(A){if(A===Zo||A===sl)throw A;var b=Et(29,A,null,g.mode);return b.lanes=_,b.return=g,b}finally{}}}var Fi=$y(!0),Yy=$y(!1),Zn=!1;function td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ui(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ci(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(ne&2)!==0){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,e=Ma(t),Hy(t,null,n),e}return ol(t,i,e,n),Ma(t)}function zs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cy(t,n)}}function Tc(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var uf=!1;function Bs(){if(uf){var t=Do;if(t!==null)throw t}}function $s(t,e,n,i){uf=!1;var o=t.updateQueue;Zn=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,f=u.next;u.next=null,r===null?s=f:r.next=f,r=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=f:l.next=f,d.lastBaseUpdate=u))}if(s!==null){var p=o.baseState;r=0,d=f=u=null,l=s;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(Q&m)===m:(i&m)===m){m!==0&&m===qo&&(uf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var y=t,E=l;m=e;var T=n;switch(E.tag){case 1:if(y=E.payload,typeof y=="function"){p=y.call(T,p,m);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,m=typeof y=="function"?y.call(T,p,m):y,m==null)break e;p=ye({},p,m);break e;case 2:Zn=!0}}m=l.callback,m!==null&&(t.flags|=64,h&&(t.flags|=8192),h=o.callbacks,h===null?o.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(f=d=h,u=p):d=d.next=h,r|=m;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);d===null&&(u=p),o.baseState=u,o.firstBaseUpdate=f,o.lastBaseUpdate=d,s===null&&(o.shared.lanes=0),Si|=r,t.lanes=r,t.memoizedState=p}}function Jy(t,e){if(typeof t!="function")throw Error(C(191,t));t.call(e)}function Ky(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Jy(n[t],e)}var Fo=mn(null),Ua=mn(0);function ig(t,e){t=Hn,pe(Ua,t),pe(Fo,e),Hn=t|e.baseLanes}function cf(){pe(Ua,Hn),pe(Fo,Fo.current)}function nd(){Hn=Ua.current,ze(Fo),ze(Ua)}var Rt=mn(null),Ot=null;function jn(t){var e=t.alternate;pe(be,be.current&1),pe(Rt,t),Ot===null&&(e===null||Fo.current!==null||e.memoizedState!==null)&&(Ot=t)}function ff(t){pe(be,be.current),pe(Rt,t),Ot===null&&(Ot=t)}function Xy(t){t.tag===22?(pe(be,be.current),pe(Rt,t),Ot===null&&(Ot=t)):ei(t)}function ei(){pe(be,be.current),pe(Rt,Rt.current)}function Tt(t){ze(Rt),Ot===t&&(Ot=null),ze(be)}var be=mn(0);function Pa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Mf(n)||If(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Un=0,$=null,ce=null,Me=null,La=!1,Po=!1,Vi=!1,Ha=0,sr=0,Lo=null,vC=0;function xe(){throw Error(C(321))}function id(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bt(t[n],e[n]))return!1;return!0}function od(t,e,n,i,o,s){return Un=s,$=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,L.H=t===null||t.memoizedState===null?wv:hd,Vi=!1,s=n(i,o),Vi=!1,Po&&(s=Zy(e,n,i,o)),Qy(t),s}function Qy(t){L.H=rr;var e=ce!==null&&ce.next!==null;if(Un=0,Me=ce=$=null,La=!1,sr=0,Lo=null,e)throw Error(C(300));t===null||De||(t=t.dependencies,t!==null&&ka(t)&&(De=!0))}function Zy(t,e,n,i){$=t;var o=0;do{if(Po&&(Lo=null),sr=0,Po=!1,25<=o)throw Error(C(301));if(o+=1,Me=ce=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}L.H=bv,s=e(n,i)}while(Po);return s}function SC(){var t=L.H,e=t.useState()[0];return e=typeof e.then=="function"?Sr(e):e,t=t.useState()[0],(ce!==null?ce.memoizedState:null)!==t&&($.flags|=1024),e}function sd(){var t=Ha!==0;return Ha=0,t}function rd(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ad(t){if(La){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}La=!1}Un=0,Me=ce=$=null,Po=!1,sr=Ha=0,Lo=null}function rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?$.memoizedState=Me=t:Me=Me.next=t,Me}function Re(){if(ce===null){var t=$.alternate;t=t!==null?t.memoizedState:null}else t=ce.next;var e=Me===null?$.memoizedState:Me.next;if(e!==null)Me=e,ce=t;else{if(t===null)throw $.alternate===null?Error(C(467)):Error(C(310));ce=t,t={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},Me===null?$.memoizedState=Me=t:Me=Me.next=t}return Me}function rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sr(t){var e=sr;return sr+=1,Lo===null&&(Lo=[]),t=By(Lo,t,e),e=$,(Me===null?e.memoizedState:Me.next)===null&&(e=e.alternate,L.H=e===null||e.memoizedState===null?wv:hd),t}function al(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sr(t);if(t.$$typeof===bn)return Qe(t)}throw Error(C(438,String(t)))}function ld(t){var e=null,n=$.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=$.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=rl(),$.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=oA;return e.index++,n}function Pn(t,e){return typeof e=="function"?e(t):e}function ha(t){var e=Re();return ud(e,ce,t)}function ud(t,e,n){var i=t.queue;if(i===null)throw Error(C(311));i.lastRenderedReducer=n;var o=t.baseQueue,s=i.pending;if(s!==null){if(o!==null){var r=o.next;o.next=s.next,s.next=r}e.baseQueue=o=s,i.pending=null}if(s=t.baseState,o===null)t.memoizedState=s;else{e=o.next;var l=r=null,u=null,f=e,d=!1;do{var p=f.lane&-536870913;if(p!==f.lane?(Q&p)===p:(Un&p)===p){var m=f.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),p===qo&&(d=!0);else if((Un&m)===m){f=f.next,m===qo&&(d=!0);continue}else p={lane:0,revertLane:f.revertLane,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=p,r=s):u=u.next=p,$.lanes|=m,Si|=m;p=f.action,Vi&&n(s,p),s=f.hasEagerState?f.eagerState:n(s,p)}else m={lane:p,revertLane:f.revertLane,gesture:f.gesture,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=m,r=s):u=u.next=m,$.lanes|=p,Si|=p;f=f.next}while(f!==null&&f!==e);if(u===null?r=s:u.next=l,!bt(s,t.memoizedState)&&(De=!0,d&&(n=Do,n!==null)))throw n;t.memoizedState=s,t.baseState=r,t.baseQueue=u,i.lastRenderedState=s}return o===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Ec(t){var e=Re(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do s=t(s,r.action),r=r.next;while(r!==o);bt(s,e.memoizedState)||(De=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Wy(t,e,n){var i=$,o=Re(),s=W;if(s){if(n===void 0)throw Error(C(407));n=n()}else n=e();var r=!bt((ce||o).memoizedState,n);if(r&&(o.memoizedState=n,De=!0),o=o.queue,cd(tv.bind(null,i,o,t),[t]),o.getSnapshot!==e||r||Me!==null&&Me.memoizedState.tag&1){if(i.flags|=2048,Vo(9,{destroy:void 0},ev.bind(null,i,o,n,e),null),fe===null)throw Error(C(349));s||(Un&127)!==0||jy(i,e,n)}return n}function jy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$.updateQueue,e===null?(e=rl(),$.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ev(t,e,n,i){e.value=n,e.getSnapshot=i,nv(e)&&iv(t)}function tv(t,e,n){return n(function(){nv(e)&&iv(t)})}function nv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bt(t,n)}catch{return!0}}function iv(t){var e=Ji(t,2);e!==null&&pt(e,t,2)}function df(t){var e=rt();if(typeof t=="function"){var n=t;if(t=n(),Vi){ni(!0);try{n()}finally{ni(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:t},e}function ov(t,e,n,i){return t.baseState=n,ud(t,ce,typeof i=="function"?i:Pn)}function TC(t,e,n,i,o){if(ul(t))throw Error(C(485));if(t=e.action,t!==null){var s={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};L.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,sv(e,s)):(s.next=n.next,e.pending=n.next=s)}}function sv(t,e){var n=e.action,i=e.payload,o=t.state;if(e.isTransition){var s=L.T,r={};L.T=r;try{var l=n(o,i),u=L.S;u!==null&&u(r,l),og(t,e,l)}catch(f){pf(t,e,f)}finally{s!==null&&r.types!==null&&(s.types=r.types),L.T=s}}else try{s=n(o,i),og(t,e,s)}catch(f){pf(t,e,f)}}function og(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){sg(t,e,i)},function(i){return pf(t,e,i)}):sg(t,e,n)}function sg(t,e,n){e.status="fulfilled",e.value=n,rv(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,sv(t,n)))}function pf(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,rv(e),e=e.next;while(e!==i)}t.action=null}function rv(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function av(t,e){return e}function rg(t,e){if(W){var n=fe.formState;if(n!==null){e:{var i=$;if(W){if(ge){t:{for(var o=ge,s=Gt;o.nodeType!==8;){if(!s){o=null;break t}if(o=qt(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){ge=qt(o.nextSibling),i=o.data==="F!";break e}}yi(i)}i=!1}i&&(e=n[0])}}return n=rt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:av,lastRenderedState:e},n.queue=i,n=Av.bind(null,$,i),i.dispatch=n,i=df(!1),s=md.bind(null,$,!1,i.queue),i=rt(),o={state:e,dispatch:null,action:t,pending:null},i.queue=o,n=TC.bind(null,$,o,s,n),o.dispatch=n,i.memoizedState=t,[e,n,!1]}function ag(t){var e=Re();return lv(e,ce,t)}function lv(t,e,n){if(e=ud(t,e,av)[0],t=ha(Pn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Sr(e)}catch(r){throw r===Zo?sl:r}else i=e;e=Re();var o=e.queue,s=o.dispatch;return n!==e.memoizedState&&($.flags|=2048,Vo(9,{destroy:void 0},EC.bind(null,o,n),null)),[i,s,t]}function EC(t,e){t.action=e}function lg(t){var e=Re(),n=ce;if(n!==null)return lv(e,n,t);Re(),e=e.memoizedState,n=Re();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Vo(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=$.updateQueue,e===null&&(e=rl(),$.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function uv(){return Re().memoizedState}function ga(t,e,n,i){var o=rt();$.flags|=t,o.memoizedState=Vo(1|e,{destroy:void 0},n,i===void 0?null:i)}function ll(t,e,n,i){var o=Re();i=i===void 0?null:i;var s=o.memoizedState.inst;ce!==null&&i!==null&&id(i,ce.memoizedState.deps)?o.memoizedState=Vo(e,s,n,i):($.flags|=t,o.memoizedState=Vo(1|e,s,n,i))}function ug(t,e){ga(8390656,8,t,e)}function cd(t,e){ll(2048,8,t,e)}function _C(t){$.flags|=4;var e=$.updateQueue;if(e===null)e=rl(),$.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function cv(t){var e=Re().memoizedState;return _C({ref:e,nextImpl:t}),function(){if((ne&2)!==0)throw Error(C(440));return e.impl.apply(void 0,arguments)}}function fv(t,e){return ll(4,2,t,e)}function dv(t,e){return ll(4,4,t,e)}function pv(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mv(t,e,n){n=n!=null?n.concat([t]):null,ll(4,4,pv.bind(null,e,t),n)}function fd(){}function hv(t,e){var n=Re();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&id(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function gv(t,e){var n=Re();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&id(e,i[1]))return i[0];if(i=t(),Vi){ni(!0);try{t()}finally{ni(!1)}}return n.memoizedState=[i,e],i}function dd(t,e,n){return n===void 0||(Un&1073741824)!==0&&(Q&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=o0(),$.lanes|=t,Si|=t,n)}function yv(t,e,n,i){return bt(n,e)?n:Fo.current!==null?(t=dd(t,n,i),bt(t,e)||(De=!0),t):(Un&42)===0||(Un&1073741824)!==0&&(Q&261930)===0?(De=!0,t.memoizedState=n):(t=o0(),$.lanes|=t,Si|=t,e)}function vv(t,e,n,i,o){var s=ie.p;ie.p=s!==0&&8>s?s:8;var r=L.T,l={};L.T=l,md(t,!1,e,n);try{var u=o(),f=L.S;if(f!==null&&f(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=yC(u,i);Ys(t,e,d,wt(t))}else Ys(t,e,i,wt(t))}catch(p){Ys(t,e,{then:function(){},status:"rejected",reason:p},wt())}finally{ie.p=s,r!==null&&l.types!==null&&(r.types=l.types),L.T=r}}function AC(){}function mf(t,e,n,i){if(t.tag!==5)throw Error(C(476));var o=Sv(t).queue;vv(t,o,e,Ui,n===null?AC:function(){return Tv(t),n(i)})}function Sv(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ui,baseState:Ui,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:Ui},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Tv(t){var e=Sv(t);e.next===null&&(e=t.alternate.memoizedState),Ys(t,e.next.queue,{},wt())}function pd(){return Qe(ur)}function Ev(){return Re().memoizedState}function _v(){return Re().memoizedState}function CC(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=wt();t=ui(n);var i=ci(e,t,n);i!==null&&(pt(i,e,n),zs(i,e,n)),e={cache:Wf()},t.payload=e;return}e=e.return}}function xC(t,e,n){var i=wt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ul(t)?Cv(e,n):(n=Kf(t,e,n,i),n!==null&&(pt(n,t,i),xv(n,e,i)))}function Av(t,e,n){var i=wt();Ys(t,e,n,i)}function Ys(t,e,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ul(t))Cv(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var r=e.lastRenderedState,l=s(r,n);if(o.hasEagerState=!0,o.eagerState=l,bt(l,r))return ol(t,e,o,0),fe===null&&il(),!1}catch{}finally{}if(n=Kf(t,e,o,i),n!==null)return pt(n,t,i),xv(n,e,i),!0}return!1}function md(t,e,n,i){if(i={lane:2,revertLane:Ad(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ul(t)){if(e)throw Error(C(479))}else e=Kf(t,n,i,2),e!==null&&pt(e,t,2)}function ul(t){var e=t.alternate;return t===$||e!==null&&e===$}function Cv(t,e){Po=La=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xv(t,e,n){if((n&4194048)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cy(t,n)}}var rr={readContext:Qe,use:al,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe};rr.useEffectEvent=xe;var wv={readContext:Qe,use:al,useCallback:function(t,e){return rt().memoizedState=[t,e===void 0?null:e],t},useContext:Qe,useEffect:ug,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,ga(4194308,4,pv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ga(4194308,4,t,e)},useInsertionEffect:function(t,e){ga(4,2,t,e)},useMemo:function(t,e){var n=rt();e=e===void 0?null:e;var i=t();if(Vi){ni(!0);try{t()}finally{ni(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=rt();if(n!==void 0){var o=n(e);if(Vi){ni(!0);try{n(e)}finally{ni(!1)}}}else o=e;return i.memoizedState=i.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},i.queue=t,t=t.dispatch=xC.bind(null,$,t),[i.memoizedState,t]},useRef:function(t){var e=rt();return t={current:t},e.memoizedState=t},useState:function(t){t=df(t);var e=t.queue,n=Av.bind(null,$,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:fd,useDeferredValue:function(t,e){var n=rt();return dd(n,t,e)},useTransition:function(){var t=df(!1);return t=vv.bind(null,$,t.queue,!0,!1),rt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=$,o=rt();if(W){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),fe===null)throw Error(C(349));(Q&127)!==0||jy(i,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,ug(tv.bind(null,i,s,t),[t]),i.flags|=2048,Vo(9,{destroy:void 0},ev.bind(null,i,s,n,e),null),n},useId:function(){var t=rt(),e=fe.identifierPrefix;if(W){var n=fn,i=cn;n=(i&~(1<<32-xt(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Ha++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=vC++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:pd,useFormState:rg,useActionState:rg,useOptimistic:function(t){var e=rt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=md.bind(null,$,!0,n),n.dispatch=e,[t,e]},useMemoCache:ld,useCacheRefresh:function(){return rt().memoizedState=CC.bind(null,$)},useEffectEvent:function(t){var e=rt(),n={impl:t};return e.memoizedState=n,function(){if((ne&2)!==0)throw Error(C(440));return n.impl.apply(void 0,arguments)}}},hd={readContext:Qe,use:al,useCallback:hv,useContext:Qe,useEffect:cd,useImperativeHandle:mv,useInsertionEffect:fv,useLayoutEffect:dv,useMemo:gv,useReducer:ha,useRef:uv,useState:function(){return ha(Pn)},useDebugValue:fd,useDeferredValue:function(t,e){var n=Re();return yv(n,ce.memoizedState,t,e)},useTransition:function(){var t=ha(Pn)[0],e=Re().memoizedState;return[typeof t=="boolean"?t:Sr(t),e]},useSyncExternalStore:Wy,useId:Ev,useHostTransitionStatus:pd,useFormState:ag,useActionState:ag,useOptimistic:function(t,e){var n=Re();return ov(n,ce,t,e)},useMemoCache:ld,useCacheRefresh:_v};hd.useEffectEvent=cv;var bv={readContext:Qe,use:al,useCallback:hv,useContext:Qe,useEffect:cd,useImperativeHandle:mv,useInsertionEffect:fv,useLayoutEffect:dv,useMemo:gv,useReducer:Ec,useRef:uv,useState:function(){return Ec(Pn)},useDebugValue:fd,useDeferredValue:function(t,e){var n=Re();return ce===null?dd(n,t,e):yv(n,ce.memoizedState,t,e)},useTransition:function(){var t=Ec(Pn)[0],e=Re().memoizedState;return[typeof t=="boolean"?t:Sr(t),e]},useSyncExternalStore:Wy,useId:Ev,useHostTransitionStatus:pd,useFormState:lg,useActionState:lg,useOptimistic:function(t,e){var n=Re();return ce!==null?ov(n,ce,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:ld,useCacheRefresh:_v};bv.useEffectEvent=cv;function _c(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hf={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=wt(),o=ui(i);o.payload=e,n!=null&&(o.callback=n),e=ci(t,o,i),e!==null&&(pt(e,t,i),zs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=wt(),o=ui(i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ci(t,o,i),e!==null&&(pt(e,t,i),zs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),i=ui(n);i.tag=2,e!=null&&(i.callback=e),e=ci(t,i,n),e!==null&&(pt(e,t,n),zs(e,t,n))}};function cg(t,e,n,i,o,s,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,r):e.prototype&&e.prototype.isPureReactComponent?!tr(n,i)||!tr(o,s):!0}function fg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&hf.enqueueReplaceState(e,e.state,null)}function zi(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=ye({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}function Rv(t){Na(t)}function Nv(t){console.error(t)}function Mv(t){Na(t)}function Ga(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function dg(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function gf(t,e,n){return n=ui(n),n.tag=3,n.payload={element:null},n.callback=function(){Ga(t,e)},n}function Iv(t){return t=ui(t),t.tag=3,t}function kv(t,e,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=i.value;t.payload=function(){return o(s)},t.callback=function(){dg(e,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){dg(e,n,i),typeof o!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function wC(t,e,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Qo(e,n,o,!0),n=Rt.current,n!==null){switch(n.tag){case 31:case 13:return Ot===null?za():n.alternate===null&&we===0&&(we=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Da?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Dc(t,i,o)),!1;case 22:return n.flags|=65536,i===Da?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Dc(t,i,o)),!1}throw Error(C(435,n.tag))}return Dc(t,i,o),za(),!1}if(W)return e=Rt.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=o,i!==nf&&(t=Error(C(422),{cause:i}),ir(Ht(t,n)))):(i!==nf&&(e=Error(C(423),{cause:i}),ir(Ht(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,i=Ht(i,n),o=gf(t.stateNode,i,o),Tc(t,o),we!==4&&(we=2)),!1;var s=Error(C(520),{cause:i});if(s=Ht(s,n),Xs===null?Xs=[s]:Xs.push(s),we!==4&&(we=2),e===null)return!0;i=Ht(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=gf(n.stateNode,i,t),Tc(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(fi===null||!fi.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Iv(o),kv(o,t,n,i),Tc(n,o),!1}n=n.return}while(n!==null);return!1}var gd=Error(C(461)),De=!1;function Je(t,e,n,i){e.child=t===null?Yy(e,null,n,i):Fi(e,t.child,n,i)}function pg(t,e,n,i,o){n=n.render;var s=e.ref;if("ref"in i){var r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}else r=i;return qi(e),i=od(t,e,n,r,s,o),l=sd(),t!==null&&!De?(rd(t,e,o),Ln(t,e,o)):(W&&l&&Qf(e),e.flags|=1,Je(t,e,i,o),e.child)}function mg(t,e,n,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!Xf(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,Dv(t,e,s,i,o)):(t=pa(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!yd(t,o)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:tr,n(r,i)&&t.ref===e.ref)return Ln(t,e,o)}return e.flags|=1,t=Mn(s,i),t.ref=e.ref,t.return=e,e.child=t}function Dv(t,e,n,i,o){if(t!==null){var s=t.memoizedProps;if(tr(s,i)&&t.ref===e.ref)if(De=!1,e.pendingProps=i=s,yd(t,o))(t.flags&131072)!==0&&(De=!0);else return e.lanes=t.lanes,Ln(t,e,o)}return yf(t,e,n,i,o)}function Uv(t,e,n,i){var o=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((e.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~s}else i=0,e.child=null;return hg(t,e,s,n,i)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&ma(e,s!==null?s.cachePool:null),s!==null?ig(e,s):cf(),Xy(e);else return i=e.lanes=536870912,hg(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(ma(e,s.cachePool),ig(e,s),ei(e),e.memoizedState=null):(t!==null&&ma(e,null),cf(),ei(e));return Je(t,e,o,n),e.child}function Hs(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function hg(t,e,n,i,o){var s=jf();return s=s===null?null:{parent:ke._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&ma(e,null),cf(),Xy(e),t!==null&&Qo(t,e,i,!0),e.childLanes=o,null}function ya(t,e){return e=Oa({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function gg(t,e,n){return Fi(e,t.child,null,n),t=ya(e,e.pendingProps),t.flags|=2,Tt(e),e.memoizedState=null,t}function bC(t,e,n){var i=e.pendingProps,o=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(W){if(i.mode==="hidden")return t=ya(e,i),e.lanes=536870912,Hs(null,t);if(ff(e),(t=ge)?(t=w0(t,Gt),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gi!==null?{id:cn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},n=Oy(t),n.return=e,e.child=n,Xe=e,ge=null)):t=null,t===null)throw yi(e);return e.lanes=536870912,null}return ya(e,i)}var s=t.memoizedState;if(s!==null){var r=s.dehydrated;if(ff(e),o)if(e.flags&256)e.flags&=-257,e=gg(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(C(558));else if(De||Qo(t,e,n,!1),o=(n&t.childLanes)!==0,De||o){if(i=fe,i!==null&&(r=fy(i,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,Ji(t,r),pt(i,t,r),gd;za(),e=gg(t,e,n)}else t=s.treeContext,ge=qt(r.nextSibling),Xe=e,W=!0,li=null,Gt=!1,t!==null&&Fy(e,t),e=ya(e,i),e.flags|=4096;return e}return t=Mn(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function va(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(C(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function yf(t,e,n,i,o){return qi(e),n=od(t,e,n,i,void 0,o),i=sd(),t!==null&&!De?(rd(t,e,o),Ln(t,e,o)):(W&&i&&Qf(e),e.flags|=1,Je(t,e,n,o),e.child)}function yg(t,e,n,i,o,s){return qi(e),e.updateQueue=null,n=Zy(e,i,n,o),Qy(t),i=sd(),t!==null&&!De?(rd(t,e,s),Ln(t,e,s)):(W&&i&&Qf(e),e.flags|=1,Je(t,e,n,s),e.child)}function vg(t,e,n,i,o){if(qi(e),e.stateNode===null){var s=wo,r=n.contextType;typeof r=="object"&&r!==null&&(s=Qe(r)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=hf,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},td(e),r=n.contextType,s.context=typeof r=="object"&&r!==null?Qe(r):wo,s.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(_c(e,n,r,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&hf.enqueueReplaceState(s,s.state,null),$s(e,i,s,o),Bs(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,u=zi(n,l);s.props=u;var f=s.context,d=n.contextType;r=wo,typeof d=="object"&&d!==null&&(r=Qe(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||f!==r)&&fg(e,s,i,r),Zn=!1;var m=e.memoizedState;s.state=m,$s(e,i,s,o),Bs(),f=e.memoizedState,l||m!==f||Zn?(typeof p=="function"&&(_c(e,n,p,i),f=e.memoizedState),(u=Zn||cg(e,n,u,i,m,f,r))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),s.props=i,s.state=f,s.context=r,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,lf(t,e),r=e.memoizedProps,d=zi(n,r),s.props=d,p=e.pendingProps,m=s.context,f=n.contextType,u=wo,typeof f=="object"&&f!==null&&(u=Qe(f)),l=n.getDerivedStateFromProps,(f=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==p||m!==u)&&fg(e,s,i,u),Zn=!1,m=e.memoizedState,s.state=m,$s(e,i,s,o),Bs();var h=e.memoizedState;r!==p||m!==h||Zn||t!==null&&t.dependencies!==null&&ka(t.dependencies)?(typeof l=="function"&&(_c(e,n,l,i),h=e.memoizedState),(d=Zn||cg(e,n,d,i,m,h,u)||t!==null&&t.dependencies!==null&&ka(t.dependencies))?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=h),s.props=i,s.state=h,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,va(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Fi(e,t.child,null,o),e.child=Fi(e,null,n,o)):Je(t,e,n,o),e.memoizedState=s.state,t=e.child):t=Ln(t,e,o),t}function Sg(t,e,n,i){return Oi(),e.flags|=256,Je(t,e,n,i),e.child}var Ac={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cc(t){return{baseLanes:t,cachePool:zy()}}function xc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=_t),t}function Pv(t,e,n){var i=e.pendingProps,o=!1,s=(e.flags&128)!==0,r;if((r=s)||(r=t!==null&&t.memoizedState===null?!1:(be.current&2)!==0),r&&(o=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(W){if(o?jn(e):ei(e),(t=ge)?(t=w0(t,Gt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gi!==null?{id:cn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},n=Oy(t),n.return=e,e.child=n,Xe=e,ge=null)):t=null,t===null)throw yi(e);return If(t)?e.lanes=32:e.lanes=536870912,null}var l=i.children;return i=i.fallback,o?(ei(e),o=e.mode,l=Oa({mode:"hidden",children:l},o),i=Pi(i,o,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,i=e.child,i.memoizedState=Cc(n),i.childLanes=xc(t,r,n),e.memoizedState=Ac,Hs(null,i)):(jn(e),vf(e,l))}var u=t.memoizedState;if(u!==null&&(l=u.dehydrated,l!==null)){if(s)e.flags&256?(jn(e),e.flags&=-257,e=wc(t,e,n)):e.memoizedState!==null?(ei(e),e.child=t.child,e.flags|=128,e=null):(ei(e),l=i.fallback,o=e.mode,i=Oa({mode:"visible",children:i.children},o),l=Pi(l,o,n,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,Fi(e,t.child,null,n),i=e.child,i.memoizedState=Cc(n),i.childLanes=xc(t,r,n),e.memoizedState=Ac,e=Hs(null,i));else if(jn(e),If(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var f=r.dgst;r=f,i=Error(C(419)),i.stack="",i.digest=r,ir({value:i,source:null,stack:null}),e=wc(t,e,n)}else if(De||Qo(t,e,n,!1),r=(n&t.childLanes)!==0,De||r){if(r=fe,r!==null&&(i=fy(r,n),i!==0&&i!==u.retryLane))throw u.retryLane=i,Ji(t,i),pt(r,t,i),gd;Mf(l)||za(),e=wc(t,e,n)}else Mf(l)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,ge=qt(l.nextSibling),Xe=e,W=!0,li=null,Gt=!1,t!==null&&Fy(e,t),e=vf(e,i.children),e.flags|=4096);return e}return o?(ei(e),l=i.fallback,o=e.mode,u=t.child,f=u.sibling,i=Mn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?l=Mn(f,l):(l=Pi(l,o,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,Hs(null,i),i=e.child,l=t.child.memoizedState,l===null?l=Cc(n):(o=l.cachePool,o!==null?(u=ke._currentValue,o=o.parent!==u?{parent:u,pool:u}:o):o=zy(),l={baseLanes:l.baseLanes|n,cachePool:o}),i.memoizedState=l,i.childLanes=xc(t,r,n),e.memoizedState=Ac,Hs(t.child,i)):(jn(e),n=t.child,t=n.sibling,n=Mn(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function vf(t,e){return e=Oa({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Oa(t,e){return t=Et(22,t,null,e),t.lanes=0,t}function wc(t,e,n){return Fi(e,t.child,null,n),t=vf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tg(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),sf(t.return,e,n)}function bc(t,e,n,i,o,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o,r.treeForkCount=s)}function Lv(t,e,n){var i=e.pendingProps,o=i.revealOrder,s=i.tail;i=i.children;var r=be.current,l=(r&2)!==0;if(l?(r=r&1|2,e.flags|=128):r&=1,pe(be,r),Je(t,e,i,n),i=W?nr:0,!l&&t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tg(t,n,e);else if(t.tag===19)Tg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Pa(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),bc(e,!1,o,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Pa(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}bc(e,!0,n,null,s,i);break;case"together":bc(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Si|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Qo(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=Mn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yd(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&ka(t)))}function RC(t,e,n){switch(e.tag){case 3:xa(e,e.stateNode.containerInfo),Wn(e,ke,t.memoizedState.cache),Oi();break;case 27:case 5:$c(e);break;case 4:xa(e,e.stateNode.containerInfo);break;case 10:Wn(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,ff(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(jn(e),e.flags|=128,null):(n&e.child.childLanes)!==0?Pv(t,e,n):(jn(e),t=Ln(t,e,n),t!==null?t.sibling:null);jn(e);break;case 19:var o=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Qo(t,e,n,!1),i=(n&e.childLanes)!==0),o){if(i)return Lv(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),pe(be,be.current),i)break;return null;case 22:return e.lanes=0,Uv(t,e,n,e.pendingProps);case 24:Wn(e,ke,t.memoizedState.cache)}return Ln(t,e,n)}function Hv(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)De=!0;else{if(!yd(t,n)&&(e.flags&128)===0)return De=!1,RC(t,e,n);De=(t.flags&131072)!==0}else De=!1,W&&(e.flags&1048576)!==0&&qy(e,nr,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=ki(e.elementType),e.type=t,typeof t=="function")Xf(t)?(i=zi(t,i),e.tag=1,e=vg(null,e,t,i,n)):(e.tag=0,e=yf(null,e,t,i,n));else{if(t!=null){var o=t.$$typeof;if(o===Pf){e.tag=11,e=pg(null,e,t,i,n);break e}else if(o===Lf){e.tag=14,e=mg(null,e,t,i,n);break e}}throw e=zc(t)||t,Error(C(306,e,""))}}return e;case 0:return yf(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,o=zi(i,e.pendingProps),vg(t,e,i,o,n);case 3:e:{if(xa(e,e.stateNode.containerInfo),t===null)throw Error(C(387));i=e.pendingProps;var s=e.memoizedState;o=s.element,lf(t,e),$s(e,i,null,n);var r=e.memoizedState;if(i=r.cache,Wn(e,ke,i),i!==s.cache&&rf(e,[ke],n,!0),Bs(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=Sg(t,e,i,n);break e}else if(i!==o){o=Ht(Error(C(424)),e),ir(o),e=Sg(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ge=qt(t.firstChild),Xe=e,W=!0,li=null,Gt=!0,n=Yy(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Oi(),i===o){e=Ln(t,e,n);break e}Je(t,e,i,n)}e=e.child}return e;case 26:return va(t,e),t===null?(n=Vg(e.type,null,e.pendingProps,null))?e.memoizedState=n:W||(n=e.type,t=e.pendingProps,i=Ja(ai.current).createElement(n),i[Ke]=e,i[mt]=t,Ze(i,n,t),Ve(i),e.stateNode=i):e.memoizedState=Vg(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return $c(e),t===null&&W&&(i=e.stateNode=b0(e.type,e.pendingProps,ai.current),Xe=e,Gt=!0,o=ge,Ei(e.type)?(kf=o,ge=qt(i.firstChild)):ge=o),Je(t,e,e.pendingProps.children,n),va(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&W&&((o=i=ge)&&(i=nx(i,e.type,e.pendingProps,Gt),i!==null?(e.stateNode=i,Xe=e,ge=qt(i.firstChild),Gt=!1,o=!0):o=!1),o||yi(e)),$c(e),o=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,i=s.children,Rf(o,s)?i=null:r!==null&&Rf(o,r)&&(e.flags|=32),e.memoizedState!==null&&(o=od(t,e,SC,null,null,n),ur._currentValue=o),va(t,e),Je(t,e,i,n),e.child;case 6:return t===null&&W&&((t=n=ge)&&(n=ix(n,e.pendingProps,Gt),n!==null?(e.stateNode=n,Xe=e,ge=null,t=!0):t=!1),t||yi(e)),null;case 13:return Pv(t,e,n);case 4:return xa(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Fi(e,null,i,n):Je(t,e,i,n),e.child;case 11:return pg(t,e,e.type,e.pendingProps,n);case 7:return Je(t,e,e.pendingProps,n),e.child;case 8:return Je(t,e,e.pendingProps.children,n),e.child;case 12:return Je(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Wn(e,e.type,i.value),Je(t,e,i.children,n),e.child;case 9:return o=e.type._context,i=e.pendingProps.children,qi(e),o=Qe(o),i=i(o),e.flags|=1,Je(t,e,i,n),e.child;case 14:return mg(t,e,e.type,e.pendingProps,n);case 15:return Dv(t,e,e.type,e.pendingProps,n);case 19:return Lv(t,e,n);case 31:return bC(t,e,n);case 22:return Uv(t,e,n,e.pendingProps);case 24:return qi(e),i=Qe(ke),t===null?(o=jf(),o===null&&(o=fe,s=Wf(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),e.memoizedState={parent:i,cache:o},td(e),Wn(e,ke,o)):((t.lanes&n)!==0&&(lf(t,e),$s(e,null,null,n),Bs()),o=t.memoizedState,s=e.memoizedState,o.parent!==i?(o={parent:i,cache:i},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),Wn(e,ke,i)):(i=s.cache,Wn(e,ke,i),i!==o.cache&&rf(e,[ke],n,!0))),Je(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(C(156,e.tag))}function En(t){t.flags|=4}function Rc(t,e,n,i,o){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(a0())t.flags|=8192;else throw Hi=Da,ed}else t.flags&=-16777217}function Eg(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!M0(e))if(a0())t.flags|=8192;else throw Hi=Da,ed}function na(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?ly():536870912,t.lanes|=e,zo|=e)}function Ms(t,e){if(!W)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function he(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function NC(t,e,n){var i=e.pendingProps;switch(Zf(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(e),null;case 1:return he(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),In(ke),Ho(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(mo(e)?En(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Sc())),he(e),null;case 26:var o=e.type,s=e.memoizedState;return t===null?(En(e),s!==null?(he(e),Eg(e,s)):(he(e),Rc(e,o,null,i,n))):s?s!==t.memoizedState?(En(e),he(e),Eg(e,s)):(he(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&En(e),he(e),Rc(e,o,t,i,n)),null;case 27:if(wa(e),n=ai.current,o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&En(e);else{if(!i){if(e.stateNode===null)throw Error(C(166));return he(e),null}t=pn.current,mo(e)?Qh(e,t):(t=b0(o,i,n),e.stateNode=t,En(e))}return he(e),null;case 5:if(wa(e),o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&En(e);else{if(!i){if(e.stateNode===null)throw Error(C(166));return he(e),null}if(s=pn.current,mo(e))Qh(e,s);else{var r=Ja(ai.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?r.createElement(o,{is:i.is}):r.createElement(o)}}s[Ke]=e,s[mt]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=s;e:switch(Ze(s,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&En(e)}}return he(e),Rc(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&En(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(C(166));if(t=ai.current,mo(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,o=Xe,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}t[Ke]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||A0(t.nodeValue,n)),t||yi(e,!0)}else t=Ja(t).createTextNode(i),t[Ke]=e,e.stateNode=t}return he(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=mo(e),n!==null){if(t===null){if(!i)throw Error(C(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(557));t[Ke]=e}else Oi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;he(e),t=!1}else n=Sc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Tt(e),e):(Tt(e),null);if((e.flags&128)!==0)throw Error(C(558))}return he(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=mo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(C(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(C(317));o[Ke]=e}else Oi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;he(e),o=!1}else o=Sc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(Tt(e),e):(Tt(e),null)}return Tt(e),(e.flags&128)!==0?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),na(e,e.updateQueue),he(e),null);case 4:return Ho(),t===null&&Cd(e.stateNode.containerInfo),he(e),null;case 10:return In(e.type),he(e),null;case 19:if(ze(be),i=e.memoizedState,i===null)return he(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)Ms(i,!1);else{if(we!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=Pa(t),s!==null){for(e.flags|=128,Ms(i,!1),t=s.updateQueue,e.updateQueue=t,na(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Gy(n,t),n=n.sibling;return pe(be,be.current&1|2),W&&xn(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&At()>Fa&&(e.flags|=128,o=!0,Ms(i,!1),e.lanes=4194304)}else{if(!o)if(t=Pa(s),t!==null){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,na(e,t),Ms(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!W)return he(e),null}else 2*At()-i.renderingStartTime>Fa&&n!==536870912&&(e.flags|=128,o=!0,Ms(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=At(),t.sibling=null,n=be.current,pe(be,o?n&1|2:n&1),W&&xn(e,i.treeForkCount),t):(he(e),null);case 22:case 23:return Tt(e),nd(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?(n&536870912)!==0&&(e.flags&128)===0&&(he(e),e.subtreeFlags&6&&(e.flags|=8192)):he(e),n=e.updateQueue,n!==null&&na(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&ze(Li),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),In(ke),he(e),null;case 25:return null;case 30:return null}throw Error(C(156,e.tag))}function MC(t,e){switch(Zf(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return In(ke),Ho(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return wa(e),null;case 31:if(e.memoizedState!==null){if(Tt(e),e.alternate===null)throw Error(C(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Tt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(be),null;case 4:return Ho(),null;case 10:return In(e.type),null;case 22:case 23:return Tt(e),nd(),t!==null&&ze(Li),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return In(ke),null;case 25:return null;default:return null}}function Gv(t,e){switch(Zf(e),e.tag){case 3:In(ke),Ho();break;case 26:case 27:case 5:wa(e);break;case 4:Ho();break;case 31:e.memoizedState!==null&&Tt(e);break;case 13:Tt(e);break;case 19:ze(be);break;case 10:In(e.type);break;case 22:case 23:Tt(e),nd(),t!==null&&ze(Li);break;case 24:In(ke)}}function Tr(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&t)===t){i=void 0;var s=n.create,r=n.inst;i=s(),r.destroy=i}n=n.next}while(n!==o)}}catch(l){le(e,e.return,l)}}function vi(t,e,n){try{var i=e.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&t)===t){var r=i.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,o=e;var u=n,f=l;try{f()}catch(d){le(o,u,d)}}}i=i.next}while(i!==s)}}catch(d){le(e,e.return,d)}}function Ov(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Ky(e,n)}catch(i){le(t,t.return,i)}}}function qv(t,e,n){n.props=zi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){le(t,e,i)}}function Js(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(o){le(t,e,o)}}function dn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){le(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){le(t,e,o)}else n.current=null}function Fv(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){le(t,t.return,o)}}function Nc(t,e,n){try{var i=t.stateNode;QC(i,t.type,n,e),i[mt]=e}catch(o){le(t,t.return,o)}}function Vv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ei(t.type)||t.tag===4}function Mc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ei(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rn));else if(i!==4&&(i===27&&Ei(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}function qa(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Ei(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(qa(t,e,n),t=t.sibling;t!==null;)qa(t,e,n),t=t.sibling}function zv(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);Ze(e,i,n),e[Ke]=t,e[mt]=n}catch(s){le(t,t.return,s)}}var wn=!1,Ie=!1,Ic=!1,_g=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function IC(t,e){if(t=t.containerInfo,wf=Za,t=My(t),Yf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,l=-1,u=-1,f=0,d=0,p=t,m=null;t:for(;;){for(var h;p!==n||o!==0&&p.nodeType!==3||(l=r+o),p!==s||i!==0&&p.nodeType!==3||(u=r+i),p.nodeType===3&&(r+=p.nodeValue.length),(h=p.firstChild)!==null;)m=p,p=h;for(;;){if(p===t)break t;if(m===n&&++f===o&&(l=r),m===s&&++d===i&&(u=r),(h=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=h}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bf={focusedElem:t,selectionRange:n},Za=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){switch(e=Fe,s=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)o=t[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&s!==null){t=void 0,n=e,o=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var y=zi(n.type,o);t=i.getSnapshotBeforeUpdate(y,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(E){le(n,n.return,E)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Nf(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Nf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(C(163))}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}}function Bv(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:An(t,n),i&4&&Tr(5,n);break;case 1:if(An(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){le(n,n.return,r)}else{var o=zi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){le(n,n.return,r)}}i&64&&Ov(n),i&512&&Js(n,n.return);break;case 3:if(An(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Ky(t,e)}catch(r){le(n,n.return,r)}}break;case 27:e===null&&i&4&&zv(n);case 26:case 5:An(t,n),e===null&&i&4&&Fv(n),i&512&&Js(n,n.return);break;case 12:An(t,n);break;case 31:An(t,n),i&4&&Jv(t,n);break;case 13:An(t,n),i&4&&Kv(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=qC.bind(null,n),ox(t,n))));break;case 22:if(i=n.memoizedState!==null||wn,!i){e=e!==null&&e.memoizedState!==null||Ie,o=wn;var s=Ie;wn=i,(Ie=e)&&!s?Cn(t,n,(n.subtreeFlags&8772)!==0):An(t,n),wn=o,Ie=s}break;case 30:break;default:An(t,n)}}function $v(t){var e=t.alternate;e!==null&&(t.alternate=null,$v(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&qf(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ae=null,ft=!1;function _n(t,e,n){for(n=n.child;n!==null;)Yv(t,e,n),n=n.sibling}function Yv(t,e,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(pr,n)}catch{}switch(n.tag){case 26:Ie||dn(n,e),_n(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ie||dn(n,e);var i=Ae,o=ft;Ei(n.type)&&(Ae=n.stateNode,ft=!1),_n(t,e,n),Zs(n.stateNode),Ae=i,ft=o;break;case 5:Ie||dn(n,e);case 6:if(i=Ae,o=ft,Ae=null,_n(t,e,n),Ae=i,ft=o,Ae!==null)if(ft)try{(Ae.nodeType===9?Ae.body:Ae.nodeName==="HTML"?Ae.ownerDocument.body:Ae).removeChild(n.stateNode)}catch(s){le(n,e,s)}else try{Ae.removeChild(n.stateNode)}catch(s){le(n,e,s)}break;case 18:Ae!==null&&(ft?(t=Ae,Hg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Jo(t)):Hg(Ae,n.stateNode));break;case 4:i=Ae,o=ft,Ae=n.stateNode.containerInfo,ft=!0,_n(t,e,n),Ae=i,ft=o;break;case 0:case 11:case 14:case 15:vi(2,n,e),Ie||vi(4,n,e),_n(t,e,n);break;case 1:Ie||(dn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&qv(n,e,i)),_n(t,e,n);break;case 21:_n(t,e,n);break;case 22:Ie=(i=Ie)||n.memoizedState!==null,_n(t,e,n),Ie=i;break;default:_n(t,e,n)}}function Jv(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Jo(t)}catch(n){le(e,e.return,n)}}}function Kv(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Jo(t)}catch(n){le(e,e.return,n)}}function kC(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new _g),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new _g),e;default:throw Error(C(435,t.tag))}}function ia(t,e){var n=kC(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var o=FC.bind(null,t,i);i.then(o,o)}})}function ut(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],s=t,r=e,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(Ei(l.type)){Ae=l.stateNode,ft=!1;break e}break;case 5:Ae=l.stateNode,ft=!1;break e;case 3:case 4:Ae=l.stateNode.containerInfo,ft=!0;break e}l=l.return}if(Ae===null)throw Error(C(160));Yv(s,r,o),Ae=null,ft=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Xv(e,t),e=e.sibling}var Kt=null;function Xv(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ut(e,t),ct(t),i&4&&(vi(3,t,t.return),Tr(3,t),vi(5,t,t.return));break;case 1:ut(e,t),ct(t),i&512&&(Ie||n===null||dn(n,n.return)),i&64&&wn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Kt;if(ut(e,t),ct(t),i&512&&(Ie||n===null||dn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":s=o.getElementsByTagName("title")[0],(!s||s[gr]||s[Ke]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(i),o.head.insertBefore(s,o.querySelector("head > title"))),Ze(s,i,n),s[Ke]=t,Ve(s),i=s;break e;case"link":var r=Bg("link","href",o).get(i+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(s=r[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}s=o.createElement(i),Ze(s,i,n),o.head.appendChild(s);break;case"meta":if(r=Bg("meta","content",o).get(i+(n.content||""))){for(l=0;l<r.length;l++)if(s=r[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}s=o.createElement(i),Ze(s,i,n),o.head.appendChild(s);break;default:throw Error(C(468,i))}s[Ke]=t,Ve(s),i=s}t.stateNode=i}else $g(o,t.type,t.stateNode);else t.stateNode=zg(o,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?$g(o,t.type,t.stateNode):zg(o,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Nc(t,t.memoizedProps,n.memoizedProps)}break;case 27:ut(e,t),ct(t),i&512&&(Ie||n===null||dn(n,n.return)),n!==null&&i&4&&Nc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(ut(e,t),ct(t),i&512&&(Ie||n===null||dn(n,n.return)),t.flags&32){o=t.stateNode;try{Oo(o,"")}catch(y){le(t,t.return,y)}}i&4&&t.stateNode!=null&&(o=t.memoizedProps,Nc(t,o,n!==null?n.memoizedProps:o)),i&1024&&(Ic=!0);break;case 6:if(ut(e,t),ct(t),i&4){if(t.stateNode===null)throw Error(C(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(y){le(t,t.return,y)}}break;case 3:if(Ea=null,o=Kt,Kt=Ka(e.containerInfo),ut(e,t),Kt=o,ct(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(e.containerInfo)}catch(y){le(t,t.return,y)}Ic&&(Ic=!1,Qv(t));break;case 4:i=Kt,Kt=Ka(t.stateNode.containerInfo),ut(e,t),ct(t),Kt=i;break;case 12:ut(e,t),ct(t);break;case 31:ut(e,t),ct(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ia(t,i)));break;case 13:ut(e,t),ct(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(cl=At()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ia(t,i)));break;case 22:o=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=wn,d=Ie;if(wn=f||o,Ie=d||u,ut(e,t),Ie=d,wn=f,ct(t),i&8192)e:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||u||wn||Ie||Di(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(s=u.stateNode,o)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(y){le(u,u.return,y)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(y){le(u,u.return,y)}}}else if(e.tag===18){if(n===null){u=e;try{var h=u.stateNode;o?Gg(h,!0):Gg(u.stateNode,!1)}catch(y){le(u,u.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,ia(t,n))));break;case 19:ut(e,t),ct(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ia(t,i)));break;case 30:break;case 21:break;default:ut(e,t),ct(t)}}function ct(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Vv(i)){n=i;break}i=i.return}if(n==null)throw Error(C(160));switch(n.tag){case 27:var o=n.stateNode,s=Mc(t);qa(t,s,o);break;case 5:var r=n.stateNode;n.flags&32&&(Oo(r,""),n.flags&=-33);var l=Mc(t);qa(t,l,r);break;case 3:case 4:var u=n.stateNode.containerInfo,f=Mc(t);Sf(t,f,u);break;default:throw Error(C(161))}}catch(d){le(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Qv(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function An(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Bv(t,e.alternate,e),e=e.sibling}function Di(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:vi(4,e,e.return),Di(e);break;case 1:dn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&qv(e,e.return,n),Di(e);break;case 27:Zs(e.stateNode);case 26:case 5:dn(e,e.return),Di(e);break;case 22:e.memoizedState===null&&Di(e);break;case 30:Di(e);break;default:Di(e)}t=t.sibling}}function Cn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,o=t,s=e,r=s.flags;switch(s.tag){case 0:case 11:case 15:Cn(o,s,n),Tr(4,s);break;case 1:if(Cn(o,s,n),i=s,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(f){le(i,i.return,f)}if(i=s,o=i.updateQueue,o!==null){var l=i.stateNode;try{var u=o.shared.hiddenCallbacks;if(u!==null)for(o.shared.hiddenCallbacks=null,o=0;o<u.length;o++)Jy(u[o],l)}catch(f){le(i,i.return,f)}}n&&r&64&&Ov(s),Js(s,s.return);break;case 27:zv(s);case 26:case 5:Cn(o,s,n),n&&i===null&&r&4&&Fv(s),Js(s,s.return);break;case 12:Cn(o,s,n);break;case 31:Cn(o,s,n),n&&r&4&&Jv(o,s);break;case 13:Cn(o,s,n),n&&r&4&&Kv(o,s);break;case 22:s.memoizedState===null&&Cn(o,s,n),Js(s,s.return);break;case 30:break;default:Cn(o,s,n)}e=e.sibling}}function vd(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&vr(n))}function Sd(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&vr(t))}function Jt(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zv(t,e,n,i),e=e.sibling}function Zv(t,e,n,i){var o=e.flags;switch(e.tag){case 0:case 11:case 15:Jt(t,e,n,i),o&2048&&Tr(9,e);break;case 1:Jt(t,e,n,i);break;case 3:Jt(t,e,n,i),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&vr(t)));break;case 12:if(o&2048){Jt(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,r=s.id,l=s.onPostCommit;typeof l=="function"&&l(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){le(e,e.return,u)}}else Jt(t,e,n,i);break;case 31:Jt(t,e,n,i);break;case 13:Jt(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,r=e.alternate,e.memoizedState!==null?s._visibility&2?Jt(t,e,n,i):Ks(t,e):s._visibility&2?Jt(t,e,n,i):(s._visibility|=2,go(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),o&2048&&vd(r,e);break;case 24:Jt(t,e,n,i),o&2048&&Sd(e.alternate,e);break;default:Jt(t,e,n,i)}}function go(t,e,n,i,o){for(o=o&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,r=e,l=n,u=i,f=r.flags;switch(r.tag){case 0:case 11:case 15:go(s,r,l,u,o),Tr(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?go(s,r,l,u,o):Ks(s,r):(d._visibility|=2,go(s,r,l,u,o)),o&&f&2048&&vd(r.alternate,r);break;case 24:go(s,r,l,u,o),o&&f&2048&&Sd(r.alternate,r);break;default:go(s,r,l,u,o)}e=e.sibling}}function Ks(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,o=i.flags;switch(i.tag){case 22:Ks(n,i),o&2048&&vd(i.alternate,i);break;case 24:Ks(n,i),o&2048&&Sd(i.alternate,i);break;default:Ks(n,i)}e=e.sibling}}var Gs=8192;function ho(t,e,n){if(t.subtreeFlags&Gs)for(t=t.child;t!==null;)Wv(t,e,n),t=t.sibling}function Wv(t,e,n){switch(t.tag){case 26:ho(t,e,n),t.flags&Gs&&t.memoizedState!==null&&gx(n,Kt,t.memoizedState,t.memoizedProps);break;case 5:ho(t,e,n);break;case 3:case 4:var i=Kt;Kt=Ka(t.stateNode.containerInfo),ho(t,e,n),Kt=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Gs,Gs=16777216,ho(t,e,n),Gs=i):ho(t,e,n));break;default:ho(t,e,n)}}function jv(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Is(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Fe=i,t0(i,t)}jv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)e0(t),t=t.sibling}function e0(t){switch(t.tag){case 0:case 11:case 15:Is(t),t.flags&2048&&vi(9,t,t.return);break;case 3:Is(t);break;case 12:Is(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Sa(t)):Is(t);break;default:Is(t)}}function Sa(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Fe=i,t0(i,t)}jv(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:vi(8,e,e.return),Sa(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Sa(e));break;default:Sa(e)}t=t.sibling}}function t0(t,e){for(;Fe!==null;){var n=Fe;switch(n.tag){case 0:case 11:case 15:vi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:vr(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Fe=i;else e:for(n=t;Fe!==null;){i=Fe;var o=i.sibling,s=i.return;if($v(i),i===n){Fe=null;break e}if(o!==null){o.return=s,Fe=o;break e}Fe=s}}}var DC={getCacheForType:function(t){var e=Qe(ke),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Qe(ke).controller.signal}},UC=typeof WeakMap=="function"?WeakMap:Map,ne=0,fe=null,K=null,Q=0,ae=0,St=null,oi=!1,Wo=!1,Td=!1,Hn=0,we=0,Si=0,Gi=0,Ed=0,_t=0,zo=0,Xs=null,dt=null,Tf=!1,cl=0,n0=0,Fa=1/0,Va=null,fi=null,He=0,di=null,Bo=null,kn=0,Ef=0,_f=null,i0=null,Qs=0,Af=null;function wt(){return(ne&2)!==0&&Q!==0?Q&-Q:L.T!==null?Ad():dy()}function o0(){if(_t===0)if((Q&536870912)===0||W){var t=Jr;Jr<<=1,(Jr&3932160)===0&&(Jr=262144),_t=t}else _t=536870912;return t=Rt.current,t!==null&&(t.flags|=32),_t}function pt(t,e,n){(t===fe&&(ae===2||ae===9)||t.cancelPendingCommit!==null)&&($o(t,0),si(t,Q,_t,!1)),hr(t,n),((ne&2)===0||t!==fe)&&(t===fe&&((ne&2)===0&&(Gi|=n),we===4&&si(t,Q,_t,!1)),hn(t))}function s0(t,e,n){if((ne&6)!==0)throw Error(C(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||mr(t,e),o=i?HC(t,e):kc(t,e,!0),s=i;do{if(o===0){Wo&&!i&&si(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!PC(n)){o=kc(t,e,!1),s=!1;continue}if(o===2){if(s=e,t.errorRecoveryDisabledLanes&s)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var l=t;o=Xs;var u=l.current.memoizedState.isDehydrated;if(u&&($o(l,r).flags|=256),r=kc(l,r,!1),r!==2){if(Td&&!u){l.errorRecoveryDisabledLanes|=s,Gi|=s,o=4;break e}s=dt,dt=o,s!==null&&(dt===null?dt=s:dt.push.apply(dt,s))}o=r}if(s=!1,o!==2)continue}}if(o===1){$o(t,0),si(t,e,0,!0);break}e:{switch(i=t,s=o,s){case 0:case 1:throw Error(C(345));case 4:if((e&4194048)!==e)break;case 6:si(i,e,_t,!oi);break e;case 2:dt=null;break;case 3:case 5:break;default:throw Error(C(329))}if((e&62914560)===e&&(o=cl+300-At(),10<o)){if(si(i,e,_t,!oi),ja(i,0,!0)!==0)break e;kn=e,i.timeoutHandle=x0(Ag.bind(null,i,n,dt,Va,Tf,e,_t,Gi,zo,oi,s,"Throttled",-0,0),o);break e}Ag(i,n,dt,Va,Tf,e,_t,Gi,zo,oi,s,null,-0,0)}}break}while(1);hn(t)}function Ag(t,e,n,i,o,s,r,l,u,f,d,p,m,h){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rn},Wv(e,s,p);var y=(s&62914560)===s?cl-At():(s&4194048)===s?n0-At():0;if(y=yx(p,y),y!==null){kn=s,t.cancelPendingCommit=y(xg.bind(null,t,e,s,n,i,o,r,l,u,d,p,null,m,h)),si(t,s,r,!f);return}}xg(t,e,s,n,i,o,r,l,u)}function PC(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!bt(s(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e,n,i){e&=~Ed,e&=~Gi,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var o=e;0<o;){var s=31-xt(o),r=1<<s;i[s]=-1,o&=~r}n!==0&&uy(t,n,e)}function fl(){return(ne&6)===0?(Er(0,!1),!1):!0}function _d(){if(K!==null){if(ae===0)var t=K.return;else t=K,Nn=Ki=null,ad(t),Uo=null,or=0,t=K;for(;t!==null;)Gv(t.alternate,t),t=t.return;K=null}}function $o(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,jC(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),kn=0,_d(),fe=t,K=n=Mn(t.current,null),Q=e,ae=0,St=null,oi=!1,Wo=mr(t,e),Td=!1,zo=_t=Ed=Gi=Si=we=0,dt=Xs=null,Tf=!1,(e&8)!==0&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var o=31-xt(i),s=1<<o;e|=t[o],i&=~s}return Hn=e,il(),n}function r0(t,e){$=null,L.H=rr,e===Zo||e===sl?(e=tg(),ae=3):e===ed?(e=tg(),ae=4):ae=e===gd?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,St=e,K===null&&(we=1,Ga(t,Ht(e,t.current)))}function a0(){var t=Rt.current;return t===null?!0:(Q&4194048)===Q?Ot===null:(Q&62914560)===Q||(Q&536870912)!==0?t===Ot:!1}function l0(){var t=L.H;return L.H=rr,t===null?rr:t}function u0(){var t=L.A;return L.A=DC,t}function za(){we=4,oi||(Q&4194048)!==Q&&Rt.current!==null||(Wo=!0),(Si&134217727)===0&&(Gi&134217727)===0||fe===null||si(fe,Q,_t,!1)}function kc(t,e,n){var i=ne;ne|=2;var o=l0(),s=u0();(fe!==t||Q!==e)&&(Va=null,$o(t,e)),e=!1;var r=we;e:do try{if(ae!==0&&K!==null){var l=K,u=St;switch(ae){case 8:_d(),r=6;break e;case 3:case 2:case 9:case 6:Rt.current===null&&(e=!0);var f=ae;if(ae=0,St=null,No(t,l,u,f),n&&Wo){r=0;break e}break;default:f=ae,ae=0,St=null,No(t,l,u,f)}}LC(),r=we;break}catch(d){r0(t,d)}while(1);return e&&t.shellSuspendCounter++,Nn=Ki=null,ne=i,L.H=o,L.A=s,K===null&&(fe=null,Q=0,il()),r}function LC(){for(;K!==null;)c0(K)}function HC(t,e){var n=ne;ne|=2;var i=l0(),o=u0();fe!==t||Q!==e?(Va=null,Fa=At()+500,$o(t,e)):Wo=mr(t,e);e:do try{if(ae!==0&&K!==null){e=K;var s=St;t:switch(ae){case 1:ae=0,St=null,No(t,e,s,1);break;case 2:case 9:if(eg(s)){ae=0,St=null,Cg(e);break}e=function(){ae!==2&&ae!==9||fe!==t||(ae=7),hn(t)},s.then(e,e);break e;case 3:ae=7;break e;case 4:ae=5;break e;case 7:eg(s)?(ae=0,St=null,Cg(e)):(ae=0,St=null,No(t,e,s,7));break;case 5:var r=null;switch(K.tag){case 26:r=K.memoizedState;case 5:case 27:var l=K;if(r?M0(r):l.stateNode.complete){ae=0,St=null;var u=l.sibling;if(u!==null)K=u;else{var f=l.return;f!==null?(K=f,dl(f)):K=null}break t}}ae=0,St=null,No(t,e,s,5);break;case 6:ae=0,St=null,No(t,e,s,6);break;case 8:_d(),we=6;break e;default:throw Error(C(462))}}GC();break}catch(d){r0(t,d)}while(1);return Nn=Ki=null,L.H=i,L.A=o,ne=n,K!==null?0:(fe=null,Q=0,il(),we)}function GC(){for(;K!==null&&!aA();)c0(K)}function c0(t){var e=Hv(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,e===null?dl(t):K=e}function Cg(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=yg(n,e,e.pendingProps,e.type,void 0,Q);break;case 11:e=yg(n,e,e.pendingProps,e.type.render,e.ref,Q);break;case 5:ad(e);default:Gv(n,e),e=K=Gy(e,Hn),e=Hv(n,e,Hn)}t.memoizedProps=t.pendingProps,e===null?dl(t):K=e}function No(t,e,n,i){Nn=Ki=null,ad(e),Uo=null,or=0;var o=e.return;try{if(wC(t,o,e,n,Q)){we=1,Ga(t,Ht(n,t.current)),K=null;return}}catch(s){if(o!==null)throw K=o,s;we=1,Ga(t,Ht(n,t.current)),K=null;return}e.flags&32768?(W||i===1?t=!0:Wo||(Q&536870912)!==0?t=!1:(oi=t=!0,(i===2||i===9||i===3||i===6)&&(i=Rt.current,i!==null&&i.tag===13&&(i.flags|=16384))),f0(e,t)):dl(e)}function dl(t){var e=t;do{if((e.flags&32768)!==0){f0(e,oi);return}t=e.return;var n=NC(e.alternate,e,Hn);if(n!==null){K=n;return}if(e=e.sibling,e!==null){K=e;return}K=e=t}while(e!==null);we===0&&(we=5)}function f0(t,e){do{var n=MC(t.alternate,t);if(n!==null){n.flags&=32767,K=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){K=t;return}K=t=n}while(t!==null);we=6,K=null}function xg(t,e,n,i,o,s,r,l,u){t.cancelPendingCommit=null;do pl();while(He!==0);if((ne&6)!==0)throw Error(C(327));if(e!==null){if(e===t.current)throw Error(C(177));if(s=e.lanes|e.childLanes,s|=Jf,yA(t,n,s,r,l,u),t===fe&&(K=fe=null,Q=0),Bo=e,di=t,kn=n,Ef=s,_f=o,i0=i,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,VC(ba,function(){return g0(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||i){i=L.T,L.T=null,o=ie.p,ie.p=2,r=ne,ne|=4;try{IC(t,e,n)}finally{ne=r,ie.p=o,L.T=i}}He=1,d0(),p0(),m0()}}function d0(){if(He===1){He=0;var t=di,e=Bo,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=L.T,L.T=null;var i=ie.p;ie.p=2;var o=ne;ne|=4;try{Xv(e,t);var s=bf,r=My(t.containerInfo),l=s.focusedElem,u=s.selectionRange;if(r!==l&&l&&l.ownerDocument&&Ny(l.ownerDocument.documentElement,l)){if(u!==null&&Yf(l)){var f=u.start,d=u.end;if(d===void 0&&(d=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var h=m.getSelection(),y=l.textContent.length,E=Math.min(u.start,y),T=u.end===void 0?E:Math.min(u.end,y);!h.extend&&E>T&&(r=T,T=E,E=r);var g=Jh(l,E),v=Jh(l,T);if(g&&v&&(h.rangeCount!==1||h.anchorNode!==g.node||h.anchorOffset!==g.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var S=p.createRange();S.setStart(g.node,g.offset),h.removeAllRanges(),E>T?(h.addRange(S),h.extend(v.node,v.offset)):(S.setEnd(v.node,v.offset),h.addRange(S))}}}}for(p=[],h=l;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var _=p[l];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}Za=!!wf,bf=wf=null}finally{ne=o,ie.p=i,L.T=n}}t.current=e,He=2}}function p0(){if(He===2){He=0;var t=di,e=Bo,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=L.T,L.T=null;var i=ie.p;ie.p=2;var o=ne;ne|=4;try{Bv(t,e.alternate,e)}finally{ne=o,ie.p=i,L.T=n}}He=3}}function m0(){if(He===4||He===3){He=0,lA();var t=di,e=Bo,n=kn,i=i0;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?He=5:(He=0,Bo=di=null,h0(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(fi=null),Of(n),e=e.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(pr,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=L.T,o=ie.p,ie.p=2,L.T=null;try{for(var s=t.onRecoverableError,r=0;r<i.length;r++){var l=i[r];s(l.value,{componentStack:l.stack})}}finally{L.T=e,ie.p=o}}(kn&3)!==0&&pl(),hn(t),o=t.pendingLanes,(n&261930)!==0&&(o&42)!==0?t===Af?Qs++:(Qs=0,Af=t):Qs=0,Er(0,!1)}}function h0(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,vr(e)))}function pl(){return d0(),p0(),m0(),g0()}function g0(){if(He!==5)return!1;var t=di,e=Ef;Ef=0;var n=Of(kn),i=L.T,o=ie.p;try{ie.p=32>n?32:n,L.T=null,n=_f,_f=null;var s=di,r=kn;if(He=0,Bo=di=null,kn=0,(ne&6)!==0)throw Error(C(331));var l=ne;if(ne|=4,e0(s.current),Zv(s,s.current,r,n),ne=l,Er(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(pr,s)}catch{}return!0}finally{ie.p=o,L.T=i,h0(t,e)}}function wg(t,e,n){e=Ht(n,e),e=gf(t.stateNode,e,2),t=ci(t,e,2),t!==null&&(hr(t,2),hn(t))}function le(t,e,n){if(t.tag===3)wg(t,t,n);else for(;e!==null;){if(e.tag===3){wg(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fi===null||!fi.has(i))){t=Ht(n,t),n=Iv(2),i=ci(e,n,2),i!==null&&(kv(n,i,e,t),hr(i,2),hn(i));break}}e=e.return}}function Dc(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new UC;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(Td=!0,o.add(n),t=OC.bind(null,t,e,n),e.then(t,t))}function OC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,fe===t&&(Q&n)===n&&(we===4||we===3&&(Q&62914560)===Q&&300>At()-cl?(ne&2)===0&&$o(t,0):Ed|=n,zo===Q&&(zo=0)),hn(t)}function y0(t,e){e===0&&(e=ly()),t=Ji(t,e),t!==null&&(hr(t,e),hn(t))}function qC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y0(t,n)}function FC(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(C(314))}i!==null&&i.delete(e),y0(t,n)}function VC(t,e){return Hf(t,e)}var Ba=null,yo=null,Cf=!1,$a=!1,Uc=!1,ri=0;function hn(t){t!==yo&&t.next===null&&(yo===null?Ba=yo=t:yo=yo.next=t),$a=!0,Cf||(Cf=!0,BC())}function Er(t,e){if(!Uc&&$a){Uc=!0;do for(var n=!1,i=Ba;i!==null;){if(!e)if(t!==0){var o=i.pendingLanes;if(o===0)var s=0;else{var r=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-xt(42|t)+1)-1,s&=o&~(r&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,bg(i,s))}else s=Q,s=ja(i,i===fe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(s&3)===0||mr(i,s)||(n=!0,bg(i,s));i=i.next}while(n);Uc=!1}}function zC(){v0()}function v0(){$a=Cf=!1;var t=0;ri!==0&&WC()&&(t=ri);for(var e=At(),n=null,i=Ba;i!==null;){var o=i.next,s=S0(i,e);s===0?(i.next=null,n===null?Ba=o:n.next=o,o===null&&(yo=n)):(n=i,(t!==0||(s&3)!==0)&&($a=!0)),i=o}He!==0&&He!==5||Er(t,!1),ri!==0&&(ri=0)}function S0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var r=31-xt(s),l=1<<r,u=o[r];u===-1?((l&n)===0||(l&i)!==0)&&(o[r]=gA(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}if(e=fe,n=Q,n=ja(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(ae===2||ae===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&uc(i),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||mr(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&uc(i),Of(n)){case 2:case 8:n=ry;break;case 32:n=ba;break;case 268435456:n=ay;break;default:n=ba}return i=T0.bind(null,t),n=Hf(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&uc(i),t.callbackPriority=2,t.callbackNode=null,2}function T0(t,e){if(He!==0&&He!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(pl()&&t.callbackNode!==n)return null;var i=Q;return i=ja(t,t===fe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(s0(t,i,e),S0(t,At()),t.callbackNode!=null&&t.callbackNode===n?T0.bind(null,t):null)}function bg(t,e){if(pl())return null;s0(t,e,!0)}function BC(){ex(function(){(ne&6)!==0?Hf(sy,zC):v0()})}function Ad(){if(ri===0){var t=qo;t===0&&(t=Yr,Yr<<=1,(Yr&261888)===0&&(Yr=256)),ri=t}return ri}function Rg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ca(""+t)}function Ng(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function $C(t,e,n,i,o){if(e==="submit"&&n&&n.stateNode===o){var s=Rg((o[mt]||null).action),r=i.submitter;r&&(e=(e=r[mt]||null)?Rg(e.formAction):r.getAttribute("formAction"),e!==null&&(s=e,r=null));var l=new el("action","action",null,i,o);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ri!==0){var u=r?Ng(o,r):new FormData(o);mf(n,{pending:!0,data:u,method:o.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=r?Ng(o,r):new FormData(o),mf(n,{pending:!0,data:u,method:o.method,action:s},s,u))},currentTarget:o}]})}}for(oa=0;oa<tf.length;oa++)sa=tf[oa],Mg=sa.toLowerCase(),Ig=sa[0].toUpperCase()+sa.slice(1),Xt(Mg,"on"+Ig);var sa,Mg,Ig,oa;Xt(ky,"onAnimationEnd");Xt(Dy,"onAnimationIteration");Xt(Uy,"onAnimationStart");Xt("dblclick","onDoubleClick");Xt("focusin","onFocus");Xt("focusout","onBlur");Xt(uC,"onTransitionRun");Xt(cC,"onTransitionStart");Xt(fC,"onTransitionCancel");Xt(Py,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ar));function E0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var r=i.length-1;0<=r;r--){var l=i[r],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==s&&o.isPropagationStopped())break e;s=l,o.currentTarget=f;try{s(o)}catch(d){Na(d)}o.currentTarget=null,s=u}else for(r=0;r<i.length;r++){if(l=i[r],u=l.instance,f=l.currentTarget,l=l.listener,u!==s&&o.isPropagationStopped())break e;s=l,o.currentTarget=f;try{s(o)}catch(d){Na(d)}o.currentTarget=null,s=u}}}}function J(t,e){var n=e[Jc];n===void 0&&(n=e[Jc]=new Set);var i=t+"__bubble";n.has(i)||(_0(e,t,2,!1),n.add(i))}function Pc(t,e,n){var i=0;e&&(i|=4),_0(n,t,i,e)}var ra="_reactListening"+Math.random().toString(36).slice(2);function Cd(t){if(!t[ra]){t[ra]=!0,py.forEach(function(n){n!=="selectionchange"&&(YC.has(n)||Pc(n,!1,t),Pc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ra]||(e[ra]=!0,Pc("selectionchange",!1,e))}}function _0(t,e,n,i){switch(P0(e)){case 2:var o=Tx;break;case 8:o=Ex;break;default:o=Rd}n=o.bind(null,e,n,t),o=void 0,!Wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Lc(t,e,n,i,o){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var l=i.stateNode.containerInfo;if(l===o)break;if(r===4)for(r=i.return;r!==null;){var u=r.tag;if((u===3||u===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;l!==null;){if(r=To(l),r===null)return;if(u=r.tag,u===5||u===6||u===26||u===27){i=s=r;continue e}l=l.parentNode}}i=i.return}Ey(function(){var f=s,d=Vf(n),p=[];e:{var m=Ly.get(t);if(m!==void 0){var h=el,y=t;switch(t){case"keypress":if(da(n)===0)break e;case"keydown":case"keyup":h=FA;break;case"focusin":y="focus",h=mc;break;case"focusout":y="blur",h=mc;break;case"beforeblur":case"afterblur":h=mc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=NA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=BA;break;case ky:case Dy:case Uy:h=kA;break;case Py:h=YA;break;case"scroll":case"scrollend":h=bA;break;case"wheel":h=KA;break;case"copy":case"cut":case"paste":h=UA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=qh;break;case"toggle":case"beforetoggle":h=QA}var E=(e&4)!==0,T=!E&&(t==="scroll"||t==="scrollend"),g=E?m!==null?m+"Capture":null:m;E=[];for(var v=f,S;v!==null;){var _=v;if(S=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||S===null||g===null||(_=js(v,g),_!=null&&E.push(lr(v,_,S))),T)break;v=v.return}0<E.length&&(m=new h(m,y,null,n,d),p.push({event:m,listeners:E}))}}if((e&7)===0){e:{if(m=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",m&&n!==Zc&&(y=n.relatedTarget||n.fromElement)&&(To(y)||y[Ko]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(y=n.relatedTarget||n.toElement,h=f,y=y?To(y):null,y!==null&&(T=dr(y),E=y.tag,y!==T||E!==5&&E!==27&&E!==6)&&(y=null)):(h=null,y=f),h!==y)){if(E=Gh,_="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=qh,_="onPointerLeave",g="onPointerEnter",v="pointer"),T=h==null?m:Ls(h),S=y==null?m:Ls(y),m=new E(_,v+"leave",h,n,d),m.target=T,m.relatedTarget=S,_=null,To(d)===f&&(E=new E(g,v+"enter",y,n,d),E.target=S,E.relatedTarget=T,_=E),T=_,h&&y)t:{for(E=JC,g=h,v=y,S=0,_=g;_;_=E(_))S++;_=0;for(var x=v;x;x=E(x))_++;for(;0<S-_;)g=E(g),S--;for(;0<_-S;)v=E(v),_--;for(;S--;){if(g===v||v!==null&&g===v.alternate){E=g;break t}g=E(g),v=E(v)}E=null}else E=null;h!==null&&kg(p,m,h,E,!1),y!==null&&T!==null&&kg(p,T,y,E,!0)}}e:{if(m=f?Ls(f):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var b=Bh;else if(zh(m))if(by)b=rC;else{b=oC;var A=iC}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?f&&Ff(f.elementType)&&(b=Bh):b=sC;if(b&&(b=b(t,f))){wy(p,b,n,d);break e}A&&A(t,m,f),t==="focusout"&&f&&m.type==="number"&&f.memoizedProps.value!=null&&Qc(m,"number",m.value)}switch(A=f?Ls(f):window,t){case"focusin":(zh(A)||A.contentEditable==="true")&&(Ao=A,jc=f,Fs=null);break;case"focusout":Fs=jc=Ao=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,Kh(p,n,d);break;case"selectionchange":if(lC)break;case"keydown":case"keyup":Kh(p,n,d)}var M;if($f)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else _o?Cy(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Ay&&n.locale!=="ko"&&(_o||R!=="onCompositionStart"?R==="onCompositionEnd"&&_o&&(M=_y()):(ii=d,zf="value"in ii?ii.value:ii.textContent,_o=!0)),A=Ya(f,R),0<A.length&&(R=new Oh(R,t,null,n,d),p.push({event:R,listeners:A}),M?R.data=M:(M=xy(n),M!==null&&(R.data=M)))),(M=WA?jA(t,n):eC(t,n))&&(R=Ya(f,"onBeforeInput"),0<R.length&&(A=new Oh("onBeforeInput","beforeinput",null,n,d),p.push({event:A,listeners:R}),A.data=M)),$C(p,t,f,n,d)}E0(p,e)})}function lr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ya(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=js(t,n),o!=null&&i.unshift(lr(t,o,s)),o=js(t,e),o!=null&&i.push(lr(t,o,s))),t.tag===3)return i;t=t.return}return[]}function JC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kg(t,e,n,i,o){for(var s=e._reactName,r=[];n!==null&&n!==i;){var l=n,u=l.alternate,f=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||f===null||(u=f,o?(f=js(n,s),f!=null&&r.unshift(lr(n,f,u))):o||(f=js(n,s),f!=null&&r.push(lr(n,f,u)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var KC=/\r\n?/g,XC=/\u0000|\uFFFD/g;function Dg(t){return(typeof t=="string"?t:""+t).replace(KC,`
`).replace(XC,"")}function A0(t,e){return e=Dg(e),Dg(t)===e}function ue(t,e,n,i,o,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Oo(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Oo(t,""+i);break;case"className":Xr(t,"class",i);break;case"tabIndex":Xr(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(t,n,i);break;case"style":Ty(t,i,s);break;case"data":if(e!=="object"){Xr(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=ca(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&ue(t,e,"name",o.name,o,null),ue(t,e,"formEncType",o.formEncType,o,null),ue(t,e,"formMethod",o.formMethod,o,null),ue(t,e,"formTarget",o.formTarget,o,null)):(ue(t,e,"encType",o.encType,o,null),ue(t,e,"method",o.method,o,null),ue(t,e,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=ca(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Rn);break;case"onScroll":i!=null&&J("scroll",t);break;case"onScrollEnd":i!=null&&J("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(C(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(C(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=ca(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":J("beforetoggle",t),J("toggle",t),ua(t,"popover",i);break;case"xlinkActuate":Tn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Tn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Tn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Tn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Tn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Tn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Tn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Tn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Tn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ua(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=xA.get(n)||n,ua(t,n,i))}}function xf(t,e,n,i,o,s){switch(n){case"style":Ty(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(C(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(C(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Oo(t,i):(typeof i=="number"||typeof i=="bigint")&&Oo(t,""+i);break;case"onScroll":i!=null&&J("scroll",t);break;case"onScrollEnd":i!=null&&J("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!my.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),s=t[mt]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,o),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,o);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):ua(t,n,i)}}}function Ze(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":J("error",t),J("load",t);var i=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(C(137,e));default:ue(t,e,s,r,n,null)}}o&&ue(t,e,"srcSet",n.srcSet,n,null),i&&ue(t,e,"src",n.src,n,null);return;case"input":J("invalid",t);var l=s=r=o=null,u=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":o=d;break;case"type":r=d;break;case"checked":u=d;break;case"defaultChecked":f=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(C(137,e));break;default:ue(t,e,i,d,n,null)}}yy(t,s,l,u,f,r,o,!1);return;case"select":J("invalid",t),i=r=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":r=l;break;case"multiple":i=l;default:ue(t,e,o,l,n,null)}e=s,n=r,t.multiple=!!i,e!=null?Io(t,!!i,e,!1):n!=null&&Io(t,!!i,n,!0);return;case"textarea":J("invalid",t),s=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":o=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(C(91));break;default:ue(t,e,r,l,n,null)}Sy(t,i,o,s);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ue(t,e,u,i,n,null)}return;case"dialog":J("beforetoggle",t),J("toggle",t),J("cancel",t),J("close",t);break;case"iframe":case"object":J("load",t);break;case"video":case"audio":for(i=0;i<ar.length;i++)J(ar[i],t);break;case"image":J("error",t),J("load",t);break;case"details":J("toggle",t);break;case"embed":case"source":case"link":J("error",t),J("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(C(137,e));default:ue(t,e,f,i,n,null)}return;default:if(Ff(e)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&xf(t,e,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&ue(t,e,l,i,n,null))}function QC(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,r=null,l=null,u=null,f=null,d=null;for(h in n){var p=n[h];if(n.hasOwnProperty(h)&&p!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(h)||ue(t,e,h,null,i,p)}}for(var m in i){var h=i[m];if(p=n[m],i.hasOwnProperty(m)&&(h!=null||p!=null))switch(m){case"type":s=h;break;case"name":o=h;break;case"checked":f=h;break;case"defaultChecked":d=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(C(137,e));break;default:h!==p&&ue(t,e,m,h,i,p)}}Xc(t,r,l,u,f,d,s,o);return;case"select":h=r=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":h=u;default:i.hasOwnProperty(s)||ue(t,e,s,null,i,u)}for(o in i)if(s=i[o],u=n[o],i.hasOwnProperty(o)&&(s!=null||u!=null))switch(o){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":r=s;default:s!==u&&ue(t,e,o,s,i,u)}e=l,n=r,i=h,m!=null?Io(t,!!n,m,!1):!!i!=!!n&&(e!=null?Io(t,!!n,e,!0):Io(t,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(o=n[l],n.hasOwnProperty(l)&&o!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ue(t,e,l,null,i,o)}for(r in i)if(o=i[r],s=n[r],i.hasOwnProperty(r)&&(o!=null||s!=null))switch(r){case"value":m=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(C(91));break;default:o!==s&&ue(t,e,r,o,i,s)}vy(t,m,h);return;case"option":for(var y in n)if(m=n[y],n.hasOwnProperty(y)&&m!=null&&!i.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:ue(t,e,y,null,i,m)}for(u in i)if(m=i[u],h=n[u],i.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ue(t,e,u,m,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in n)m=n[E],n.hasOwnProperty(E)&&m!=null&&!i.hasOwnProperty(E)&&ue(t,e,E,null,i,m);for(f in i)if(m=i[f],h=n[f],i.hasOwnProperty(f)&&m!==h&&(m!=null||h!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(C(137,e));break;default:ue(t,e,f,m,i,h)}return;default:if(Ff(e)){for(var T in n)m=n[T],n.hasOwnProperty(T)&&m!==void 0&&!i.hasOwnProperty(T)&&xf(t,e,T,void 0,i,m);for(d in i)m=i[d],h=n[d],!i.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||xf(t,e,d,m,i,h);return}}for(var g in n)m=n[g],n.hasOwnProperty(g)&&m!=null&&!i.hasOwnProperty(g)&&ue(t,e,g,null,i,m);for(p in i)m=i[p],h=n[p],!i.hasOwnProperty(p)||m===h||m==null&&h==null||ue(t,e,p,m,i,h)}function Ug(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],s=o.transferSize,r=o.initiatorType,l=o.duration;if(s&&l&&Ug(r)){for(r=0,l=o.responseEnd,i+=1;i<n.length;i++){var u=n[i],f=u.startTime;if(f>l)break;var d=u.transferSize,p=u.initiatorType;d&&Ug(p)&&(u=u.responseEnd,r+=d*(u<l?1:(l-f)/(u-f)))}if(--i,e+=8*(s+r)/(o.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var wf=null,bf=null;function Ja(t){return t.nodeType===9?t:t.ownerDocument}function Pg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C0(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Rf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hc=null;function WC(){var t=window.event;return t&&t.type==="popstate"?t===Hc?!1:(Hc=t,!0):(Hc=null,!1)}var x0=typeof setTimeout=="function"?setTimeout:void 0,jC=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(t){return Lg.resolve(null).then(t).catch(tx)}:x0;function tx(t){setTimeout(function(){throw t})}function Ei(t){return t==="head"}function Hg(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(o),Jo(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Zs(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Zs(n);for(var s=n.firstChild;s;){var r=s.nextSibling,l=s.nodeName;s[gr]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Zs(t.ownerDocument.body);n=o}while(n);Jo(e)}function Gg(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Nf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Nf(n),qf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function nx(t,e,n,i){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[gr])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=qt(t.nextSibling),t===null)break}return null}function ix(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=qt(t.nextSibling),t===null))return null;return t}function w0(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=qt(t.nextSibling),t===null))return null;return t}function Mf(t){return t.data==="$?"||t.data==="$~"}function If(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ox(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function qt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var kf=null;function Og(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return qt(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function qg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function b0(t,e,n){switch(e=Ja(n),t){case"html":if(t=e.documentElement,!t)throw Error(C(452));return t;case"head":if(t=e.head,!t)throw Error(C(453));return t;case"body":if(t=e.body,!t)throw Error(C(454));return t;default:throw Error(C(451))}}function Zs(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);qf(t)}var Ft=new Map,Fg=new Set;function Ka(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gn=ie.d;ie.d={f:sx,r:rx,D:ax,C:lx,L:ux,m:cx,X:dx,S:fx,M:px};function sx(){var t=Gn.f(),e=fl();return t||e}function rx(t){var e=Xo(t);e!==null&&e.tag===5&&e.type==="form"?Tv(e):Gn.r(t)}var jo=typeof document>"u"?null:document;function R0(t,e,n){var i=jo;if(i&&typeof e=="string"&&e){var o=Lt(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Fg.has(o)||(Fg.add(o),t={rel:t,crossOrigin:n,href:e},i.querySelector(o)===null&&(e=i.createElement("link"),Ze(e,"link",t),Ve(e),i.head.appendChild(e)))}}function ax(t){Gn.D(t),R0("dns-prefetch",t,null)}function lx(t,e){Gn.C(t,e),R0("preconnect",t,e)}function ux(t,e,n){Gn.L(t,e,n);var i=jo;if(i&&t&&e){var o='link[rel="preload"][as="'+Lt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Lt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Lt(n.imageSizes)+'"]')):o+='[href="'+Lt(t)+'"]';var s=o;switch(e){case"style":s=Yo(t);break;case"script":s=es(t)}Ft.has(s)||(t=ye({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Ft.set(s,t),i.querySelector(o)!==null||e==="style"&&i.querySelector(_r(s))||e==="script"&&i.querySelector(Ar(s))||(e=i.createElement("link"),Ze(e,"link",t),Ve(e),i.head.appendChild(e)))}}function cx(t,e){Gn.m(t,e);var n=jo;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+Lt(i)+'"][href="'+Lt(t)+'"]',s=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=es(t)}if(!Ft.has(s)&&(t=ye({rel:"modulepreload",href:t},e),Ft.set(s,t),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ar(s)))return}i=n.createElement("link"),Ze(i,"link",t),Ve(i),n.head.appendChild(i)}}}function fx(t,e,n){Gn.S(t,e,n);var i=jo;if(i&&t){var o=Mo(i).hoistableStyles,s=Yo(t);e=e||"default";var r=o.get(s);if(!r){var l={loading:0,preload:null};if(r=i.querySelector(_r(s)))l.loading=5;else{t=ye({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Ft.get(s))&&xd(t,n);var u=r=i.createElement("link");Ve(u),Ze(u,"link",t),u._p=new Promise(function(f,d){u.onload=f,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Ta(r,e,i)}r={type:"stylesheet",instance:r,count:1,state:l},o.set(s,r)}}}function dx(t,e){Gn.X(t,e);var n=jo;if(n&&t){var i=Mo(n).hoistableScripts,o=es(t),s=i.get(o);s||(s=n.querySelector(Ar(o)),s||(t=ye({src:t,async:!0},e),(e=Ft.get(o))&&wd(t,e),s=n.createElement("script"),Ve(s),Ze(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function px(t,e){Gn.M(t,e);var n=jo;if(n&&t){var i=Mo(n).hoistableScripts,o=es(t),s=i.get(o);s||(s=n.querySelector(Ar(o)),s||(t=ye({src:t,async:!0,type:"module"},e),(e=Ft.get(o))&&wd(t,e),s=n.createElement("script"),Ve(s),Ze(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function Vg(t,e,n,i){var o=(o=ai.current)?Ka(o):null;if(!o)throw Error(C(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Yo(n.href),n=Mo(o).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Yo(n.href);var s=Mo(o).hoistableStyles,r=s.get(t);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,r),(s=o.querySelector(_r(t)))&&!s._p&&(r.instance=s,r.state.loading=5),Ft.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ft.set(t,n),s||mx(o,t,n,r.state))),e&&i===null)throw Error(C(528,""));return r}if(e&&i!==null)throw Error(C(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=es(n),n=Mo(o).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(C(444,t))}}function Yo(t){return'href="'+Lt(t)+'"'}function _r(t){return'link[rel="stylesheet"]['+t+"]"}function N0(t){return ye({},t,{"data-precedence":t.precedence,precedence:null})}function mx(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Ze(e,"link",n),Ve(e),t.head.appendChild(e))}function es(t){return'[src="'+Lt(t)+'"]'}function Ar(t){return"script[async]"+t}function zg(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Lt(n.href)+'"]');if(i)return e.instance=i,Ve(i),i;var o=ye({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Ve(i),Ze(i,"style",o),Ta(i,n.precedence,t),e.instance=i;case"stylesheet":o=Yo(n.href);var s=t.querySelector(_r(o));if(s)return e.state.loading|=4,e.instance=s,Ve(s),s;i=N0(n),(o=Ft.get(o))&&xd(i,o),s=(t.ownerDocument||t).createElement("link"),Ve(s);var r=s;return r._p=new Promise(function(l,u){r.onload=l,r.onerror=u}),Ze(s,"link",i),e.state.loading|=4,Ta(s,n.precedence,t),e.instance=s;case"script":return s=es(n.src),(o=t.querySelector(Ar(s)))?(e.instance=o,Ve(o),o):(i=n,(o=Ft.get(s))&&(i=ye({},n),wd(i,o)),t=t.ownerDocument||t,o=t.createElement("script"),Ve(o),Ze(o,"link",i),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(C(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(i=e.instance,e.state.loading|=4,Ta(i,n.precedence,t));return e.instance}function Ta(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,s=o,r=0;r<i.length;r++){var l=i[r];if(l.dataset.precedence===e)s=l;else if(s!==o)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function xd(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function wd(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Ea=null;function Bg(t,e,n){if(Ea===null){var i=new Map,o=Ea=new Map;o.set(n,i)}else o=Ea,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var s=n[o];if(!(s[gr]||s[Ke]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(e)||"";r=t+r;var l=i.get(r);l?l.push(s):i.set(r,[s])}}return i}function $g(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function hx(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function M0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function gx(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=Yo(i.href),s=e.querySelector(_r(o));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Xa.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Ve(s);return}s=e.ownerDocument||e,i=N0(i),(o=Ft.get(o))&&xd(i,o),s=s.createElement("link"),Ve(s);var r=s;r._p=new Promise(function(l,u){r.onload=l,r.onerror=u}),Ze(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=Xa.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Gc=0;function yx(t,e){return t.stylesheets&&t.count===0&&_a(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&_a(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Gc===0&&(Gc=62500*ZC());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_a(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Gc?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function Xa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_a(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qa=null;function _a(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qa=new Map,e.forEach(vx,t),Qa=null,Xa.call(t))}function vx(t,e){if(!(e.state.loading&4)){var n=Qa.get(t);if(n)var i=n.get(null);else{n=new Map,Qa.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var r=o[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}o=e.instance,r=o.getAttribute("data-precedence"),s=n.get(r)||i,s===i&&n.set(null,o),n.set(r,o),this.count++,i=Xa.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),s?s.parentNode.insertBefore(o,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var ur={$$typeof:bn,Provider:null,Consumer:null,_currentValue:Ui,_currentValue2:Ui,_threadCount:0};function Sx(t,e,n,i,o,s,r,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cc(0),this.hiddenUpdates=cc(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function I0(t,e,n,i,o,s,r,l,u,f,d,p){return t=new Sx(t,e,n,r,u,f,d,p,l),e=1,s===!0&&(e|=24),s=Et(3,null,null,e),t.current=s,s.stateNode=t,e=Wf(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},td(s),t}function k0(t){return t?(t=wo,t):wo}function D0(t,e,n,i,o,s){o=k0(o),i.context===null?i.context=o:i.pendingContext=o,i=ui(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=ci(t,i,e),n!==null&&(pt(n,t,e),zs(n,t,e))}function Yg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bd(t,e){Yg(t,e),(t=t.alternate)&&Yg(t,e)}function U0(t){if(t.tag===13||t.tag===31){var e=Ji(t,67108864);e!==null&&pt(e,t,67108864),bd(t,67108864)}}function Jg(t){if(t.tag===13||t.tag===31){var e=wt();e=Gf(e);var n=Ji(t,e);n!==null&&pt(n,t,e),bd(t,e)}}var Za=!0;function Tx(t,e,n,i){var o=L.T;L.T=null;var s=ie.p;try{ie.p=2,Rd(t,e,n,i)}finally{ie.p=s,L.T=o}}function Ex(t,e,n,i){var o=L.T;L.T=null;var s=ie.p;try{ie.p=8,Rd(t,e,n,i)}finally{ie.p=s,L.T=o}}function Rd(t,e,n,i){if(Za){var o=Df(i);if(o===null)Lc(t,e,i,Wa,n),Kg(t,i);else if(Ax(o,t,e,n,i))i.stopPropagation();else if(Kg(t,i),e&4&&-1<_x.indexOf(t)){for(;o!==null;){var s=Xo(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=Ii(s.pendingLanes);if(r!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var u=1<<31-xt(r);l.entanglements[1]|=u,r&=~u}hn(s),(ne&6)===0&&(Fa=At()+500,Er(0,!1))}}break;case 31:case 13:l=Ji(s,2),l!==null&&pt(l,s,2),fl(),bd(s,2)}if(s=Df(i),s===null&&Lc(t,e,i,Wa,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else Lc(t,e,i,null,n)}}function Df(t){return t=Vf(t),Nd(t)}var Wa=null;function Nd(t){if(Wa=null,t=To(t),t!==null){var e=dr(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=ey(e),t!==null)return t;t=null}else if(n===31){if(t=ty(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Wa=t,null}function P0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(uA()){case sy:return 2;case ry:return 8;case ba:case cA:return 32;case ay:return 268435456;default:return 32}default:return 32}}var Uf=!1,pi=null,mi=null,hi=null,cr=new Map,fr=new Map,ti=[],_x="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kg(t,e){switch(t){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":cr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(e.pointerId)}}function ks(t,e,n,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Xo(e),e!==null&&U0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Ax(t,e,n,i,o){switch(e){case"focusin":return pi=ks(pi,t,e,n,i,o),!0;case"dragenter":return mi=ks(mi,t,e,n,i,o),!0;case"mouseover":return hi=ks(hi,t,e,n,i,o),!0;case"pointerover":var s=o.pointerId;return cr.set(s,ks(cr.get(s)||null,t,e,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,fr.set(s,ks(fr.get(s)||null,t,e,n,i,o)),!0}return!1}function L0(t){var e=To(t.target);if(e!==null){var n=dr(e);if(n!==null){if(e=n.tag,e===13){if(e=ey(n),e!==null){t.blockedOn=e,Ih(t.priority,function(){Jg(n)});return}}else if(e===31){if(e=ty(n),e!==null){t.blockedOn=e,Ih(t.priority,function(){Jg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Aa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Df(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Zc=i,n.target.dispatchEvent(i),Zc=null}else return e=Xo(n),e!==null&&U0(e),t.blockedOn=n,!1;e.shift()}return!0}function Xg(t,e,n){Aa(t)&&n.delete(e)}function Cx(){Uf=!1,pi!==null&&Aa(pi)&&(pi=null),mi!==null&&Aa(mi)&&(mi=null),hi!==null&&Aa(hi)&&(hi=null),cr.forEach(Xg),fr.forEach(Xg)}function aa(t,e){t.blockedOn===e&&(t.blockedOn=null,Uf||(Uf=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,Cx)))}var la=null;function Qg(t){la!==t&&(la=t,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,function(){la===t&&(la=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],o=t[e+2];if(typeof i!="function"){if(Nd(i||n)===null)continue;break}var s=Xo(n);s!==null&&(t.splice(e,3),e-=3,mf(s,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Jo(t){function e(u){return aa(u,t)}pi!==null&&aa(pi,t),mi!==null&&aa(mi,t),hi!==null&&aa(hi,t),cr.forEach(e),fr.forEach(e);for(var n=0;n<ti.length;n++){var i=ti[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)L0(n),n.blockedOn===null&&ti.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],s=n[i+1],r=o[mt]||null;if(typeof s=="function")r||Qg(n);else if(r){var l=null;if(s&&s.hasAttribute("formAction")){if(o=s,r=s[mt]||null)l=r.formAction;else if(Nd(o)!==null)continue}else l=r.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Qg(n)}}}function H0(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function e(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),o!==null&&(o(),o=null)}}}function Md(t){this._internalRoot=t}ml.prototype.render=Md.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));var n=e.current,i=wt();D0(n,i,t,e,null,null)};ml.prototype.unmount=Md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;D0(t.current,2,null,t,null,null),fl(),e[Ko]=null}};function ml(t){this._internalRoot=t}ml.prototype.unstable_scheduleHydration=function(t){if(t){var e=dy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&L0(t)}};var Zg=Wg.version;if(Zg!=="19.2.3")throw Error(C(527,Zg,"19.2.3"));ie.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=nA(e),t=t!==null?ny(t):null,t=t===null?null:t.stateNode,t};var xx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Ds=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Ds.isDisabled&&Ds.supportsFiber))try{pr=Ds.inject(xx),Ct=Ds}catch{}var Ds;hl.createRoot=function(t,e){if(!jg(t))throw Error(C(299));var n=!1,i="",o=Rv,s=Nv,r=Mv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=I0(t,1,!1,null,null,n,i,null,o,s,r,H0),t[Ko]=e.current,Cd(t),new Md(e)};hl.hydrateRoot=function(t,e,n){if(!jg(t))throw Error(C(299));var i=!1,o="",s=Rv,r=Nv,l=Mv,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=I0(t,1,!0,e,n??null,i,o,u,s,r,l,H0),e.context=k0(null),n=e.current,i=wt(),i=Gf(i),o=ui(i),o.callback=null,ci(n,o,i),n=i,e.current.lanes=n,hr(e,n),hn(e),t[Ko]=e.current,Cd(t),new ml(e)};hl.version="19.2.3"});var F0=ln((sU,q0)=>{"use strict";function O0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O0)}catch(t){console.error(t)}}O0(),q0.exports=G0()});var V0,z0,yl,gl,B0,Id,kd,$0,Y0,J0,K0=_s(()=>{V0="hermes_os_settings",z0="hermes_os_chat_history",yl=new Map,gl=null,B0=t=>{try{let e={...t};gl=e,yl.set(V0,JSON.stringify(e))}catch(e){console.error("Failed to save settings",e)}return Promise.resolve()},Id=()=>{if(gl)return gl;let t=yl.get(V0);if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Failed to load settings",e),null}},kd=()=>Promise.resolve(Id()),$0=()=>(gl=null,kd()),Y0=t=>{try{yl.set(z0,JSON.stringify(t))}catch(e){console.error("Failed to save chat history",e)}return Promise.resolve()},J0=()=>{let t=yl.get(z0);if(!t)return[];try{return JSON.parse(t)}catch(e){return console.error("Failed to load chat history",e),[]}}});var yn,gn,X0,Q0,Z0,W0,Dd,j0,eS,tS,nS=_s(()=>{yn=null,gn=null,X0=t=>{yn=t},Q0=()=>yn,Z0=async t=>{try{let e={...t};gn=e,yn&&await yn.saveData(e)}catch(e){console.error("Failed to save settings",e)}},W0=()=>gn||null,Dd=async()=>{if(yn)try{gn=await yn.loadData()||{};let e=yn.settings;return e&&(gn={...gn,...e}),gn}catch(t){return console.error("Failed to load settings from Obsidian",t),null}return null},j0=async()=>(gn=null,await Dd()),eS=async t=>{try{if(yn){let n={...await yn.loadData()||{},chatHistory:t};await yn.saveData(n)}}catch(e){console.error("Failed to save chat history",e)}},tS=()=>gn?.chatHistory?gn.chatHistory:[]});var Xi,iS,oS,vl,tt,sS,Sl,rS,Tl,Qt=_s(()=>{K0();nS();Xi=!1,iS=t=>{Xi=!0,X0(t)},oS=()=>Q0(),vl=async t=>Xi?Z0(t):B0(t),tt=()=>Xi?W0():Id(),sS=async()=>Xi?Dd():kd(),Sl=async()=>Xi?j0():$0(),rS=async t=>Xi?eS(t):Y0(t),Tl=()=>Xi?tS():J0()});function ve(){return oS()?.app??null}function Nt(){return ve()!==null}async function Be(t,e={}){if(!Nt())return!1;try{let n=ve();if(!n)return!1;let i=n.vault.getAbstractFileByPath(t);if(!i||!(i instanceof El.TFile))return console.warn(`File not found: ${t}`),!1;let{newWindow:o=!1,split:s=!1}=e,r=n.workspace;if(!o&&!s){let u=r.getLeavesOfType("markdown").find(f=>f.view instanceof El.MarkdownView&&f.view.file?.path===t);if(u)return r.setActiveLeaf(u,{focus:!0}),!0}let l;return s?l=r.getLeaf("split"):o?l=r.getLeaf(!0):l=r.getLeaf(!1),await l.openFile(i),!0}catch(n){return console.warn("Failed to open file in Obsidian:",n),!1}}function Oe(t){if(!t||typeof t!="string")return"/";let e=t.startsWith("/")?t.slice(1):t,n=e.lastIndexOf("/");if(n===-1)return"/";let i=e.substring(0,n);return i.startsWith("/")?i:`/${i}/`}var El,Se=_s(()=>{El=require("obsidian");Qt()});var lS={};se(lS,{createBinaryFile:()=>Gd,createDirectory:()=>zd,createFile:()=>Od,deleteFile:()=>Bd,editFile:()=>Vd,getDirectoryList:()=>Hd,getFolderTree:()=>Ld,getVaultFiles:()=>Pd,initFileSystem:()=>Ud,listDirectory:()=>On,moveFile:()=>Fd,readFile:()=>gt,renameFile:()=>qd,searchFiles:()=>Cr,updateFile:()=>_i});var aS,Vt,Ud,On,Pd,Ld,Hd,gt,Gd,Od,_i,qd,Fd,Vd,zd,Bd,Cr,Ue=_s(()=>{Qt();Se();aS=t=>"children"in t,Vt=()=>{let t=ve();if(!t)throw new Error("Obsidian app not available");return t},Ud=async()=>{},On=()=>Vt().vault.getMarkdownFiles().map(n=>n.path).filter(n=>!n.startsWith("chat history/trash/")),Pd=t=>{let{limit:e=20,offset:n=0,sortBy:i="mtime",sortOrder:o="desc",filter:s}=t,l=Vt().vault.getMarkdownFiles().filter(d=>!d.path.startsWith("chat history/trash/")).map(d=>({path:d.path,name:d.name,mtime:d.stat.mtime,size:d.stat.size}));if(s){let d=s.toLowerCase();l=l.filter(p=>p.path.toLowerCase().includes(d)||p.name.toLowerCase().includes(d))}l.sort((d,p)=>{let m=d[i],h=p[i];return typeof m=="string"&&typeof h=="string"&&(m=m.toLowerCase(),h=h.toLowerCase()),m<h?o==="asc"?-1:1:m>h?o==="asc"?1:-1:0});let u=l.length,f=l.slice(n,n+e);return Promise.resolve({files:f,total:u})},Ld=()=>Vt().vault.getAllLoadedFiles().filter(n=>aS(n)&&n.path!=="chat history/trash").map(n=>n.path).sort(),Hd=()=>Vt().vault.getAllLoadedFiles().filter(n=>aS(n)&&n.path!=="chat history/trash").map(n=>({path:n.path,children:[]})),gt=async t=>{let e=Vt(),n=e.vault.getAbstractFileByPath(t);if(!n)throw new Error(`File not found in vault: ${t}`);return await e.vault.read(n)},Gd=async(t,e)=>{let n=Vt(),i=t.substring(0,t.lastIndexOf("/"));i&&i.length>0&&(await n.vault.adapter.exists(i)||await n.vault.createFolder(i));let o=e instanceof Uint8Array?e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength):e;return await n.vault.adapter.writeBinary(t,o),`Created binary file ${t} in vault`},Od=async(t,e)=>{let n=Vt(),i=t.substring(0,t.lastIndexOf("/"));return i&&i.length>0&&(n.vault.getAbstractFileByPath(i)||await n.vault.createFolder(i)),await n.vault.create(t,e),`Created ${t} in vault`},_i=async(t,e)=>{let n=Vt(),i=n.vault.getAbstractFileByPath(t);if(!i)throw new Error(`File not found: ${t}`);return await n.vault.modify(i,e),`Updated ${t} in vault`},qd=async(t,e)=>{let n=Vt(),i=n.vault.getAbstractFileByPath(t);if(!i)throw new Error(`File not found: ${t}`);return await n.fileManager.renameFile(i,e),`Renamed ${t} to ${e} in vault`},Fd=async(t,e)=>{let n=Vt(),i=n.vault.getAbstractFileByPath(t);if(!i)throw new Error(`Source file not found: ${t}`);if(n.vault.getAbstractFileByPath(e))throw new Error(`Target file already exists: ${e}`);return await n.fileManager.renameFile(i,e),`Moved ${t} to ${e} in vault`},Vd=async(t,e,n,i)=>{let s=(await gt(t)).split(`
`);if(e==="append")s.push(n||"");else if(e==="replace_line"){if(i===void 0||i<1||i>s.length)throw new Error(`Invalid line number: ${i}`);s[i-1]=n||""}else if(e==="remove_line"){if(i===void 0||i<1||i>s.length)throw new Error(`Invalid line number: ${i}`);s.splice(i-1,1)}else throw new Error(`Unknown operation: ${e}`);let r=s.join(`
`);return await _i(t,r),`Successfully performed ${e} on ${t}`},zd=async t=>{let e=Vt();if(e.vault.getAbstractFileByPath(t))return`Directory ${t} already exists`;let i=t.substring(0,t.lastIndexOf("/"));return i&&i.length>0&&(e.vault.getAbstractFileByPath(i)||await e.vault.createFolder(i)),await e.vault.createFolder(t),`Created directory ${t} in vault`},Bd=async t=>{let e=Vt(),n=e.vault.getAbstractFileByPath(t);if(!n)throw new Error(`File not found: ${t}`);let s=`${tt()?.chatHistoryFolder||"chat-history"}/trash`;e.vault.getAbstractFileByPath(s)||await e.vault.createFolder(s);let l=new Date().toISOString().replace(/[:.]/g,"-"),u=t.split("/").pop()||t,f=`${s}/${l}-${u}`;return await e.fileManager.renameFile(n,f),`Moved ${t} to trash`},Cr=async(t,e=!1,n="i")=>{let i=On(),o=[],s=e?new RegExp(t,n):null,r=e?"":t.toLowerCase();for(let l of i){let f=(await gt(l)).split(`
`),d=[];f.forEach((p,m)=>{let h=!1;e&&s?h=s.test(p):h=p.toLowerCase().includes(r),h&&d.push({line:m+1,content:p,contextBefore:f.slice(Math.max(0,m-2),m),contextAfter:f.slice(m+1,Math.min(f.length,m+3))})}),d.length>0&&o.push({filename:l,matches:d})}return o}});var HE=ln(Ru=>{"use strict";var Vk=Symbol.for("react.transitional.element"),zk=Symbol.for("react.fragment");function LE(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var o in e)o!=="key"&&(n[o]=e[o])}else n=e;return e=n.ref,{$$typeof:Vk,type:t,key:i,ref:e!==void 0?e:null,props:n}}Ru.Fragment=zk;Ru.jsx=LE;Ru.jsxs=LE});var oe=ln((X2,GE)=>{"use strict";GE.exports=HE()});var XD={};se(XD,{default:()=>qu});module.exports=U_(XD);var S_=require("obsidian");var $m=Y(Yt()),y_=require("obsidian"),v_=Y(F0());var H=Y(Yt());Ue();Qt();var Rx,Nx;function Mx(){return{geminiUrl:Rx,vertexUrl:Nx}}function Ix(t,e,n,i){var o,s;if(!t?.baseUrl){let r=Mx();return e?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}var jt=class{};function D(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function c(t,e,n){for(let s=0;s<e.length-1;s++){let r=e[s];if(r.endsWith("[]")){let l=r.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[l])){let u=t[l];if(Array.isArray(n))for(let f=0;f<u.length;f++){let d=u[f];c(d,e.slice(s+1),n[f])}else for(let f of u)c(f,e.slice(s+1),n)}return}else if(r.endsWith("[0]")){let l=r.slice(0,-3);l in t||(t[l]=[{}]);let u=t[l];c(u[0],e.slice(s+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}let i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;let o=e[i];if(o.endsWith("[]")){let s=o.slice(0,-2);if(s in t){let r=t[s];return Array.isArray(r)?r.map(l=>a(l,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function kx(t,e){for(let[n,i]of Object.entries(e)){let o=n.split("."),s=i.split("."),r=new Set,l=-1;for(let u=0;u<o.length;u++)if(o[u]==="*"){l=u;break}if(l!==-1&&s.length>l)for(let u=l;u<s.length;u++){let f=s[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&r.add(f)}Jd(t,o,s,0,r)}}function Jd(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;let s=e[i];if(s.endsWith("[]")){let r=s.slice(0,-2),l=t;if(r in l&&Array.isArray(l[r]))for(let u of l[r])Jd(u,e,n,i+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let r=t,l=Object.keys(r).filter(f=>!f.startsWith("_")&&!o.has(f)),u={};for(let f of l)u[f]=r[f];for(let[f,d]of Object.entries(u)){let p=[];for(let m of n.slice(i))m==="*"?p.push(f):p.push(m);c(r,p,d)}for(let f of l)delete r[f]}}else{let r=t;s in r&&Jd(r[s],e,n,i+1,o)}}function Fp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Dx(t){let e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);let i=a(t,["resourceName"]);return i!=null&&c(e,["_url","resourceName"],i),e}function Ux(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response","generateVideoResponse"]);return r!=null&&c(e,["response"],Lx(r)),e}function Px(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],Hx(r)),e}function Lx(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Gx(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function Hx(t){let e={},n=a(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Ox(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function Gx(t){let e={},n=a(t,["video"]);return n!=null&&c(e,["video"],$x(n)),e}function Ox(t){let e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],Yx(n)),e}function qx(t){let e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function Fx(t){let e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function Vx(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],zx(r)),e}function zx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["parent"]);i!=null&&c(e,["parent"],i);let o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function kT(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],Bx(r)),e}function Bx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["parent"]);i!=null&&c(e,["parent"],i);let o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function $x(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let i=a(t,["encodedVideo"]);i!=null&&c(e,["videoBytes"],Fp(i));let o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function Yx(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);let i=a(t,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Fp(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}var uS;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(uS||(uS={}));var cS;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(cS||(cS={}));var fS;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(fS||(fS={}));var N;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(N||(N={}));var dS;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dS||(dS={}));var pS;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(pS||(pS={}));var mS;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(mS||(mS={}));var hS;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(hS||(hS={}));var gS;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(gS||(gS={}));var yS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yS||(yS={}));var vS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(vS||(vS={}));var SS;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(SS||(SS={}));var TS;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(TS||(TS={}));var ES;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ES||(ES={}));var _S;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(_S||(_S={}));var AS;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(AS||(AS={}));var CS;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(CS||(CS={}));var xS;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xS||(xS={}));var wS;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(wS||(wS={}));var bS;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(bS||(bS={}));var RS;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(RS||(RS={}));var ss;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ss||(ss={}));var NS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(NS||(NS={}));var MS;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(MS||(MS={}));var IS;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(IS||(IS={}));var Kd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Kd||(Kd={}));var kS;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kS||(kS={}));var DS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(DS||(DS={}));var Xd;(function(t){t.COLLECTION="COLLECTION"})(Xd||(Xd={}));var US;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(US||(US={}));var PS;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PS||(PS={}));var LS;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(LS||(LS={}));var HS;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(HS||(HS={}));var GS;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(GS||(GS={}));var OS;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(OS||(OS={}));var qS;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qS||(qS={}));var FS;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(FS||(FS={}));var VS;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VS||(VS={}));var zS;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(zS||(zS={}));var BS;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(BS||(BS={}));var $S;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})($S||($S={}));var YS;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(YS||(YS={}));var JS;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(JS||(JS={}));var KS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(KS||(KS={}));var XS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(XS||(XS={}));var QS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(QS||(QS={}));var ZS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ZS||(ZS={}));var WS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(WS||(WS={}));var jS;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(jS||(jS={}));var eT;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(eT||(eT={}));var tT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tT||(tT={}));var nT;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nT||(nT={}));var iT;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(iT||(iT={}));var oT;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oT||(oT={}));var sT;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sT||(sT={}));var rT;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(rT||(rT={}));var ns;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ns||(ns={}));var br=class{constructor(e){let n={};for(let i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var Zi=class{get text(){var e,n,i,o,s,r,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1,p=[];for(let m of(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(let[h,y]of Object.entries(m))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,f+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get data(){var e,n,i,o,s,r,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="",d=[];for(let p of(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(let[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,o,s,r,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let f=(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(f?.length!==0)return f}get executableCode(){var e,n,i,o,s,r,l,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,o,s,r,l,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.output}},Nl=class{},Ml=class{},Qd=class{},Zd=class{},Wd=class{},jd=class{},Il=class{},kl=class{},Dl=class{},ep=class{};var rs=class{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new rs,o,s=e;return n?o=Px(s):o=Ux(s),Object.assign(i,o),i}},Ul=class{},Pl=class{},Ll=class{},Hl=class{},tp=class{},np=class{},ip=class{};var Rr=class{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new Rr,s=Vx(e);return Object.assign(i,s),i}},op=class{},sp=class{},rp=class{};var Gl=class{};var ap=class{get text(){var e,n,i;let o="",s=!1,r=[];for(let l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[u,f]of Object.entries(l))u!=="text"&&u!=="thought"&&f!==null&&r.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,o+=l.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,i;let o="",s=[];for(let r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[l,u]of Object.entries(r))l!=="inlineData"&&u!==null&&s.push(l);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var lp=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Nr=class{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new Nr,s=kT(e);return Object.assign(i,s),i}};function j(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function DT(t,e){let n=j(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function UT(t){return Array.isArray(t)?t.map(e=>Ol(e)):[Ol(t)]}function Ol(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function PT(t){let e=Ol(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LT(t){let e=Ol(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function HT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>aT(e)):[aT(t)]}function up(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function lT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function uT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function nt(t){if(t==null)throw new Error("ContentUnion is required");return up(t)?t:{role:"user",parts:HT(t)}}function Vp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let i=nt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){let n=nt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>nt(n)):[nt(e)]}function zt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(lT(t)||uT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nt(t)]}let e=[],n=[],i=up(t[0]);for(let o of t){let s=up(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(lT(o)||uT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:HT(n)}),e}function Jx(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(N).includes(n[0].toUpperCase())?n[0].toUpperCase():N.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of n)e.anyOf.push({type:Object.values(N).includes(i.toUpperCase())?i.toUpperCase():N.TYPE_UNSPECIFIED})}}function is(t){let e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Jx(t.type,e);for(let[r,l]of Object.entries(t))if(l!=null)if(r=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(N).includes(l.toUpperCase())?l.toUpperCase():N.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=is(l);else if(i.includes(r)){let u=[];for(let f of l){if(f.type=="null"){e.nullable=!0;continue}u.push(is(f))}e[r]=u}else if(o.includes(r)){let u={};for(let[f,d]of Object.entries(l))u[f]=is(d);e[r]=u}else{if(r==="additionalProperties")continue;e[r]=l}return e}function zp(t){return is(t)}function Bp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function $p(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function cs(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=is(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=is(e.response));return t}function fs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function Kx(t,e,n,i=1){let o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Vn(t,e){if(typeof e!="string")throw new Error("name must be a string");return Kx(t,e,"cachedContents")}function GT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ci(t){return Fp(t)}function Xx(t){return t!=null&&typeof t=="object"&&"name"in t}function Qx(t){return t!=null&&typeof t=="object"&&"video"in t}function Zx(t){return t!=null&&typeof t=="object"&&"uri"in t}function OT(t){var e;let n;if(Xx(t)&&(n=t.name),!(Zx(t)&&(n=t.uri,n===void 0))&&!(Qx(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function qT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function FT(t){for(let e of["models","tunedModels","publisherModels"])if(Wx(t,e))return t[e];return[]}function Wx(t,e){return t!==null&&typeof t=="object"&&e in t}function jx(t,e={}){let n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function ew(t,e={}){let n=[],i=new Set;for(let o of t){let s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);let r=jx(o,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function VT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function tw(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zT(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(let r of o){if(typeof r!="object"||r===null)continue;let u=r.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ds(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function BT(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function nw(t){let e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);let i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Lw(r))),c(e,["inlinedResponses"],s)}let o=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["inlinedEmbedContentResponses"],s)}return e}function iw(t){let e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);let i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&c(e,["gcsUri"],i);let o=a(t,["bigqueryDestination","outputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function ow(t){let e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);let i=a(t,["gcsUri"]);i!=null&&c(e,["gcsDestination","outputUriPrefix"],i);let o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigqueryDestination","outputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function bl(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata","displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["metadata","state"]);o!=null&&c(e,["state"],BT(o));let s=a(t,["metadata","createTime"]);s!=null&&c(e,["createTime"],s);let r=a(t,["metadata","endTime"]);r!=null&&c(e,["endTime"],r);let l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);let u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);let f=a(t,["metadata","output"]);return f!=null&&c(e,["dest"],nw(zT(f))),e}function cp(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["state"]);o!=null&&c(e,["state"],BT(o));let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);let l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);let u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);let f=a(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);let d=a(t,["model"]);d!=null&&c(e,["model"],d);let p=a(t,["inputConfig"]);p!=null&&c(e,["src"],sw(p));let m=a(t,["outputConfig"]);m!=null&&c(e,["dest"],iw(zT(m)));let h=a(t,["completionStats"]);return h!=null&&c(e,["completionStats"],h),e}function sw(t){let e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);let i=a(t,["gcsSource","uris"]);i!=null&&c(e,["gcsUri"],i);let o=a(t,["bigquerySource","inputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function rw(t,e){let n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=a(e,["fileName"]);i!=null&&c(n,["fileName"],i);let o=a(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Pw(t,r))),c(n,["requests","requests"],s)}return n}function aw(t){let e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);let i=a(t,["gcsUri"]);i!=null&&c(e,["gcsSource","uris"],i);let o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigquerySource","inputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function lw(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function uw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],ds(t,i)),n}function cw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],ds(t,i)),n}function fw(t){let e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);let i=a(t,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],dw(i));let o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);let s=a(t,["finishReason"]);s!=null&&c(e,["finishReason"],s);let r=a(t,["avgLogprobs"]);r!=null&&c(e,["avgLogprobs"],r);let l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);let u=a(t,["index"]);u!=null&&c(e,["index"],u);let f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);let d=a(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),c(e,["safetyRatings"],m)}let p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function dw(t){let e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["citations"],i)}return e}function $T(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>zw(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function pw(t,e){let n={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&c(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function mw(t,e){let n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);let o=a(t,["dest"]);return e!==void 0&&o!=null&&c(e,["outputConfig"],ow(tw(o))),n}function cT(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],rw(t,VT(t,o)));let s=a(e,["config"]);return s!=null&&pw(s,n),n}function hw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["model"],j(t,i));let o=a(e,["src"]);o!=null&&c(n,["inputConfig"],aw(VT(t,o)));let s=a(e,["config"]);return s!=null&&mw(s,n),n}function gw(t,e){let n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&c(e,["batch","displayName"],i),n}function yw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],Cw(t,o));let s=a(e,["config"]);return s!=null&&gw(s,n),n}function vw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],ds(t,i)),n}function Sw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],ds(t,i)),n}function Tw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);return s!=null&&c(e,["error"],s),e}function Ew(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);return s!=null&&c(e,["error"],s),e}function _w(t,e){let n={},i=a(e,["contents"]);if(i!=null){let s=Vp(t,i);Array.isArray(s)&&(s=s.map(r=>r)),c(n,["requests[]","request","content"],s)}let o=a(e,["config"]);return o!=null&&(c(n,["_self"],Aw(o,n)),kx(n,{"requests[].*":"requests[].request.*"})),n}function Aw(t,e){let n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);let o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);let s=a(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&c(e,["requests[]","outputDimensionality"],s),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Cw(t,e){let n={},i=a(e,["fileName"]);i!=null&&c(n,["file_name"],i);let o=a(e,["inlinedRequests"]);return o!=null&&c(n,["requests"],_w(t,o)),n}function xw(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function ww(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bw(t){let e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);let i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Rw(t,e,n){let i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],$T(nt(o)));let s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);let r=a(e,["topP"]);r!=null&&c(i,["topP"],r);let l=a(e,["topK"]);l!=null&&c(i,["topK"],l);let u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);let f=a(e,["maxOutputTokens"]);f!=null&&c(i,["maxOutputTokens"],f);let d=a(e,["stopSequences"]);d!=null&&c(i,["stopSequences"],d);let p=a(e,["responseLogprobs"]);p!=null&&c(i,["responseLogprobs"],p);let m=a(e,["logprobs"]);m!=null&&c(i,["logprobs"],m);let h=a(e,["presencePenalty"]);h!=null&&c(i,["presencePenalty"],h);let y=a(e,["frequencyPenalty"]);y!=null&&c(i,["frequencyPenalty"],y);let E=a(e,["seed"]);E!=null&&c(i,["seed"],E);let T=a(e,["responseMimeType"]);T!=null&&c(i,["responseMimeType"],T);let g=a(e,["responseSchema"]);g!=null&&c(i,["responseSchema"],zp(g));let v=a(e,["responseJsonSchema"]);if(v!=null&&c(i,["responseJsonSchema"],v),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let S=a(e,["safetySettings"]);if(n!==void 0&&S!=null){let z=S;Array.isArray(z)&&(z=z.map(Ee=>Bw(Ee))),c(n,["safetySettings"],z)}let _=a(e,["tools"]);if(n!==void 0&&_!=null){let z=fs(_);Array.isArray(z)&&(z=z.map(Ee=>Yw(cs(Ee)))),c(n,["tools"],z)}let x=a(e,["toolConfig"]);if(n!==void 0&&x!=null&&c(n,["toolConfig"],$w(x)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let b=a(e,["cachedContent"]);n!==void 0&&b!=null&&c(n,["cachedContent"],Vn(t,b));let A=a(e,["responseModalities"]);A!=null&&c(i,["responseModalities"],A);let M=a(e,["mediaResolution"]);M!=null&&c(i,["mediaResolution"],M);let R=a(e,["speechConfig"]);if(R!=null&&c(i,["speechConfig"],Bp(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let I=a(e,["thinkingConfig"]);I!=null&&c(i,["thinkingConfig"],I);let k=a(e,["imageConfig"]);k!=null&&c(i,["imageConfig"],Uw(k));let X=a(e,["enableEnhancedCivicAnswers"]);if(X!=null&&c(i,["enableEnhancedCivicAnswers"],X),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Nw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>fw(f))),c(e,["candidates"],u)}let o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);let s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);let r=a(t,["responseId"]);r!=null&&c(e,["responseId"],r);let l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function Mw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],ds(t,i)),n}function Iw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],ds(t,i)),n}function kw(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Dw(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Uw(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let i=a(t,["imageSize"]);if(i!=null&&c(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Pw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["request","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let l=zt(o);Array.isArray(l)&&(l=l.map(u=>$T(u))),c(n,["request","contents"],l)}let s=a(e,["metadata"]);s!=null&&c(n,["metadata"],s);let r=a(e,["config"]);return r!=null&&c(n,["request","generationConfig"],Rw(t,r,a(n,["request"],{}))),n}function Lw(t){let e={},n=a(t,["response"]);n!=null&&c(e,["response"],Nw(n));let i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function Hw(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);if(e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Gw(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);let s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),n}function Ow(t){let e={},n=a(t,["config"]);return n!=null&&Hw(n,e),e}function qw(t){let e={},n=a(t,["config"]);return n!=null&&Gw(n,e),e}function Fw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>bl(r))),c(e,["batchJobs"],s)}return e}function Vw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>cp(r))),c(e,["batchJobs"],s)}return e}function zw(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],xw(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],ww(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],lw(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function Bw(t){let e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=a(t,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function $w(t){let e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);let i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],bw(i)),e}function Yw(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],kw(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],Dw(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}var qn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(qn||(qn={}));var Fn=class{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var fp=class extends jt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fn(qn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=cT(this.apiClient,e),i=n._url,o=D("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,u=l.requests,f=[];for(let d of u){let p=Object.assign({},d);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let h=p.request;h.systemInstruction=m,p.request=h}f.push(p)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let s=this.getGcsUri(e),r=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=hw(this.apiClient,e);return l=D("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>cp(d))}else{let f=cT(this.apiClient,e);return l=D("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>bl(d))}}async createEmbeddingsInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=yw(this.apiClient,e);return s=D("{model}:asyncBatchEmbedContent",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>bl(u))}}async get(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Iw(this.apiClient,e);return l=D("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>cp(d))}else{let f=Mw(this.apiClient,e);return l=D("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>bl(d))}}async cancel(e){var n,i,o,s;let r="",l={};if(this.apiClient.isVertexAI()){let u=cw(this.apiClient,e);r=D("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let u=uw(this.apiClient,e);r=D("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=qw(e);return l=D("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Vw(d),m=new Gl;return Object.assign(m,p),m})}else{let f=Ow(e);return l=D("batches",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Fw(d),m=new Gl;return Object.assign(m,p),m})}}async delete(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Sw(this.apiClient,e);return l=D("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>Ew(d))}else{let f=vw(this.apiClient,e);return l=D("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>Tw(d))}}};function Jw(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function fT(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>gb(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function Kw(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);let s=a(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);let r=a(t,["contents"]);if(e!==void 0&&r!=null){let d=zt(r);Array.isArray(d)&&(d=d.map(p=>fT(p))),c(e,["contents"],d)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],fT(nt(l)));let u=a(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>vb(p))),c(e,["tools"],d)}let f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&c(e,["toolConfig"],yb(f)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Xw(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);let s=a(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);let r=a(t,["contents"]);if(e!==void 0&&r!=null){let p=zt(r);Array.isArray(p)&&(p=p.map(m=>m)),c(e,["contents"],p)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],nt(l));let u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>Sb(m))),c(e,["tools"],p)}let f=a(t,["toolConfig"]);e!==void 0&&f!=null&&c(e,["toolConfig"],f);let d=a(t,["kmsKeyName"]);return e!==void 0&&d!=null&&c(e,["encryption_spec","kmsKeyName"],d),n}function Qw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["model"],DT(t,i));let o=a(e,["config"]);return o!=null&&Kw(o,n),n}function Zw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["model"],DT(t,i));let o=a(e,["config"]);return o!=null&&Xw(o,n),n}function Ww(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Vn(t,i)),n}function jw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Vn(t,i)),n}function eb(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function tb(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function nb(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function ib(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ob(t){let e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);let i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sb(t){let e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);let s=a(t,["parametersJsonSchema"]);s!=null&&c(e,["parametersJsonSchema"],s);let r=a(t,["response"]);r!=null&&c(e,["response"],r);let l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function rb(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Vn(t,i)),n}function ab(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Vn(t,i)),n}function lb(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function ub(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function cb(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function fb(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function db(t){let e={},n=a(t,["config"]);return n!=null&&cb(n,e),e}function pb(t){let e={},n=a(t,["config"]);return n!=null&&fb(n,e),e}function mb(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["cachedContents"],s)}return e}function hb(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["cachedContents"],s)}return e}function gb(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],nb(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],ib(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Jw(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function yb(t){let e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);let i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],ob(i)),e}function vb(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],lb(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],ub(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function Sb(t){let e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);let i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=a(t,["codeExecution"]);o!=null&&c(e,["codeExecution"],o);let s=a(t,["enterpriseWebSearch"]);s!=null&&c(e,["enterpriseWebSearch"],s);let r=a(t,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>sb(m))),c(e,["functionDeclarations"],p)}let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);let d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function Tb(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function Eb(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function _b(t,e){let n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],Vn(t,i));let o=a(e,["config"]);return o!=null&&Tb(o,n),n}function Ab(t,e){let n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],Vn(t,i));let o=a(e,["config"]);return o!=null&&Eb(o,n),n}var dp=class extends jt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fn(qn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Zw(this.apiClient,e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{let f=Qw(this.apiClient,e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=ab(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{let f=rb(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=jw(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=tb(d),m=new Ll;return Object.assign(m,p),m})}else{let f=Ww(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=eb(d),m=new Ll;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Ab(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{let f=_b(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=pb(e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=hb(d),m=new Hl;return Object.assign(m,p),m})}else{let f=db(e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=mb(d),m=new Hl;return Object.assign(m,p),m})}}};function ql(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function dT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(t){return this instanceof O?(this.v=t,this):new O(t)}function Zt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(h){return function(y){return Promise.resolve(y).then(h,p)}}function l(h,y){i[h]&&(o[h]=function(E){return new Promise(function(T,g){s.push([h,E,T,g])>1||u(h,E)})},y&&(o[h]=y(o[h])))}function u(h,y){try{f(i[h](y))}catch(E){m(s[0][3],E)}}function f(h){h.value instanceof O?Promise.resolve(h.value.v).then(d,p):m(s[0][2],h)}function d(h){u("next",h)}function p(h){u("throw",h)}function m(h,y){h(y),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Wt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dT=="function"?dT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(r){return new Promise(function(l,u){r=t[s](r),o(l,u,r.done,r.value)})}}function o(s,r,l,u){Promise.resolve(u).then(function(f){s({value:f,done:l})},r)}}function Cb(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:YT(n)}function YT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function xb(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function pT(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{let o=[],s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!YT(t[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}var pp=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new mp(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},mp=class{constructor(e,n,i,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),xb(s)}async sendMessage(e){var n;await this.sendPromise;let i=nt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,l;let u=await o,f=(r=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,d=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];d!=null&&(m=(l=d.slice(p))!==null&&l!==void 0?l:[]);let h=f?[f]:[];this.recordHistory(i,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;let i=nt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){let n=e?pT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Zt(this,arguments,function*(){var o,s,r,l,u,f;let d=[];try{for(var p=!0,m=Wt(e),h;h=yield O(m.next()),o=h.done,!o;p=!0){l=h.value,p=!1;let y=l;if(Cb(y)){let E=(f=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content;E!==void 0&&d.push(E)}yield yield O(y)}}catch(y){s={error:y}}finally{try{!p&&!o&&(r=m.return)&&(yield O(r.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...pT(i)):this.history.push(e),this.history.push(...o)}};var Wi=class extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wi.prototype)}};function wb(t){let e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function bb(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Rb(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],OT(n)),e}function Nb(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Mb(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],OT(n)),e}function Ib(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function kb(t){let e={},n=a(t,["config"]);return n!=null&&Ib(n,e),e}function Db(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["files"],s)}return e}var hp=class extends jt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fn(qn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=kb(e);return s=D("files",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=Db(u),d=new op;return Object.assign(d,f),d})}}async createInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=wb(e);return s=D("upload/v1beta/files",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=bb(u),d=new sp;return Object.assign(d,f),d})}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=Mb(e);return s=D("files/{file}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=Rb(e);return s=D("files/{file}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=Nb(u),d=new rp;return Object.assign(d,f),d})}}};function Rl(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Ub(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Qb(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function Pb(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Lb(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Hb(t){let e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);let s=a(t,["parametersJsonSchema"]);s!=null&&c(e,["parametersJsonSchema"],s);let r=a(t,["response"]);r!=null&&c(e,["response"],r);let l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Gb(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);let i=a(t,["responseJsonSchema"]);i!=null&&c(e,["responseJsonSchema"],i);let o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);let s=a(t,["candidateCount"]);s!=null&&c(e,["candidateCount"],s);let r=a(t,["enableAffectiveDialog"]);r!=null&&c(e,["enableAffectiveDialog"],r);let l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);let u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);let f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);let d=a(t,["mediaResolution"]);d!=null&&c(e,["mediaResolution"],d);let p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);let m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);let h=a(t,["responseMimeType"]);h!=null&&c(e,["responseMimeType"],h);let y=a(t,["responseModalities"]);y!=null&&c(e,["responseModalities"],y);let E=a(t,["responseSchema"]);E!=null&&c(e,["responseSchema"],E);let T=a(t,["routingConfig"]);T!=null&&c(e,["routingConfig"],T);let g=a(t,["seed"]);g!=null&&c(e,["seed"],g);let v=a(t,["speechConfig"]);v!=null&&c(e,["speechConfig"],v);let S=a(t,["stopSequences"]);S!=null&&c(e,["stopSequences"],S);let _=a(t,["temperature"]);_!=null&&c(e,["temperature"],_);let x=a(t,["thinkingConfig"]);x!=null&&c(e,["thinkingConfig"],x);let b=a(t,["topK"]);b!=null&&c(e,["topK"],b);let A=a(t,["topP"]);if(A!=null&&c(e,["topP"],A),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ob(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function qb(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Fb(t,e){let n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);let o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);let s=a(t,["temperature"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","temperature"],s);let r=a(t,["topP"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","topP"],r);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);let f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","seed"],d);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],$p(p));let m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);let h=a(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],h);let y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&c(e,["setup","systemInstruction"],Ub(nt(y)));let E=a(t,["tools"]);if(e!==void 0&&E!=null){let b=fs(E);Array.isArray(b)&&(b=b.map(A=>Wb(cs(A)))),c(e,["setup","tools"],b)}let T=a(t,["sessionResumption"]);e!==void 0&&T!=null&&c(e,["setup","sessionResumption"],Zb(T));let g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);let v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);let S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);let _=a(t,["contextWindowCompression"]);e!==void 0&&_!=null&&c(e,["setup","contextWindowCompression"],_);let x=a(t,["proactivity"]);if(e!==void 0&&x!=null&&c(e,["setup","proactivity"],x),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Vb(t,e){let n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],Gb(i));let o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);let s=a(t,["temperature"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","temperature"],s);let r=a(t,["topP"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","topP"],r);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);let f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","seed"],d);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],$p(p));let m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);let h=a(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],h);let y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&c(e,["setup","systemInstruction"],nt(y));let E=a(t,["tools"]);if(e!==void 0&&E!=null){let A=fs(E);Array.isArray(A)&&(A=A.map(M=>jb(cs(M)))),c(e,["setup","tools"],A)}let T=a(t,["sessionResumption"]);e!==void 0&&T!=null&&c(e,["setup","sessionResumption"],T);let g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);let v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);let S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);let _=a(t,["contextWindowCompression"]);e!==void 0&&_!=null&&c(e,["setup","contextWindowCompression"],_);let x=a(t,["proactivity"]);e!==void 0&&x!=null&&c(e,["setup","proactivity"],x);let b=a(t,["explicitVadSignal"]);return e!==void 0&&b!=null&&c(e,["setup","explicitVadSignal"],b),n}function zb(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],j(t,i));let o=a(e,["config"]);return o!=null&&c(n,["config"],Fb(o,n)),n}function Bb(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],j(t,i));let o=a(e,["config"]);return o!=null&&c(n,["config"],Vb(o,n)),n}function $b(t){let e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function Yb(t){let e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["weightedPrompts"],i)}return e}function Jb(t){let e={},n=a(t,["media"]);if(n!=null){let f=UT(n);Array.isArray(f)&&(f=f.map(d=>Rl(d))),c(e,["mediaChunks"],f)}let i=a(t,["audio"]);i!=null&&c(e,["audio"],Rl(LT(i)));let o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);let s=a(t,["video"]);s!=null&&c(e,["video"],Rl(PT(s)));let r=a(t,["text"]);r!=null&&c(e,["text"],r);let l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);let u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function Kb(t){let e={},n=a(t,["media"]);if(n!=null){let f=UT(n);Array.isArray(f)&&(f=f.map(d=>d)),c(e,["mediaChunks"],f)}let i=a(t,["audio"]);i!=null&&c(e,["audio"],LT(i));let o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);let s=a(t,["video"]);s!=null&&c(e,["video"],PT(s));let r=a(t,["text"]);r!=null&&c(e,["text"],r);let l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);let u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function Xb(t){let e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);let i=a(t,["serverContent"]);i!=null&&c(e,["serverContent"],i);let o=a(t,["toolCall"]);o!=null&&c(e,["toolCall"],o);let s=a(t,["toolCallCancellation"]);s!=null&&c(e,["toolCallCancellation"],s);let r=a(t,["usageMetadata"]);r!=null&&c(e,["usageMetadata"],eR(r));let l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);let u=a(t,["sessionResumptionUpdate"]);u!=null&&c(e,["sessionResumptionUpdate"],u);let f=a(t,["voiceActivityDetectionSignal"]);f!=null&&c(e,["voiceActivityDetectionSignal"],f);let d=a(t,["voiceActivity"]);return d!=null&&c(e,["voiceActivity"],tR(d)),e}function Qb(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],Pb(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],Lb(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Rl(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function Zb(t){let e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Wb(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],Ob(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],qb(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function jb(t){let e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);let i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=a(t,["codeExecution"]);o!=null&&c(e,["codeExecution"],o);let s=a(t,["enterpriseWebSearch"]);s!=null&&c(e,["enterpriseWebSearch"],s);let r=a(t,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>Hb(m))),c(e,["functionDeclarations"],p)}let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);let d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function eR(t){let e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);let i=a(t,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);let o=a(t,["candidatesTokenCount"]);o!=null&&c(e,["responseTokenCount"],o);let s=a(t,["toolUsePromptTokenCount"]);s!=null&&c(e,["toolUsePromptTokenCount"],s);let r=a(t,["thoughtsTokenCount"]);r!=null&&c(e,["thoughtsTokenCount"],r);let l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);let u=a(t,["promptTokensDetails"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(y=>y)),c(e,["promptTokensDetails"],h)}let f=a(t,["cacheTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>y)),c(e,["cacheTokensDetails"],h)}let d=a(t,["candidatesTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(y=>y)),c(e,["responseTokensDetails"],h)}let p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>y)),c(e,["toolUsePromptTokensDetails"],h)}let m=a(t,["trafficType"]);return m!=null&&c(e,["trafficType"],m),e}function tR(t){let e={},n=a(t,["type"]);return n!=null&&c(e,["voiceActivityType"],n),e}function nR(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function iR(t){let e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);let i=a(t,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],oR(i));let o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);let s=a(t,["finishReason"]);s!=null&&c(e,["finishReason"],s);let r=a(t,["avgLogprobs"]);r!=null&&c(e,["avgLogprobs"],r);let l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);let u=a(t,["index"]);u!=null&&c(e,["index"],u);let f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);let d=a(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),c(e,["safetyRatings"],m)}let p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function oR(t){let e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["citations"],i)}return e}function sR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let s=zt(o);Array.isArray(s)&&(s=s.map(r=>r)),c(n,["contents"],s)}return n}function rR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["tokensInfo"],o)}return e}function aR(t){let e={},n=a(t,["values"]);n!=null&&c(e,["values"],n);let i=a(t,["statistics"]);return i!=null&&c(e,["statistics"],lR(i)),e}function lR(t){let e={},n=a(t,["truncated"]);n!=null&&c(e,["truncated"],n);let i=a(t,["token_count"]);return i!=null&&c(e,["tokenCount"],i),e}function tu(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>yN(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function uR(t){let e={},n=a(t,["controlType"]);n!=null&&c(e,["controlType"],n);let i=a(t,["enableControlImageComputation"]);return i!=null&&c(e,["computeControl"],i),e}function cR(t){let e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function fR(t,e){let n={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],nt(i));let o=a(t,["tools"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>QT(l))),c(e,["tools"],r)}let s=a(t,["generationConfig"]);return e!==void 0&&s!=null&&c(e,["generationConfig"],nN(s)),n}function dR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(l=>tu(l))),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&cR(s),n}function pR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(l=>l)),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&fR(s,n),n}function mR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["totalTokens"]);i!=null&&c(e,["totalTokens"],i);let o=a(t,["cachedContentTokenCount"]);return o!=null&&c(e,["cachedContentTokenCount"],o),e}function hR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["totalTokens"]);return i!=null&&c(e,["totalTokens"],i),e}function gR(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],j(t,i)),n}function yR(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],j(t,i)),n}function vR(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function SR(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function TR(t,e){let n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);let o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);let s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);let r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);let u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);let f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);let d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);let m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);let h=a(t,["language"]);e!==void 0&&h!=null&&c(e,["parameters","language"],h);let y=a(t,["outputMimeType"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","mimeType"],y);let E=a(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","compressionQuality"],E);let T=a(t,["addWatermark"]);e!==void 0&&T!=null&&c(e,["parameters","addWatermark"],T);let g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);let v=a(t,["editMode"]);e!==void 0&&v!=null&&c(e,["parameters","editMode"],v);let S=a(t,["baseSteps"]);return e!==void 0&&S!=null&&c(e,["parameters","editConfig","baseSteps"],S),n}function ER(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>AN(u))),c(n,["instances[0]","referenceImages"],l)}let r=a(e,["config"]);return r!=null&&TR(r,n),n}function _R(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>nu(s))),c(e,["generatedImages"],o)}return e}function AR(t,e){let n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);let o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);let s=a(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&c(e,["requests[]","outputDimensionality"],s),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function CR(t,e){let n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);let o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["instances[]","title"],o);let s=a(t,["outputDimensionality"]);e!==void 0&&s!=null&&c(e,["parameters","outputDimensionality"],s);let r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["instances[]","mimeType"],r);let l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&c(e,["parameters","autoTruncate"],l),n}function xR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let l=Vp(t,o);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["requests[]","content"],l)}let s=a(e,["config"]);s!=null&&AR(s,n);let r=a(e,["model"]);return r!==void 0&&c(n,["requests[]","model"],j(t,r)),n}function wR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let r=Vp(t,o);Array.isArray(r)&&(r=r.map(l=>l)),c(n,["instances[]","content"],r)}let s=a(e,["config"]);return s!=null&&CR(s,n),n}function bR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["embeddings"],s)}let o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function RR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>aR(r))),c(e,["embeddings"],s)}let o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function NR(t){let e={},n=a(t,["endpoint"]);n!=null&&c(e,["name"],n);let i=a(t,["deployedModelId"]);return i!=null&&c(e,["deployedModelId"],i),e}function MR(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function IR(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kR(t){let e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);let i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DR(t){let e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);let s=a(t,["parametersJsonSchema"]);s!=null&&c(e,["parametersJsonSchema"],s);let r=a(t,["response"]);r!=null&&c(e,["response"],r);let l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function UR(t,e,n){let i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],tu(nt(o)));let s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);let r=a(e,["topP"]);r!=null&&c(i,["topP"],r);let l=a(e,["topK"]);l!=null&&c(i,["topK"],l);let u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);let f=a(e,["maxOutputTokens"]);f!=null&&c(i,["maxOutputTokens"],f);let d=a(e,["stopSequences"]);d!=null&&c(i,["stopSequences"],d);let p=a(e,["responseLogprobs"]);p!=null&&c(i,["responseLogprobs"],p);let m=a(e,["logprobs"]);m!=null&&c(i,["logprobs"],m);let h=a(e,["presencePenalty"]);h!=null&&c(i,["presencePenalty"],h);let y=a(e,["frequencyPenalty"]);y!=null&&c(i,["frequencyPenalty"],y);let E=a(e,["seed"]);E!=null&&c(i,["seed"],E);let T=a(e,["responseMimeType"]);T!=null&&c(i,["responseMimeType"],T);let g=a(e,["responseSchema"]);g!=null&&c(i,["responseSchema"],zp(g));let v=a(e,["responseJsonSchema"]);if(v!=null&&c(i,["responseJsonSchema"],v),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let S=a(e,["safetySettings"]);if(n!==void 0&&S!=null){let z=S;Array.isArray(z)&&(z=z.map(Ee=>CN(Ee))),c(n,["safetySettings"],z)}let _=a(e,["tools"]);if(n!==void 0&&_!=null){let z=fs(_);Array.isArray(z)&&(z=z.map(Ee=>IN(cs(Ee)))),c(n,["tools"],z)}let x=a(e,["toolConfig"]);if(n!==void 0&&x!=null&&c(n,["toolConfig"],MN(x)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let b=a(e,["cachedContent"]);n!==void 0&&b!=null&&c(n,["cachedContent"],Vn(t,b));let A=a(e,["responseModalities"]);A!=null&&c(i,["responseModalities"],A);let M=a(e,["mediaResolution"]);M!=null&&c(i,["mediaResolution"],M);let R=a(e,["speechConfig"]);if(R!=null&&c(i,["speechConfig"],Bp(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let I=a(e,["thinkingConfig"]);I!=null&&c(i,["thinkingConfig"],I);let k=a(e,["imageConfig"]);k!=null&&c(i,["imageConfig"],aN(k));let X=a(e,["enableEnhancedCivicAnswers"]);if(X!=null&&c(i,["enableEnhancedCivicAnswers"],X),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function PR(t,e,n){let i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],nt(o));let s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);let r=a(e,["topP"]);r!=null&&c(i,["topP"],r);let l=a(e,["topK"]);l!=null&&c(i,["topK"],l);let u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);let f=a(e,["maxOutputTokens"]);f!=null&&c(i,["maxOutputTokens"],f);let d=a(e,["stopSequences"]);d!=null&&c(i,["stopSequences"],d);let p=a(e,["responseLogprobs"]);p!=null&&c(i,["responseLogprobs"],p);let m=a(e,["logprobs"]);m!=null&&c(i,["logprobs"],m);let h=a(e,["presencePenalty"]);h!=null&&c(i,["presencePenalty"],h);let y=a(e,["frequencyPenalty"]);y!=null&&c(i,["frequencyPenalty"],y);let E=a(e,["seed"]);E!=null&&c(i,["seed"],E);let T=a(e,["responseMimeType"]);T!=null&&c(i,["responseMimeType"],T);let g=a(e,["responseSchema"]);g!=null&&c(i,["responseSchema"],zp(g));let v=a(e,["responseJsonSchema"]);v!=null&&c(i,["responseJsonSchema"],v);let S=a(e,["routingConfig"]);S!=null&&c(i,["routingConfig"],S);let _=a(e,["modelSelectionConfig"]);_!=null&&c(i,["modelConfig"],_);let x=a(e,["safetySettings"]);if(n!==void 0&&x!=null){let $e=x;Array.isArray($e)&&($e=$e.map(te=>te)),c(n,["safetySettings"],$e)}let b=a(e,["tools"]);if(n!==void 0&&b!=null){let $e=fs(b);Array.isArray($e)&&($e=$e.map(te=>QT(cs(te)))),c(n,["tools"],$e)}let A=a(e,["toolConfig"]);n!==void 0&&A!=null&&c(n,["toolConfig"],A);let M=a(e,["labels"]);n!==void 0&&M!=null&&c(n,["labels"],M);let R=a(e,["cachedContent"]);n!==void 0&&R!=null&&c(n,["cachedContent"],Vn(t,R));let I=a(e,["responseModalities"]);I!=null&&c(i,["responseModalities"],I);let k=a(e,["mediaResolution"]);k!=null&&c(i,["mediaResolution"],k);let X=a(e,["speechConfig"]);X!=null&&c(i,["speechConfig"],Bp(X));let z=a(e,["audioTimestamp"]);z!=null&&c(i,["audioTimestamp"],z);let Ee=a(e,["thinkingConfig"]);Ee!=null&&c(i,["thinkingConfig"],Ee);let vn=a(e,["imageConfig"]);if(vn!=null&&c(i,["imageConfig"],lN(vn)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let rn=a(e,["modelArmorConfig"]);return n!==void 0&&rn!=null&&c(n,["modelArmorConfig"],rn),i}function mT(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(l=>tu(l))),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&c(n,["generationConfig"],UR(t,s,n)),n}function hT(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(l=>l)),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&c(n,["generationConfig"],PR(t,s,n)),n}function gT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>iR(f))),c(e,["candidates"],u)}let o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);let s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);let r=a(t,["responseId"]);r!=null&&c(e,["responseId"],r);let l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function yT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>d)),c(e,["candidates"],f)}let o=a(t,["createTime"]);o!=null&&c(e,["createTime"],o);let s=a(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);let r=a(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);let l=a(t,["responseId"]);l!=null&&c(e,["responseId"],l);let u=a(t,["usageMetadata"]);return u!=null&&c(e,["usageMetadata"],u),e}function LR(t,e){let n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);let o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);let s=a(t,["guidanceScale"]);if(e!==void 0&&s!=null&&c(e,["parameters","guidanceScale"],s),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&c(e,["parameters","safetySetting"],r);let l=a(t,["personGeneration"]);e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l);let u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&c(e,["parameters","includeSafetyAttributes"],u);let f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&c(e,["parameters","includeRaiReason"],f);let d=a(t,["language"]);e!==void 0&&d!=null&&c(e,["parameters","language"],d);let p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);let m=a(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&c(e,["parameters","outputOptions","compressionQuality"],m),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let h=a(t,["imageSize"]);if(e!==void 0&&h!=null&&c(e,["parameters","sampleImageSize"],h),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function HR(t,e){let n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);let o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);let s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);let r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);let u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);let f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);let d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);let m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);let h=a(t,["language"]);e!==void 0&&h!=null&&c(e,["parameters","language"],h);let y=a(t,["outputMimeType"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","mimeType"],y);let E=a(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","compressionQuality"],E);let T=a(t,["addWatermark"]);e!==void 0&&T!=null&&c(e,["parameters","addWatermark"],T);let g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);let v=a(t,["imageSize"]);e!==void 0&&v!=null&&c(e,["parameters","sampleImageSize"],v);let S=a(t,["enhancePrompt"]);return e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S),n}function GR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["config"]);return s!=null&&LR(s,n),n}function OR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["config"]);return s!=null&&HR(s,n),n}function qR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>WR(r))),c(e,["generatedImages"],s)}let o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],KT(o)),e}function FR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>nu(r))),c(e,["generatedImages"],s)}let o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],XT(o)),e}function VR(t,e){let n={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=a(t,["durationSeconds"]);if(e!==void 0&&o!=null&&c(e,["parameters","durationSeconds"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);let r=a(t,["resolution"]);e!==void 0&&r!=null&&c(e,["parameters","resolution"],r);let l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);let f=a(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&c(e,["parameters","enhancePrompt"],f),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let d=a(t,["lastFrame"]);e!==void 0&&d!=null&&c(e,["instances[0]","lastFrame"],iu(d));let p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>BN(h))),c(e,["instances[0]","referenceImages"],m)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function zR(t,e){let n={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);let o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);let s=a(t,["fps"]);e!==void 0&&s!=null&&c(e,["parameters","fps"],s);let r=a(t,["durationSeconds"]);e!==void 0&&r!=null&&c(e,["parameters","durationSeconds"],r);let l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);let u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);let f=a(t,["resolution"]);e!==void 0&&f!=null&&c(e,["parameters","resolution"],f);let d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);let p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&c(e,["parameters","pubsubTopic"],p);let m=a(t,["negativePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","negativePrompt"],m);let h=a(t,["enhancePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","enhancePrompt"],h);let y=a(t,["generateAudio"]);e!==void 0&&y!=null&&c(e,["parameters","generateAudio"],y);let E=a(t,["lastFrame"]);e!==void 0&&E!=null&&c(e,["instances[0]","lastFrame"],tn(E));let T=a(t,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(_=>$N(_))),c(e,["instances[0]","referenceImages"],S)}let g=a(t,["mask"]);e!==void 0&&g!=null&&c(e,["instances[0]","mask"],zN(g));let v=a(t,["compressionQuality"]);return e!==void 0&&v!=null&&c(e,["parameters","compressionQuality"],v),n}function BR(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response","generateVideoResponse"]);return r!=null&&c(e,["response"],KR(r)),e}function $R(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],XR(r)),e}function YR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["image"]);s!=null&&c(n,["instances[0]","image"],iu(s));let r=a(e,["video"]);r!=null&&c(n,["instances[0]","video"],ZT(r));let l=a(e,["source"]);l!=null&&QR(l,n);let u=a(e,["config"]);return u!=null&&VR(u,n),n}function JR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["image"]);s!=null&&c(n,["instances[0]","image"],tn(s));let r=a(e,["video"]);r!=null&&c(n,["instances[0]","video"],WT(r));let l=a(e,["source"]);l!=null&&ZR(l,n);let u=a(e,["config"]);return u!=null&&zR(u,n),n}function KR(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>eN(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function XR(t){let e={},n=a(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>tN(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function QR(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],iu(o));let s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],ZT(s)),n}function ZR(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],tn(o));let s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],WT(s)),n}function WR(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["image"],uN(n));let i=a(t,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);let o=a(t,["_self"]);return o!=null&&c(e,["safetyAttributes"],KT(o)),e}function nu(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["image"],JT(n));let i=a(t,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);let o=a(t,["_self"]);o!=null&&c(e,["safetyAttributes"],XT(o));let s=a(t,["prompt"]);return s!=null&&c(e,["enhancedPrompt"],s),e}function jR(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["mask"],JT(n));let i=a(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["labels"],o)}return e}function eN(t){let e={},n=a(t,["video"]);return n!=null&&c(e,["video"],FN(n)),e}function tN(t){let e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],VN(n)),e}function nN(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);let i=a(t,["responseJsonSchema"]);i!=null&&c(e,["responseJsonSchema"],i);let o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);let s=a(t,["candidateCount"]);s!=null&&c(e,["candidateCount"],s);let r=a(t,["enableAffectiveDialog"]);r!=null&&c(e,["enableAffectiveDialog"],r);let l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);let u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);let f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);let d=a(t,["mediaResolution"]);d!=null&&c(e,["mediaResolution"],d);let p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);let m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);let h=a(t,["responseMimeType"]);h!=null&&c(e,["responseMimeType"],h);let y=a(t,["responseModalities"]);y!=null&&c(e,["responseModalities"],y);let E=a(t,["responseSchema"]);E!=null&&c(e,["responseSchema"],E);let T=a(t,["routingConfig"]);T!=null&&c(e,["routingConfig"],T);let g=a(t,["seed"]);g!=null&&c(e,["seed"],g);let v=a(t,["speechConfig"]);v!=null&&c(e,["speechConfig"],v);let S=a(t,["stopSequences"]);S!=null&&c(e,["stopSequences"],S);let _=a(t,["temperature"]);_!=null&&c(e,["temperature"],_);let x=a(t,["thinkingConfig"]);x!=null&&c(e,["thinkingConfig"],x);let b=a(t,["topK"]);b!=null&&c(e,["topK"],b);let A=a(t,["topP"]);if(A!=null&&c(e,["topP"],A),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iN(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],j(t,i)),n}function oN(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],j(t,i)),n}function sN(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function rN(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function aN(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let i=a(t,["imageSize"]);if(i!=null&&c(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function lN(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let i=a(t,["imageSize"]);i!=null&&c(e,["imageSize"],i);let o=a(t,["personGeneration"]);o!=null&&c(e,["personGeneration"],o);let s=a(t,["outputMimeType"]);s!=null&&c(e,["imageOutputOptions","mimeType"],s);let r=a(t,["outputCompressionQuality"]);return r!=null&&c(e,["imageOutputOptions","compressionQuality"],r),e}function uN(t){let e={},n=a(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],Ci(n));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function JT(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);let i=a(t,["bytesBase64Encoded"]);i!=null&&c(e,["imageBytes"],Ci(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function iu(t){let e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=a(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],Ci(n));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function tn(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);let i=a(t,["imageBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Ci(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function cN(t,e,n){let i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);let s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);let r=a(e,["filter"]);n!==void 0&&r!=null&&c(n,["_query","filter"],r);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],qT(t,l)),i}function fN(t,e,n){let i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);let s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);let r=a(e,["filter"]);n!==void 0&&r!=null&&c(n,["_query","filter"],r);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],qT(t,l)),i}function dN(t,e){let n={},i=a(e,["config"]);return i!=null&&cN(t,i,n),n}function pN(t,e){let n={},i=a(e,["config"]);return i!=null&&fN(t,i,n),n}function mN(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["_self"]);if(o!=null){let s=FT(o);Array.isArray(s)&&(s=s.map(r=>gp(r))),c(e,["models"],s)}return e}function hN(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["_self"]);if(o!=null){let s=FT(o);Array.isArray(s)&&(s=s.map(r=>yp(r))),c(e,["models"],s)}return e}function gN(t){let e={},n=a(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);let i=a(t,["segmentationClasses"]);i!=null&&c(e,["maskClasses"],i);let o=a(t,["maskDilation"]);return o!=null&&c(e,["dilation"],o),e}function gp(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);o!=null&&c(e,["description"],o);let s=a(t,["version"]);s!=null&&c(e,["version"],s);let r=a(t,["_self"]);r!=null&&c(e,["tunedModelInfo"],kN(r));let l=a(t,["inputTokenLimit"]);l!=null&&c(e,["inputTokenLimit"],l);let u=a(t,["outputTokenLimit"]);u!=null&&c(e,["outputTokenLimit"],u);let f=a(t,["supportedGenerationMethods"]);f!=null&&c(e,["supportedActions"],f);let d=a(t,["temperature"]);d!=null&&c(e,["temperature"],d);let p=a(t,["maxTemperature"]);p!=null&&c(e,["maxTemperature"],p);let m=a(t,["topP"]);m!=null&&c(e,["topP"],m);let h=a(t,["topK"]);h!=null&&c(e,["topK"],h);let y=a(t,["thinking"]);return y!=null&&c(e,["thinking"],y),e}function yp(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);o!=null&&c(e,["description"],o);let s=a(t,["versionId"]);s!=null&&c(e,["version"],s);let r=a(t,["deployedModels"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>NR(m))),c(e,["endpoints"],p)}let l=a(t,["labels"]);l!=null&&c(e,["labels"],l);let u=a(t,["_self"]);u!=null&&c(e,["tunedModelInfo"],DN(u));let f=a(t,["defaultCheckpointId"]);f!=null&&c(e,["defaultCheckpointId"],f);let d=a(t,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),c(e,["checkpoints"],p)}return e}function yN(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],MR(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],IR(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],nR(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function vN(t){let e={},n=a(t,["productImage"]);return n!=null&&c(e,["image"],tn(n)),e}function SN(t,e){let n={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);let o=a(t,["baseSteps"]);e!==void 0&&o!=null&&c(e,["parameters","baseSteps"],o);let s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);let r=a(t,["seed"]);e!==void 0&&r!=null&&c(e,["parameters","seed"],r);let l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);let u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);let f=a(t,["addWatermark"]);e!==void 0&&f!=null&&c(e,["parameters","addWatermark"],f);let d=a(t,["outputMimeType"]);e!==void 0&&d!=null&&c(e,["parameters","outputOptions","mimeType"],d);let p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","compressionQuality"],p);let m=a(t,["enhancePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","enhancePrompt"],m);let h=a(t,["labels"]);return e!==void 0&&h!=null&&c(e,["labels"],h),n}function TN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["source"]);o!=null&&_N(o,n);let s=a(e,["config"]);return s!=null&&SN(s,n),n}function EN(t){let e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nu(o))),c(e,["generatedImages"],i)}return e}function _N(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["personImage"]);e!==void 0&&o!=null&&c(e,["instances[0]","personImage","image"],tn(o));let s=a(t,["productImages"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>vN(l))),c(e,["instances[0]","productImages"],r)}return n}function AN(t){let e={},n=a(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],tn(n));let i=a(t,["referenceId"]);i!=null&&c(e,["referenceId"],i);let o=a(t,["referenceType"]);o!=null&&c(e,["referenceType"],o);let s=a(t,["maskImageConfig"]);s!=null&&c(e,["maskImageConfig"],gN(s));let r=a(t,["controlImageConfig"]);r!=null&&c(e,["controlImageConfig"],uR(r));let l=a(t,["styleImageConfig"]);l!=null&&c(e,["styleImageConfig"],l);let u=a(t,["subjectImageConfig"]);return u!=null&&c(e,["subjectImageConfig"],u),e}function KT(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);let i=a(t,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);let o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function XT(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);let i=a(t,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);let o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function CN(t){let e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=a(t,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function xN(t){let e={},n=a(t,["image"]);return n!=null&&c(e,["image"],tn(n)),e}function wN(t,e){let n={},i=a(t,["mode"]);e!==void 0&&i!=null&&c(e,["parameters","mode"],i);let o=a(t,["maxPredictions"]);e!==void 0&&o!=null&&c(e,["parameters","maxPredictions"],o);let s=a(t,["confidenceThreshold"]);e!==void 0&&s!=null&&c(e,["parameters","confidenceThreshold"],s);let r=a(t,["maskDilation"]);e!==void 0&&r!=null&&c(e,["parameters","maskDilation"],r);let l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","binaryColorThreshold"],l);let u=a(t,["labels"]);return e!==void 0&&u!=null&&c(e,["labels"],u),n}function bN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["source"]);o!=null&&NN(o,n);let s=a(e,["config"]);return s!=null&&wN(s,n),n}function RN(t){let e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jR(o))),c(e,["generatedMasks"],i)}return e}function NN(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],tn(o));let s=a(t,["scribbleImage"]);return e!==void 0&&s!=null&&c(e,["instances[0]","scribble"],xN(s)),n}function MN(t){let e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);let i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],kR(i)),e}function IN(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],sN(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],rN(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function QT(t){let e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);let i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=a(t,["codeExecution"]);o!=null&&c(e,["codeExecution"],o);let s=a(t,["enterpriseWebSearch"]);s!=null&&c(e,["enterpriseWebSearch"],s);let r=a(t,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>DR(m))),c(e,["functionDeclarations"],p)}let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);let d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function kN(t){let e={},n=a(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);let i=a(t,["createTime"]);i!=null&&c(e,["createTime"],i);let o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function DN(t){let e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);let i=a(t,["createTime"]);i!=null&&c(e,["createTime"],i);let o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function UN(t,e){let n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);let s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),n}function PN(t,e){let n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);let s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),n}function LN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","name"],j(t,i));let o=a(e,["config"]);return o!=null&&UN(o,n),n}function HN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["config"]);return o!=null&&PN(o,n),n}function GN(t,e){let n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);let o=a(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&c(e,["parameters","safetySetting"],o);let s=a(t,["personGeneration"]);e!==void 0&&s!=null&&c(e,["parameters","personGeneration"],s);let r=a(t,["includeRaiReason"]);e!==void 0&&r!=null&&c(e,["parameters","includeRaiReason"],r);let l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);let u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","compressionQuality"],u);let f=a(t,["enhanceInputImage"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],f);let d=a(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],d);let p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);let m=a(t,["numberOfImages"]);e!==void 0&&m!=null&&c(e,["parameters","sampleCount"],m);let h=a(t,["mode"]);return e!==void 0&&h!=null&&c(e,["parameters","mode"],h),n}function ON(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],j(t,i));let o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],tn(o));let s=a(e,["upscaleFactor"]);s!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],s);let r=a(e,["config"]);return r!=null&&GN(r,n),n}function qN(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>nu(s))),c(e,["generatedImages"],o)}return e}function FN(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let i=a(t,["encodedVideo"]);i!=null&&c(e,["videoBytes"],Ci(i));let o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function VN(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);let i=a(t,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Ci(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function zN(t){let e={},n=a(t,["image"]);n!=null&&c(e,["_self"],tn(n));let i=a(t,["maskMode"]);return i!=null&&c(e,["maskMode"],i),e}function BN(t){let e={},n=a(t,["image"]);n!=null&&c(e,["image"],iu(n));let i=a(t,["referenceType"]);return i!=null&&c(e,["referenceType"],i),e}function $N(t){let e={},n=a(t,["image"]);n!=null&&c(e,["image"],tn(n));let i=a(t,["referenceType"]);return i!=null&&c(e,["referenceType"],i),e}function ZT(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let i=a(t,["videoBytes"]);i!=null&&c(e,["encodedVideo"],Ci(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["encoding"],o),e}function WT(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["gcsUri"],n);let i=a(t,["videoBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Ci(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function YN(t,e){let n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&c(e,["displayName"],i),n}function JN(t){let e={},n=a(t,["config"]);return n!=null&&YN(n,e),e}function KN(t,e){let n={},i=a(t,["force"]);return e!==void 0&&i!=null&&c(e,["_query","force"],i),n}function XN(t){let e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);let i=a(t,["config"]);return i!=null&&KN(i,e),e}function QN(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function ZN(t,e){let n={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["customMetadata"],s)}let o=a(t,["chunkingConfig"]);return e!==void 0&&o!=null&&c(e,["chunkingConfig"],o),n}function WN(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],e1(r)),e}function jN(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);let i=a(t,["fileName"]);i!=null&&c(e,["fileName"],i);let o=a(t,["config"]);return o!=null&&ZN(o,e),e}function e1(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["parent"]);i!=null&&c(e,["parent"],i);let o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function t1(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function n1(t){let e={},n=a(t,["config"]);return n!=null&&t1(n,e),e}function i1(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["fileSearchStores"],s)}return e}function jT(t,e){let n={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&c(e,["mimeType"],i);let o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);let s=a(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}let r=a(t,["chunkingConfig"]);return e!==void 0&&r!=null&&c(e,["chunkingConfig"],r),n}function o1(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);let i=a(t,["config"]);return i!=null&&jT(i,e),e}function s1(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}var r1="Content-Type",a1="X-Server-Timeout",l1="User-Agent",vp="x-goog-api-client",u1="1.38.0",c1=`google-genai-sdk/${u1}`,f1="v1beta1",d1="v1beta",Sp=class{constructor(e){var n,i,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let l=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!l?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:f1}else{if(!this.clientOptions.apiKey)throw new Wi({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:d1,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){let o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Xd.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(let[r,l]of Object.entries(e.queryParams))o.searchParams.append(r,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){let i=JSON.parse(JSON.stringify(e));for(let[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){let s=new AbortController,r=s.signal;if(n.timeout&&n?.timeout>0){let l=setTimeout(()=>s.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&p1(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await vT(o),new br(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await vT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Zt(this,arguments,function*(){var i;let o=(i=e?.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="",l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:f,value:d}=yield O(o.read());if(f){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=s.decode(d,{stream:!0});try{let y=JSON.parse(p);if("error"in y){let E=JSON.parse(JSON.stringify(y.error)),T=E.status,g=E.code,v=`got status: ${T}. ${JSON.stringify(y)}`;if(g>=400&&g<600)throw new Wi({message:v,status:g})}}catch(y){if(y.name==="ApiError")throw y}r+=p;let m=-1,h=0;for(;;){m=-1,h=0;for(let T of u){let g=r.indexOf(T);g!==-1&&(m===-1||g<m)&&(m=g,h=T.length)}if(m===-1)break;let y=r.substring(0,m);r=r.substring(m+h);let E=y.trim();if(E.startsWith(l)){let T=E.substring(l.length).trim();try{let g=new Response(T,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield O(new br(g))}catch(g){throw new Error(`exception parsing stream chunk ${T}. ${g}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},n=c1+" "+this.clientOptions.userAgentExtra;return e[l1]=n,e[vp]=n,e[r1]="application/json",e}async getHeadersInternal(e,n){let i=new Headers;if(e&&e.headers){for(let[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(a1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let s=this.clientOptions.uploader,r=await s.stat(e);o.sizeBytes=String(r.size);let l=(i=n?.mimeType)!==null&&i!==void 0?i:r.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=l;let u={file:o},f=this.getFileName(e),d=D("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,f,u,n?.httpOptions);return s.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var o;let s=this.clientOptions.uploader,r=await s.stat(n),l=String(r.size),u=(o=i?.mimeType)!==null&&o!==void 0?o:r.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let f=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),p={};i!=null&&jT(i,p);let m=await this.fetchUploadUrl(f,l,u,d,p,i?.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,s,r){var l;let u={};r?u=r:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let f=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:u});if(!f||!f?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let d=(l=f?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}};async function vT(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};let o=JSON.stringify(i);throw n>=400&&n<600?new Wi({message:o,status:n}):new Error(o)}}function p1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){let l=Object.assign({},s);for(let u in r)if(Object.prototype.hasOwnProperty.call(r,u)){let f=r[u],d=l[u];f&&typeof f=="object"&&!Array.isArray(f)&&d&&typeof d=="object"&&!Array.isArray(d)?l[u]=i(d,f):(d&&f&&typeof d!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof d}, New type: ${typeof f}. Overwriting.`),l[u]=f)}return l}let o=i(n,e);t.body=JSON.stringify(o)}var m1="mcp_used/unknown",h1=!1;function eE(t){for(let e of t)if(g1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return h1}function tE(t){var e;let n=(e=t[vp])!==null&&e!==void 0?e:"";t[vp]=(n+` ${m1}`).trimStart()}function g1(t){return t!==null&&typeof t=="object"&&t instanceof Mr}function y1(t){return Zt(this,arguments,function*(n,i=100){let o,s=0;for(;s<i;){let r=yield O(n.listTools({cursor:o}));for(let l of r.tools)yield yield O(l),s++;if(!r.nextCursor)break;o=r.nextCursor}})}var Mr=class{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Mr(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;let s={},r=[];for(let d of this.mcpClients)try{for(var l=!0,u=(n=void 0,Wt(y1(d))),f;f=await u.next(),e=f.done,!e;l=!0){o=f.value,l=!1;let p=o;r.push(p);let m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(p){n={error:p}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),ew(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}};async function v1(t,e,n){let i=new lp,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}var Tp=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=T1(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`,f=()=>{},d=new Promise(S=>{f=S}),p=e.callbacks,m=function(){f({})},h=this.apiClient,y={onopen:m,onmessage:S=>{v1(h,p.onmessage,S)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(S){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(S){}},E=this.webSocketFactory.create(u,S1(r),y);E.connect(),await d;let v={setup:{model:j(this.apiClient,e.model)}};return E.send(JSON.stringify(v)),new Ep(E,this.apiClient)}},Ep=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=Yb(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=$b(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ns.PLAY)}pause(){this.sendPlaybackControl(ns.PAUSE)}stop(){this.sendPlaybackControl(ns.STOP)}resetContext(){this.sendPlaybackControl(ns.RESET_CONTEXT)}close(){this.conn.close()}};function S1(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function T1(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var E1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _1(t,e,n){let i=new ap,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let s=JSON.parse(o);if(t.isVertexAI()){let r=Xb(s);Object.assign(i,r)}else Object.assign(i,s);e(i)}var _p=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Tp(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,s,r,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),d,p=this.apiClient.getHeaders();e.config&&e.config.tools&&eE(e.config.tools)&&tE(p);let m=x1(p);if(this.apiClient.isVertexAI()){let R=this.apiClient.getProject(),I=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),X=!!R&&!!I||!!k;this.apiClient.getCustomBaseUrl()&&!X?d=u:(d=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d))}else{let R=this.apiClient.getApiKey(),I="BidiGenerateContent",k="key";R?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",k="access_token"),d=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${I}?${k}=${R}`}let h=()=>{},y=new Promise(R=>{h=R}),E=e.callbacks,T=function(){var R;(R=E?.onopen)===null||R===void 0||R.call(E),h({})},g=this.apiClient,v={onopen:T,onmessage:R=>{_1(g,E.onmessage,R)},onerror:(n=E?.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=E?.onclose)!==null&&i!==void 0?i:function(R){}},S=this.webSocketFactory.create(d,C1(m),v);S.connect(),await y;let _=j(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){let R=this.apiClient.getProject(),I=this.apiClient.getLocation();R&&I&&(_=`projects/${R}/locations/${I}/`+_)}let x={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ss.AUDIO]}:e.config.responseModalities=[ss.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let b=(l=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&l!==void 0?l:[],A=[];for(let R of b)if(this.isCallableTool(R)){let I=R;A.push(await I.tool())}else A.push(R);A.length>0&&(e.config.tools=A);let M={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?x=Bb(this.apiClient,M):x=zb(this.apiClient,M),delete x.config,S.send(JSON.stringify(x)),new Ap(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},A1={turnComplete:!0},Ap=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=zt(n.turns),e.isVertexAI()||(i=i.map(o=>tu(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(E1)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},A1),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Kb(e)}:n={realtimeInput:Jb(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function C1(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function x1(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var ST=10;function TT(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let r of(n=t?.tools)!==null&&n!==void 0?n:[])if(os(r)){o=!0;break}if(!o)return!0;let s=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function os(t){return"callTool"in t&&typeof t.callTool=="function"}function w1(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>os(o)))!==null&&i!==void 0?i:!1}function ET(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(os(i))return;let s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function _T(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var Cp=class extends jt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,s,r,l;let u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!w1(n)||TT(n.config))return await this.generateContentInternal(u);let f=ET(n);if(f.length>0){let E=f.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let d,p,m=zt(u.contents),h=(s=(o=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:ST,y=0;for(;y<h&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){let E=d.candidates[0].content,T=[];for(let g of(l=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&l!==void 0?l:[])if(os(g)){let S=await g.callTool(d.functionCalls);T.push(...S)}y++,p={role:"user",parts:T},u.contents=zt(u.contents),u.contents.push(E),u.contents.push(p),_T(u.config)&&(m.push(E),m.push(p))}return _T(u.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var i,o,s,r,l;if(this.maybeMoveToResponseJsonSchem(n),TT(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let u=ET(n);if(u.length>0){let p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let f=(s=(o=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(l=(r=n?.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(f&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s,r=[];if(i?.generatedImages)for(let u of i.generatedImages)u&&u?.safetyAttributes&&((o=u?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=u?.safetyAttributes:r.push(u);let l;return s?l={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;let r={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new Fn(qn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(r),r)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(((i=n.video)===null||i===void 0?void 0:i.uri)&&((o=n.video)===null||o===void 0?void 0:o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0?void 0:r.uri)&&((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0?void 0:u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;let s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;let r=await Promise.all(s.map(async u=>os(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(l.config.tools=r,e.config&&e.config.tools&&eE(e.config.tools)){let u=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),tE(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,i,o;let s=new Map;for(let r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(os(r)){let l=r,u=await l.tool();for(let f of(o=u.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,l)}}return s}async processAfcStream(e){var n,i,o;let s=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:ST,r=!1,l=0,u=await this.initAfcToolsMap(e);return function(f,d,p){return Zt(this,arguments,function*(){for(var m,h,y,E,T,g;l<s;){r&&(l++,r=!1);let x=yield O(f.processParamsMaybeAddMcpUsage(p)),b=yield O(f.generateContentStreamInternal(x)),A=[],M=[];try{for(var v=!0,S=(h=void 0,Wt(b)),_;_=yield O(S.next()),m=_.done,!m;v=!0){E=_.value,v=!1;let R=E;if(yield yield O(R),R.candidates&&((T=R.candidates[0])===null||T===void 0?void 0:T.content)){M.push(R.candidates[0].content);for(let I of(g=R.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(l<s&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(I.functionCall.name)){let k=yield O(d.get(I.functionCall.name).callTool([I.functionCall]));A.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(R){h={error:R}}finally{try{!v&&!m&&(y=S.return)&&(yield O(y.call(S)))}finally{if(h)throw h.error}}if(A.length>0){r=!0;let R=new Zi;R.candidates=[{content:{role:"user",parts:A}}],yield yield O(R);let I=[];I.push(...M),I.push({role:"user",parts:A});let k=zt(p.contents).concat(I);p.contents=k}else break}})}(this,u,e)}async generateContentInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=hT(this.apiClient,e);return l=D("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=yT(d),m=new Zi;return Object.assign(m,p),m})}else{let f=mT(this.apiClient,e);return l=D("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=gT(d),m=new Zi;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=hT(this.apiClient,e);return l=D("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(p){return Zt(this,arguments,function*(){var m,h,y,E;try{for(var T=!0,g=Wt(p),v;v=yield O(g.next()),m=v.done,!m;T=!0){E=v.value,T=!1;let S=E,_=yT(yield O(S.json()));_.sdkHttpResponse={headers:S.headers};let x=new Zi;Object.assign(x,_),yield yield O(x)}}catch(S){h={error:S}}finally{try{!T&&!m&&(y=g.return)&&(yield O(y.call(g)))}finally{if(h)throw h.error}}})})}else{let f=mT(this.apiClient,e);return l=D("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(p){return Zt(this,arguments,function*(){var m,h,y,E;try{for(var T=!0,g=Wt(p),v;v=yield O(g.next()),m=v.done,!m;T=!0){E=v.value,T=!1;let S=E,_=gT(yield O(S.json()));_.sdkHttpResponse={headers:S.headers};let x=new Zi;Object.assign(x,_),yield yield O(x)}}catch(S){h={error:S}}finally{try{!T&&!m&&(y=g.return)&&(yield O(y.call(g)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=wR(this.apiClient,e);return l=D("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=RR(d),m=new Nl;return Object.assign(m,p),m})}else{let f=xR(this.apiClient,e);return l=D("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=bR(d),m=new Nl;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=OR(this.apiClient,e);return l=D("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=FR(d),m=new Ml;return Object.assign(m,p),m})}else{let f=GR(this.apiClient,e);return l=D("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=qR(d),m=new Ml;return Object.assign(m,p),m})}}async editImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=ER(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=_R(u),d=new Qd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=ON(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=qN(u),d=new Zd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=TN(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=EN(u),d=new Wd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=bN(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=RN(u),d=new jd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=oN(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>yp(d))}else{let f=iN(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>gp(d))}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=pN(this.apiClient,e);return l=D("{models_url}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=hN(d),m=new Il;return Object.assign(m,p),m})}else{let f=dN(this.apiClient,e);return l=D("{models_url}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=mN(d),m=new Il;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=HN(this.apiClient,e);return l=D("{model}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>yp(d))}else{let f=LN(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>gp(d))}}async delete(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=yR(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=SR(d),m=new kl;return Object.assign(m,p),m})}else{let f=gR(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=vR(d),m=new kl;return Object.assign(m,p),m})}}async countTokens(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=pR(this.apiClient,e);return l=D("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=hR(d),m=new Dl;return Object.assign(m,p),m})}else{let f=dR(this.apiClient,e);return l=D("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=mR(d),m=new Dl;return Object.assign(m,p),m})}}async computeTokens(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=sR(this.apiClient,e);return s=D("{model}:computeTokens",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=rR(u),d=new ep;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=JR(this.apiClient,e);return l=D("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{let p=$R(d),m=new rs;return Object.assign(m,p),m})}else{let f=YR(this.apiClient,e);return l=D("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>{let p=BR(d),m=new rs;return Object.assign(m,p),m})}}};var xp=class extends jt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Fx(e);return l=D("{operationName}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else{let f=qx(e);return l=D("{operationName}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=Dx(e);return s=D("{resourceName}:fetchPredictOperation",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function b1(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function R1(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>H1(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function N1(t,e,n){let i={},o=a(e,["expireTime"]);n!==void 0&&o!=null&&c(n,["expireTime"],o);let s=a(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&c(n,["newSessionExpireTime"],s);let r=a(e,["uses"]);n!==void 0&&r!=null&&c(n,["uses"],r);let l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],L1(t,l));let u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),i}function M1(t,e){let n={},i=a(e,["config"]);return i!=null&&c(n,["config"],N1(t,i,n)),n}function I1(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function k1(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function D1(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function U1(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function P1(t,e){let n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);let o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);let s=a(t,["temperature"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","temperature"],s);let r=a(t,["topP"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","topP"],r);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);let f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","seed"],d);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],$p(p));let m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);let h=a(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],h);let y=a(t,["systemInstruction"]);e!==void 0&&y!=null&&c(e,["setup","systemInstruction"],R1(nt(y)));let E=a(t,["tools"]);if(e!==void 0&&E!=null){let b=fs(E);Array.isArray(b)&&(b=b.map(A=>O1(cs(A)))),c(e,["setup","tools"],b)}let T=a(t,["sessionResumption"]);e!==void 0&&T!=null&&c(e,["setup","sessionResumption"],G1(T));let g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);let v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);let S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);let _=a(t,["contextWindowCompression"]);e!==void 0&&_!=null&&c(e,["setup","contextWindowCompression"],_);let x=a(t,["proactivity"]);if(e!==void 0&&x!=null&&c(e,["setup","proactivity"],x),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function L1(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],j(t,i));let o=a(e,["config"]);return o!=null&&c(n,["config"],P1(o,n)),n}function H1(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],I1(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],k1(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],b1(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function G1(t){let e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function O1(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],D1(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],U1(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function q1(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function F1(t,e){let n=null,i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;let o=t.fieldMask;if(n){let s=q1(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],l=[];o.length>0&&(l=o.map(f=>r.includes(f)?`generationConfig.${f}`:f));let u=[];s&&u.push(s),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}var wp=class extends jt{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let l=M1(this.apiClient,e);s=D("auth_tokens",l._url),r=l._query,delete l.config,delete l._url,delete l._query;let u=F1(l,e.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}};function V1(t,e){let n={},i=a(t,["force"]);return e!==void 0&&i!=null&&c(e,["_query","force"],i),n}function z1(t){let e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);let i=a(t,["config"]);return i!=null&&V1(i,e),e}function B1(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function $1(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Y1(t){let e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);let i=a(t,["config"]);return i!=null&&$1(i,e),e}function J1(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["documents"],s)}return e}var bp=class extends jt{constructor(e){super(),this.apiClient=e,this.list=async n=>new Fn(qn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=B1(e);return s=D("{name}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let r=z1(e);o=D("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=Y1(e);return s=D("{parent}/documents",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=J1(u),d=new tp;return Object.assign(d,f),d})}}};var Rp=class extends jt{constructor(e,n=new bp(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Fn(qn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=JN(e);return s=D("fileSearchStores",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=QN(e);return s=D("{name}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let r=XN(e);o=D("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=n1(e);return s=D("fileSearchStores",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=i1(u),d=new np;return Object.assign(d,f),d})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=o1(e);return s=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=s1(u),d=new ip;return Object.assign(d,f),d})}}async importFile(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=jN(e);return s=D("{file_search_store_name}:importFile",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=WN(u),d=new Rr;return Object.assign(d,f),d})}}};var nE=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return nE=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))},K1=()=>nE();function Np(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var Mp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var yt=class extends Error{},We=class extends yt{constructor(e,n,i,o){super(`${We.makeMessage(e,n,i)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,i){let o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,i,o){if(!e||!o)return new as({message:i,cause:Mp(n)});let s=n;return e===400?new Vl(e,s,i,o):e===401?new zl(e,s,i,o):e===403?new Bl(e,s,i,o):e===404?new $l(e,s,i,o):e===409?new Yl(e,s,i,o):e===422?new Jl(e,s,i,o):e===429?new Kl(e,s,i,o):e>=500?new Xl(e,s,i,o):new We(e,s,i,o)}},Ir=class extends We{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},as=class extends We{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},Fl=class extends as{constructor({message:e}={}){super({message:e??"Request timed out."})}},Vl=class extends We{},zl=class extends We{},Bl=class extends We{},$l=class extends We{},Yl=class extends We{},Jl=class extends We{},Kl=class extends We{},Xl=class extends We{};var X1=/^[a-z][a-z0-9+.-]*:/i,Q1=t=>X1.test(t),Ip=t=>(Ip=Array.isArray,Ip(t)),Z1=Ip,W1=Z1,AT=W1;function j1(t){if(!t)return!0;for(let e in t)return!1;return!0}function eM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var tM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yt(`${t} must be an integer`);if(e<0)throw new yt(`${t} must be a positive integer`);return e},nM=t=>{try{return JSON.parse(t)}catch{return}};var iM=t=>new Promise(e=>setTimeout(e,t));var ts="0.0.1";function oM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var sM=()=>{var t,e,n,i,o;let s=oM();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":xT(Deno.build.os),"X-Stainless-Arch":CT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":xT((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":CT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let r=rM();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function rM(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let i=n.exec(navigator.userAgent);if(i){let o=i[1]||0,s=i[2]||0,r=i[3]||0;return{browser:e,version:`${o}.${s}.${r}`}}}return null}var CT=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",xT=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),_l,aM=()=>_l??(_l=sM());function lM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function iE(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function uM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return iE({start(){},async pull(n){let{done:i,value:o}=await e.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function oE(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function cM(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let i=t.getReader(),o=i.cancel();i.releaseLock(),await o}var fM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var sE=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $d(t,e,n){return sE(),new File(t,e??"unknown_file",n)}function dM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var pM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var rE=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",mM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&rE(t),hM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function gM(t,e,n){if(sE(),t=await t,mM(t))return t instanceof File?t:$d([await t.arrayBuffer()],t.name);if(hM(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),$d(await kp(o),e,n)}let i=await kp(t);if(e||(e=dM(t)),!n?.type){let o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return $d(i,e,n)}async function kp(t){var e,n,i,o,s;let r=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)r.push(t);else if(rE(t))r.push(t instanceof Blob?t:await t.arrayBuffer());else if(pM(t))try{for(var l=!0,u=Wt(t),f;f=await u.next(),e=f.done,!e;l=!0){o=f.value,l=!1;let d=o;r.push(...await kp(d))}}catch(d){n={error:d}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{let d=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${yM(t)}`)}return r}function yM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var Ql=class{constructor(e){this._client=e}};Ql._key=[];function aE(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var wT=Object.freeze(Object.create(null)),vM=(t=aE)=>function(n,...i){if(n.length===1)return n[0];let o=!1,s=[],r=n.reduce((d,p,m)=>{var h,y,E;/[?#]/.test(p)&&(o=!0);let T=i[m],g=(o?encodeURIComponent:t)(""+T);return m!==i.length&&(T==null||typeof T=="object"&&T.toString===((E=Object.getPrototypeOf((y=Object.getPrototypeOf((h=T.hasOwnProperty)!==null&&h!==void 0?h:wT))!==null&&y!==void 0?y:wT))===null||E===void 0?void 0:E.toString))&&(g=T+"",s.push({start:d.length+p.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),d+p+(m===i.length?"":g)},""),l=r.split(/[?#]/,1)[0],u=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,f;for(;(f=u.exec(l))!==null;)s.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(s.sort((d,p)=>d.start-p.start),s.length>0){let d=0,p=s.reduce((m,h)=>{let y=" ".repeat(h.start-d),E="^".repeat(h.length);return d=h.start+h.length,m+y+E},"");throw new yt(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${r}
${p}`)}return r},Al=vM(aE);var Zl=class extends Ql{create(e,n){var i;let{api_version:o=this._client.apiVersion}=e,s=ql(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new yt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new yt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Al`/${o}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(Al`/${o}/interactions/${e}`,i)}cancel(e,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.post(Al`/${o}/interactions/${e}/cancel`,i)}get(e,n={},i){var o;let s=n??{},{api_version:r=this._client.apiVersion}=s,l=ql(s,["api_version"]);return this._client.get(Al`/${r}/interactions/${e}`,Object.assign(Object.assign({query:l},i),{stream:(o=n?.stream)!==null&&o!==void 0?o:!1}))}};Zl._key=Object.freeze(["interactions"]);var Wl=class extends Zl{};function SM(t){let e=0;for(let o of t)e+=o.length;let n=new Uint8Array(e),i=0;for(let o of t)n.set(o,i),i+=o.length;return n}var Cl;function Yp(t){let e;return(Cl??(e=new globalThis.TextEncoder,Cl=e.encode.bind(e)))(t)}var xl;function bT(t){let e;return(xl??(e=new globalThis.TextDecoder,xl=e.decode.bind(e)))(t)}var ls=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Yp(e):e;this.buffer=SM([this.buffer,n]);let i=[],o;for(;(o=TM(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(bT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,r=bT(this.buffer.subarray(0,s));i.push(r),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};ls.NEWLINE_CHARS=new Set([`
`,"\r"]);ls.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function TM(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function EM(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}var jl={off:0,error:200,warn:300,info:400,debug:500},RT=(t,e,n)=>{if(!!t){if(eM(jl,t))return t;at(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(jl))}`)}};function wr(){}function wl(t,e,n){return!e||jl[t]>jl[n]?wr:e[t].bind(e)}var _M={error:wr,warn:wr,info:wr,debug:wr},NT=new WeakMap;function at(t){var e;let n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return _M;let o=NT.get(n);if(o&&o[0]===i)return o[1];let s={error:wl("error",n,i),warn:wl("warn",n,i),info:wl("info",n,i),debug:wl("debug",n,i)};return NT.set(n,[i,s]),s}var Qi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ai=class{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let o=!1,s=i?at(i):console;function r(){return Zt(this,arguments,function*(){var u,f,d,p;if(o)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,y=Wt(AM(e,n)),E;E=yield O(y.next()),u=E.done,!u;h=!0){p=E.value,h=!1;let T=p;if(!m)if(T.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield O(JSON.parse(T.data))}catch(g){throw s.error("Could not parse message into JSON:",T.data),s.error("From chunk:",T.raw),g}}}catch(T){f={error:T}}finally{try{!h&&!u&&(d=y.return)&&(yield O(d.call(y)))}finally{if(f)throw f.error}}m=!0}catch(T){if(Np(T))return yield O(void 0);throw T}finally{m||n.abort()}})}return new Ai(r,n,i)}static fromReadableStream(e,n,i){let o=!1;function s(){return Zt(this,arguments,function*(){var u,f,d,p;let m=new ls,h=oE(e);try{for(var y=!0,E=Wt(h),T;T=yield O(E.next()),u=T.done,!u;y=!0){p=T.value,y=!1;let g=p;for(let v of m.decode(g))yield yield O(v)}}catch(g){f={error:g}}finally{try{!y&&!u&&(d=E.return)&&(yield O(d.call(E)))}finally{if(f)throw f.error}}for(let g of m.flush())yield yield O(g)})}function r(){return Zt(this,arguments,function*(){var u,f,d,p;if(o)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,y=Wt(s()),E;E=yield O(y.next()),u=E.done,!u;h=!0){p=E.value,h=!1;let T=p;m||T&&(yield yield O(JSON.parse(T)))}}catch(T){f={error:T}}finally{try{!h&&!u&&(d=y.return)&&(yield O(d.call(y)))}finally{if(f)throw f.error}}m=!0}catch(T){if(Np(T))return yield O(void 0);throw T}finally{m||n.abort()}})}return new Ai(r,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){let r=i.next();e.push(r),n.push(r)}return s.shift()}});return[new Ai(()=>o(e),this.controller,this.client),new Ai(()=>o(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return iE({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:s}=await n.next();if(s)return i.close();let r=Yp(JSON.stringify(o)+`
`);i.enqueue(r)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function AM(t,e){return Zt(this,arguments,function*(){var i,o,s,r;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new yt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new yt("Attempted to iterate over a response with no body");let l=new Dp,u=new ls,f=oE(t.body);try{for(var d=!0,p=Wt(CM(f)),m;m=yield O(p.next()),i=m.done,!i;d=!0){r=m.value,d=!1;let h=r;for(let y of u.decode(h)){let E=l.decode(y);E&&(yield yield O(E))}}}catch(h){o={error:h}}finally{try{!d&&!i&&(s=p.return)&&(yield O(s.call(p)))}finally{if(o)throw o.error}}for(let h of u.flush()){let y=l.decode(h);y&&(yield yield O(y))}})}function CM(t){return Zt(this,arguments,function*(){var n,i,o,s;let r=new Uint8Array;try{for(var l=!0,u=Wt(t),f;f=yield O(u.next()),n=f.done,!n;l=!0){s=f.value,l=!1;let d=s;if(d==null)continue;let p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Yp(d):d,m=new Uint8Array(r.length+p.length);m.set(r),m.set(p,r.length),r=m;let h;for(;(h=EM(r))!==-1;)yield yield O(r.slice(0,h)),r=r.slice(h)}}catch(d){i={error:d}}finally{try{!l&&!n&&(o=u.return)&&(yield O(o.call(u)))}finally{if(i)throw i.error}}r.length>0&&(yield yield O(r))})}var Dp=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,o]=xM(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function xM(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function wM(t,e){let{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:s}=e,r=await(async()=>{var l;if(e.options.stream)return at(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ai.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let u=n.headers.get("content-type"),f=(l=u?.split(";")[0])===null||l===void 0?void 0:l.trim();return f?.includes("application/json")||f?.endsWith("+json")?await n.json():await n.text()})();return at(t).debug(`[${i}] response parsed`,Qi({retryOfRequestLogID:o,url:n.url,status:n.status,body:r,durationMs:Date.now()-s})),r}var kr=class extends Promise{constructor(e,n,i=wM){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new kr(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var lE=Symbol("brand.privateNullableHeaders");function*bM(t){if(!t)return;if(lE in t){let{values:i,nulls:o}=t;yield*i.entries();for(let s of o)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():AT(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let s=AT(i[1])?i[1]:[i[1]],r=!1;for(let l of s)l!==void 0&&(e&&!r&&(r=!0,yield[o,null]),yield[o,l])}}var xr=t=>{let e=new Headers,n=new Set;for(let i of t){let o=new Set;for(let[s,r]of bM(i)){let l=s.toLowerCase();o.has(l)||(e.delete(s),o.add(l)),r===null?(e.delete(s),n.add(l)):(e.append(s,r),n.delete(l))}}return{[lE]:!0,values:e,nulls:n}};var Yd=t=>{var e,n,i,o,s,r;if(typeof globalThis.process<"u")return(i=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(r=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,t))===null||r===void 0?void 0:r.trim()};var uE,us=class{constructor(e){var n,i,o,s,r,l,u,{baseURL:f=Yd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Yd("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=ql(e,["baseURL","apiKey","apiVersion"]);let h=Object.assign(Object.assign({apiKey:d,apiVersion:p},m),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=(i=h.timeout)!==null&&i!==void 0?i:us.DEFAULT_TIMEOUT,this.logger=(o=h.logger)!==null&&o!==void 0?o:console;let y="warn";this.logLevel=y,this.logLevel=(r=(s=RT(h.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:RT(Yd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&r!==void 0?r:y,this.fetchOptions=h.fetchOptions,this.maxRetries=(l=h.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=h.fetch)!==null&&u!==void 0?u:lM(),this.encoder=fM,this._options=h,this.apiKey=d,this.apiVersion=p,this.clientAdapter=h.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){let n=xr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return xr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return xr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new yt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ts}`}defaultIdempotencyKey(){return`stainless-node-retry-${K1()}`}makeStatusError(e,n,i,o){return We.generate(e,n,i,o)}buildURL(e,n,i){let o=!this.baseURLOverridden()&&i||this.baseURL,s=Q1(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return j1(r)||(n=Object.assign(Object.assign({},r),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){let n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new kr(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var o,s,r;let l=await e,u=(o=l.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);let{req:f,url:d,timeout:p}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(f,{url:d,options:l});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(at(this).debug(`[${m}] sending request`,Qi({retryOfRequestLogID:i,method:l.method,url:d,options:l,headers:f.headers})),!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Ir;let E=new AbortController,T=await this.fetchWithTimeout(d,f,p,E).catch(Mp),g=Date.now();if(T instanceof globalThis.Error){let S=`retrying, ${n} attempts remaining`;if(!((r=l.signal)===null||r===void 0)&&r.aborted)throw new Ir;let _=Np(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(n)return at(this).info(`[${m}] connection ${_?"timed out":"failed"} - ${S}`),at(this).debug(`[${m}] connection ${_?"timed out":"failed"} (${S})`,Qi({retryOfRequestLogID:i,url:d,durationMs:g-y,message:T.message})),this.retryRequest(l,n,i??m);throw at(this).info(`[${m}] connection ${_?"timed out":"failed"} - error; no more retries left`),at(this).debug(`[${m}] connection ${_?"timed out":"failed"} (error; no more retries left)`,Qi({retryOfRequestLogID:i,url:d,durationMs:g-y,message:T.message})),_?new Fl:new as({cause:T})}let v=`[${m}${h}] ${f.method} ${d} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${g-y}ms`;if(!T.ok){let S=await this.shouldRetry(T);if(n&&S){let R=`retrying, ${n} attempts remaining`;return await cM(T.body),at(this).info(`${v} - ${R}`),at(this).debug(`[${m}] response error (${R})`,Qi({retryOfRequestLogID:i,url:T.url,status:T.status,headers:T.headers,durationMs:g-y})),this.retryRequest(l,n,i??m,T.headers)}let _=S?"error; no more retries left":"error; not retryable";at(this).info(`${v} - ${_}`);let x=await T.text().catch(R=>Mp(R).message),b=nM(x),A=b?void 0:x;throw at(this).debug(`[${m}] response error (${_})`,Qi({retryOfRequestLogID:i,url:T.url,status:T.status,headers:T.headers,message:A,durationMs:Date.now()-y})),this.makeStatusError(T.status,b,A,T.headers)}return at(this).info(v),at(this).debug(`[${m}] response start`,Qi({retryOfRequestLogID:i,url:T.url,status:T.status,headers:T.headers,durationMs:g-y})),{response:T,options:l,controller:E,requestLogID:m,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(e,n,i,o){let s=n||{},{signal:r,method:l}=s,u=ql(s,["signal","method"]);r&&r.addEventListener("abort",()=>o.abort());let f=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),u);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(f)}}async shouldRetry(e){let n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,o){var s;let r,l=o?.get("retry-after-ms");if(l){let f=parseFloat(l);Number.isNaN(f)||(r=f)}let u=o?.get("retry-after");if(u&&!r){let f=parseFloat(u);Number.isNaN(f)?r=Date.parse(u)-Date.now():r=f*1e3}if(!(r&&0<=r&&r<60*1e3)){let f=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,f)}return await iM(r),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){let s=n-e,r=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return r*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,o,s;let r=Object.assign({},e),{method:l,path:u,query:f,defaultBaseURL:d}=r,p=this.buildURL(u,f,d);"timeout"in r&&tM("timeout",r.timeout),r.timeout=(i=r.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:m,body:h}=this.buildBody({options:r}),y=await this.buildHeaders({options:e,method:l,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},r.signal&&{signal:r.signal}),globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"}),h&&{body:h}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=r.fetchOptions)!==null&&s!==void 0?s:{}),url:p,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let r=await this.authHeaders(e),l=xr([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),aM()),this._options.defaultHeaders,i,e.headers,r]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};let i=xr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:uM(e)}:this.encoder({body:e,headers:i})}};us.DEFAULT_TIMEOUT=6e4;var Pe=class extends us{constructor(){super(...arguments),this.interactions=new Wl(this)}};uE=Pe;Pe.GeminiNextGenAPIClient=uE;Pe.GeminiNextGenAPIClientError=yt;Pe.APIError=We;Pe.APIConnectionError=as;Pe.APIConnectionTimeoutError=Fl;Pe.APIUserAbortError=Ir;Pe.NotFoundError=$l;Pe.ConflictError=Yl;Pe.RateLimitError=Kl;Pe.BadRequestError=Vl;Pe.AuthenticationError=zl;Pe.InternalServerError=Xl;Pe.PermissionDeniedError=Bl;Pe.UnprocessableEntityError=Jl;Pe.toFile=gM;Pe.Interactions=Wl;function RM(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function NM(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function MM(t,e){let n={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(n,["sdkHttpResponse"],i),n}function IM(t,e){let n={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(n,["sdkHttpResponse"],i),n}function kM(t,e,n){let i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=a(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&c(e,["displayName"],o),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=a(t,["epochCount"]);e!==void 0&&s!=null&&c(e,["tuningTask","hyperparameters","epochCount"],s);let r=a(t,["learningRateMultiplier"]);if(r!=null&&c(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);let u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function DM(t,e,n){let i={},o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let h=a(t,["validationDataset"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec"],MT(h))}else if(o==="PREFERENCE_TUNING"){let h=a(t,["validationDataset"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec"],MT(h))}let s=a(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&c(e,["tunedModelDisplayName"],s);let r=a(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let h=a(t,["epochCount"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(l==="PREFERENCE_TUNING"){let h=a(t,["epochCount"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let h=a(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(u==="PREFERENCE_TUNING"){let h=a(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let h=a(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(f==="PREFERENCE_TUNING"){let h=a(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let h=a(t,["adapterSize"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(d==="PREFERENCE_TUNING"){let h=a(t,["adapterSize"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);let m=a(t,["beta"]);return e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function UM(t,e){let n={},i=a(t,["baseModel"]);i!=null&&c(n,["baseModel"],i);let o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);let s=a(t,["trainingDataset"]);s!=null&&$M(s);let r=a(t,["config"]);return r!=null&&kM(r,n),n}function PM(t,e){let n={},i=a(t,["baseModel"]);i!=null&&c(n,["baseModel"],i);let o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);let s=a(t,["trainingDataset"]);s!=null&&YM(s,n,e);let r=a(t,["config"]);return r!=null&&DM(r,n,e),n}function LM(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function HM(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function GM(t,e,n){let i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let s=a(t,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);let r=a(t,["filter"]);return e!==void 0&&r!=null&&c(e,["_query","filter"],r),i}function OM(t,e,n){let i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let s=a(t,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);let r=a(t,["filter"]);return e!==void 0&&r!=null&&c(e,["_query","filter"],r),i}function qM(t,e){let n={},i=a(t,["config"]);return i!=null&&GM(i,n),n}function FM(t,e){let n={},i=a(t,["config"]);return i!=null&&OM(i,n),n}function VM(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);let s=a(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>cE(l))),c(n,["tuningJobs"],r)}return n}function zM(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);let s=a(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Up(l))),c(n,["tuningJobs"],r)}return n}function BM(t,e){let n={},i=a(t,["name"]);i!=null&&c(n,["model"],i);let o=a(t,["name"]);return o!=null&&c(n,["endpoint"],o),n}function $M(t,e){let n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=a(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(n,["examples","examples"],o)}return n}function YM(t,e,n){let i={},o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let r=a(t,["gcsUri"]);e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){let r=a(t,["gcsUri"]);e!==void 0&&r!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=a(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){let r=a(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){let r=a(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function cE(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["name"]);o!=null&&c(n,["name"],o);let s=a(t,["state"]);s!=null&&c(n,["state"],GT(s));let r=a(t,["createTime"]);r!=null&&c(n,["createTime"],r);let l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);let u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);let f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);let d=a(t,["description"]);d!=null&&c(n,["description"],d);let p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);let m=a(t,["_self"]);return m!=null&&c(n,["tunedModel"],BM(m)),n}function Up(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["name"]);o!=null&&c(n,["name"],o);let s=a(t,["state"]);s!=null&&c(n,["state"],GT(s));let r=a(t,["createTime"]);r!=null&&c(n,["createTime"],r);let l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);let u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);let f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);let d=a(t,["error"]);d!=null&&c(n,["error"],d);let p=a(t,["description"]);p!=null&&c(n,["description"],p);let m=a(t,["baseModel"]);m!=null&&c(n,["baseModel"],m);let h=a(t,["tunedModel"]);h!=null&&c(n,["tunedModel"],h);let y=a(t,["preTunedModel"]);y!=null&&c(n,["preTunedModel"],y);let E=a(t,["supervisedTuningSpec"]);E!=null&&c(n,["supervisedTuningSpec"],E);let T=a(t,["preferenceOptimizationSpec"]);T!=null&&c(n,["preferenceOptimizationSpec"],T);let g=a(t,["tuningDataStats"]);g!=null&&c(n,["tuningDataStats"],g);let v=a(t,["encryptionSpec"]);v!=null&&c(n,["encryptionSpec"],v);let S=a(t,["partnerModelTuningSpec"]);S!=null&&c(n,["partnerModelTuningSpec"],S);let _=a(t,["customBaseModel"]);_!=null&&c(n,["customBaseModel"],_);let x=a(t,["experiment"]);x!=null&&c(n,["experiment"],x);let b=a(t,["labels"]);b!=null&&c(n,["labels"],b);let A=a(t,["outputUri"]);A!=null&&c(n,["outputUri"],A);let M=a(t,["pipelineJob"]);M!=null&&c(n,["pipelineJob"],M);let R=a(t,["serviceAccount"]);R!=null&&c(n,["serviceAccount"],R);let I=a(t,["tunedModelDisplayName"]);I!=null&&c(n,["tunedModelDisplayName"],I);let k=a(t,["veoTuningSpec"]);return k!=null&&c(n,["veoTuningSpec"],k),n}function JM(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["name"]);o!=null&&c(n,["name"],o);let s=a(t,["metadata"]);s!=null&&c(n,["metadata"],s);let r=a(t,["done"]);r!=null&&c(n,["done"],r);let l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function MT(t,e){let n={},i=a(t,["gcsUri"]);i!=null&&c(n,["validationDatasetUri"],i);let o=a(t,["vertexDatasetResource"]);return o!=null&&c(n,["validationDatasetUri"],o),n}var Pp=class extends jt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fn(qn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{let o=Object.assign({},n);return await this.tuneInternal(o)}else{let o=Object.assign({},n),s=await this.tuneMldevInternal(o),r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Kd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=HM(e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>Up(d))}else{let f=LM(e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>cE(d))}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=FM(e);return l=D("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=zM(d),m=new Ul;return Object.assign(m,p),m})}else{let f=qM(e);return l=D("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=VM(d),m=new Ul;return Object.assign(m,p),m})}}async cancel(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=NM(e);return l=D("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=IM(d),m=new Pl;return Object.assign(m,p),m})}else{let f=RM(e);return l=D("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=MM(d),m=new Pl;return Object.assign(m,p),m})}}async tuneInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=PM(e,e);return s=D("tuningJobs",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>Up(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=UM(e);return s=D("tunedModels",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>JM(u))}}};var Lp=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},KM=1024*1024*8,XM=3,QM=1e3,ZM=2,eu="x-goog-upload-status";async function WM(t,e,n){var i;let o=await fE(t,e,n),s=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[eu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function jM(t,e,n){var i;let o=await fE(t,e,n),s=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[eu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let r=kT(s),l=new Nr;return Object.assign(l,r),l}async function fE(t,e,n){var i,o;let s=0,r=0,l=new br(new Response),u="upload";for(s=t.size;r<s;){let f=Math.min(KM,s-r),d=t.slice(r,r+f);r+f>=s&&(u+=", finalize");let p=0,m=QM;for(;p<XM&&(l=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(r),"Content-Length":String(f)}}}),!(!((i=l?.headers)===null||i===void 0)&&i[eu]));)p++,await tI(m),m=m*ZM;if(r+=f,((o=l?.headers)===null||o===void 0?void 0:o[eu])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function eI(t){return{size:t.size,type:t.type}}function tI(t){return new Promise(e=>setTimeout(e,t))}var Hp=class{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WM(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jM(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eI(e)}};var Gp=class{create(e,n,i){return new Op(e,n,i)}},Op=class{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var IT="x-goog-api-key",qp=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(IT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(IT,this.apiKey)}}};var nI="gl-node/",en=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new Pe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let i=Ix(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let o=new qp(this.apiKey);this.apiClient=new Sp({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:nI+"web",uploader:new Hp,downloader:new Lp}),this.models=new Cp(this.apiClient),this.live=new _p(this.apiClient,o,new Gp),this.batches=new fp(this.apiClient),this.chats=new pp(this.models,this.apiClient),this.caches=new dp(this.apiClient),this.files=new hp(this.apiClient),this.operations=new xp(this.apiClient),this.authTokens=new wp(this.apiClient),this.tunings=new Pp(this.apiClient),this.fileSearchStores=new Rp(this.apiClient)}};var ms=require("obsidian");function dE(t){let e=atob(t),n=e.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=e.charCodeAt(o);return i}function Jp(t){let e="",n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function pE(t,e,n,i){let o=new Int16Array(t.buffer),s=o.length/i,r=e.createBuffer(i,s,n);for(let l=0;l<i;l++){let u=r.getChannelData(l);for(let f=0;f<s;f++)u[f]=o[f*i+l]/32768}return r}function mE(t){let e=t.length,n=new Int16Array(e);for(let i=0;i<e;i++){let o=Math.max(-1,Math.min(1,t[i]));n[i]=o<0?o*32768:o*32767}return n}var ou={};se(ou,{declaration:()=>iI,execute:()=>oI,instruction:()=>Kp});Ue();var iI={name:"list_directory",description:"Lists all available files in the vault using paths relative to vault root."},Kp="- list_directory: Use this to get an overview of the user's vault. All file paths are relative to vault root. Always call this if you are unsure of the available files.",oI=(t,e)=>{let n=On();return e.onSystem("Registry scanned",{name:"list_directory",filename:"Vault Root",files:n}),Promise.resolve({files:n})};var su={};se(su,{declaration:()=>sI,execute:()=>rI,instruction:()=>Qp});Ue();var hE=(t,e,n)=>{let i=t[e];return typeof i=="number"?i:n},Xp=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},sI={name:"list_vault_files",description:"Lists markdown files in the vault with pagination and sorting. Essential for large vaults.",parameters:{type:N.OBJECT,properties:{limit:{type:N.NUMBER,description:"Max number of files to return (default: 20)"},offset:{type:N.NUMBER,description:"Number of files to skip (default: 0)"},sortBy:{type:N.STRING,enum:["mtime","name","size"],description:"Property to sort by. mtime is last modified time."},sortOrder:{type:N.STRING,enum:["asc","desc"],description:"Sort order (default: desc)"},filter:{type:N.STRING,description:"Optional text filter for path or filename."}}}},Qp="- list_vault_files: Use this to explore large vaults. It supports paging and sorting. Default is most recently modified first.",rI=async(t,e)=>{let n=hE(t,"limit"),i=hE(t,"offset",0)??0,o=Xp(t,"sortBy"),s=Xp(t,"sortOrder"),r=Xp(t,"filter"),l=await Pd({limit:n,offset:i,sortBy:o,sortOrder:s,filter:r}),u=l.files.map(f=>f.path);return e.onSystem(`Vault files (${i}-${i+l.files.length} of ${l.total})`,{name:"list_vault_files",filename:"Vault Explorer",files:u}),l};var ru={};se(ru,{declaration:()=>aI,execute:()=>lI,instruction:()=>Zp});Ue();var aI={name:"get_folder_tree",description:"Lists all folders in the vault as a flat array to understand hierarchy. All paths are relative to vault root."},Zp="- get_folder_tree: Use this to see a simple list of all folders in the vault hierarchy. All paths are relative to vault root.",lI=(t,e)=>{let n=Ld();return e.onSystem("Folder structure scanned",{name:"get_folder_tree",filename:"Folder Tree",files:n}),Promise.resolve({folders:n})};var au={};se(au,{declaration:()=>uI,execute:()=>cI,instruction:()=>Wp});Ue();var uI={name:"dirlist",description:"Lists only directory structure, ignoring files, to understand vault hierarchy. All paths are relative to vault root."},Wp="- dirlist: Use this to see the pure directory structure of the vault without any file information. All paths are relative to vault root.",cI=(t,e)=>{let i=Hd().map(o=>({path:o.path||"/",type:"directory",hasChildren:o.children.length>0}));return e.onSystem("Directory structure scanned",{name:"dirlist",filename:"Directory List",directoryInfo:i}),Promise.resolve({directories:i})};var lu={};se(lu,{declaration:()=>dI,execute:()=>pI,instruction:()=>jp});Ue();Se();var fI=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},dI={name:"read_file",description:"Read the full content of a specified file using path relative to vault root.",parameters:{type:N.OBJECT,properties:{filename:{type:N.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},jp=`- read_file: Use this to ingest the contents of a note. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). You should read a file before proposing major edits to ensure context. Parameters:
  - filename: required, path to the file`,pI=async(t,e)=>{let n=fI(t,"filename");if(!n)throw new Error("Missing filename");let i=await gt(n);await Be(n),e.onSystem(`Opened ${n}`,{name:"read_file",filename:n,oldContent:i,newContent:i,additions:0,removals:0});let o=Oe(n);return e.onFileState(o,n),{content:i}};var uu={};se(uu,{declaration:()=>mI,execute:()=>hI,instruction:()=>em});Ue();Se();var gE=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},mI={name:"create_file",description:"Create a new file with initial content using path relative to vault root.",parameters:{type:N.OBJECT,properties:{filename:{type:N.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},content:{type:N.STRING}},required:["filename","content"]}},em='- create_file: Use this to initialize new notes in the vault. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). Always provide meaningful initial content.',hI=async(t,e)=>{let n=gE(t,"filename"),i=gE(t,"content")??"";if(!n)throw new Error("Missing filename");await Od(n,i),await Be(n),e.onSystem(`Created ${n}`,{name:"create_file",filename:n,oldContent:"",newContent:i,additions:i.split(`
`).length,removals:0});let o=Oe(n);return e.onFileState(o,n),{status:"created"}};var cu={};se(cu,{declaration:()=>gI,execute:()=>yI,instruction:()=>tm});Ue();Se();var yE=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},gI={name:"update_file",description:"Overwrite the entire content of an existing file.",parameters:{type:N.OBJECT,properties:{filename:{type:N.STRING},content:{type:N.STRING}},required:["filename","content"]}},tm="- update_file: Use this for total overwrites. For smaller changes, prefer edit_file.",yI=async(t,e)=>{let n=yE(t,"filename"),i=yE(t,"content")??"";if(!n)throw new Error("Missing filename");let o=await gt(n).catch(()=>"");await _i(n,i),await Be(n);let s=o.split(`
`),r=i.split(`
`),l=r.filter(d=>!s.includes(d)).length,u=s.filter(d=>!r.includes(d)).length;e.onSystem(`Updated ${n}`,{name:"update_file",filename:n,oldContent:o,newContent:i,additions:l,removals:u});let f=Oe(n);return e.onFileState(f,n),{status:"updated"}};var fu={};se(fu,{declaration:()=>SI,execute:()=>TI,instruction:()=>im});Ue();Se();var nm=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},vI=(t,e)=>{let n=t[e];return typeof n=="number"?n:void 0},SI={name:"edit_file",description:"Perform granular line-based edits on a file.",parameters:{type:N.OBJECT,properties:{filename:{type:N.STRING},operation:{type:N.STRING,enum:["append","replace_line","remove_line"]},text:{type:N.STRING},lineNumber:{type:N.NUMBER}},required:["filename","operation"]}},im="- edit_file: Use this for targeted modifications (appending, replacing lines, or removing lines).",TI=async(t,e)=>{let n=nm(t,"filename"),i=nm(t,"operation"),o=nm(t,"text"),s=vI(t,"lineNumber");if(!n||!i)throw new Error("Missing filename or operation");let r=await gt(n).catch(()=>"");await Vd(n,i,o,s);let l=await gt(n);await Be(n),e.onSystem(`Edited ${n}`,{name:"edit_file",filename:n,oldContent:r,newContent:l,additions:i==="append"||i==="replace_line"?1:0,removals:i==="remove_line"||i==="replace_line"?1:0});let u=Oe(n);return e.onFileState(u,n),{status:"edited"}};var du={};se(du,{declaration:()=>EI,execute:()=>_I,instruction:()=>om});Ue();Se();var vE=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},EI={name:"rename_file",description:"Rename an existing file to a new name.",parameters:{type:N.OBJECT,properties:{oldFilename:{type:N.STRING,description:"The current name of the file"},newFilename:{type:N.STRING,description:"The new name for the file"}},required:["oldFilename","newFilename"]}},om="- rename_file: Use this to change the name of a note. Ensure the new name follows markdown extension conventions if applicable.",_I=async(t,e)=>{let n=vE(t,"oldFilename"),i=vE(t,"newFilename");if(!n||!i)throw new Error("Missing oldFilename or newFilename");await qd(n,i),await Be(i),e.onSystem(`Renamed ${n} to ${i}`,{name:"rename_file",filename:n,oldContent:n,newContent:i});let o=Oe(i);return e.onFileState(o,i),{status:"renamed",from:n,to:i}};var pu={};se(pu,{declaration:()=>AI,execute:()=>CI,instruction:()=>sm});Ue();var SE=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},AI={name:"move_file",description:"Move a file from one folder to another using paths relative to vault root",parameters:{type:N.OBJECT,properties:{sourcePath:{type:N.STRING,description:'Current path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},targetPath:{type:N.STRING,description:'New path relative to vault root (e.g., "archive/projects/notes.md" or "notes.md" for root level)'}},required:["sourcePath","targetPath"]}},sm='- move_file: Move a file using paths relative to vault root. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level files). Use this to reorganize files between folders.',CI=async(t,e)=>{let n=SE(t,"sourcePath"),i=SE(t,"targetPath");if(!n||!i)throw new Error("Missing sourcePath or targetPath");return await Fd(n,i),e.onSystem(`Moved ${n} to ${i}`,{name:"move_file",filename:n,displayFormat:`<span style="color: #fb923c; font-weight: 600;">${n}</span> <span style="color: #6b7280;">\u2192</span> <span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"moved",from:n,to:i}};var mu={};se(mu,{declaration:()=>wI,execute:()=>bI,instruction:()=>rm});Ue();var xI=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},wI={name:"search_keyword",description:"Search for a keyword across all files in the vault.",parameters:{type:N.OBJECT,properties:{keyword:{type:N.STRING,description:"The text to search for"}},required:["keyword"]}},rm="- search_keyword: Fast plaintext search across all files.",bI=async(t,e)=>{let n=xI(t,"keyword");if(!n)throw new Error("Missing keyword");let i=await Cr(n,!1);return e.onSystem(`Search complete for "${n}"`,{name:"search_keyword",filename:`Global Search: "${n}"`,searchKeyword:n,searchResults:i,displayFormat:`Searching for "<strong>${n}</strong>" (${i.length} results)`}),{results:i}};var hu={};se(hu,{declaration:()=>RI,execute:()=>NI,instruction:()=>am});Ue();var TE=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},RI={name:"search_regexp",description:"Search using a regular expression across all files.",parameters:{type:N.OBJECT,properties:{pattern:{type:N.STRING,description:"The regex pattern"},flags:{type:N.STRING,description:'Optional regex flags (default: "i")'}},required:["pattern"]}},am="- search_regexp: Advanced regex search. Use this to identify files for global replacements.",NI=async(t,e)=>{let n=TE(t,"pattern"),i=TE(t,"flags")||"i";if(!n)throw new Error("Missing pattern");let o=await Cr(n,!0,i);return e.onSystem(`Regex search complete for /${n}/`,{name:"search_regexp",filename:`Regex: /${n}/${i}`,searchResults:o,displayFormat:`Regex search "<strong>/${n}/${i}</strong>" (${o.length} results)`}),{results:o}};var yu={};se(yu,{declaration:()=>MI,execute:()=>II,instruction:()=>lm});Ue();Se();var gu=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},MI={name:"search_and_replace_regex_in_file",description:"Search and replace text in a specific file using regex.",parameters:{type:N.OBJECT,properties:{filename:{type:N.STRING},pattern:{type:N.STRING},replacement:{type:N.STRING},flags:{type:N.STRING,description:'Optional regex flags (default: "g")'}},required:["filename","pattern","replacement"]}},lm="- search_and_replace_regex_in_file: Targeted regex replacement within a single node.",II=async(t,e)=>{let n=gu(t,"filename"),i=gu(t,"pattern"),o=gu(t,"replacement")??"",s=gu(t,"flags")||"g";if(!n||!i)throw new Error("Missing filename or pattern");let r=await gt(n),l=new RegExp(i,s),u=r.replace(l,o);await _i(n,u),await Be(n),e.onSystem(`Replaced in ${n}`,{name:"search_and_replace_regex_in_file",filename:n,oldContent:r,newContent:u,additions:1,removals:1});let f=Oe(n);return e.onFileState(f,n),{status:"success"}};var vu={};se(vu,{declaration:()=>kI,execute:()=>DI,instruction:()=>cm});Ue();Se();var um=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},kI={name:"search_and_replace_regex_global",description:"Search and replace text across ALL files using regex.",parameters:{type:N.OBJECT,properties:{pattern:{type:N.STRING},replacement:{type:N.STRING},flags:{type:N.STRING,description:'Optional regex flags (default: "g")'}},required:["pattern","replacement"]}},cm=`
GLOBAL SEARCH & REPLACE WORKFLOW:
1. When asked for a global replacement, ALWAYS run "search_regexp" first.
2. Report the number of files that will be updated.
3. ASK for explicit confirmation before calling "search_and_replace_regex_global".
4. After execution, report "updated all occurrences".`,DI=async(t,e)=>{let n=On(),i=um(t,"pattern"),o=um(t,"replacement")??"",s=um(t,"flags")||"g";if(!i)throw new Error("Missing pattern");let r=new RegExp(i,s),l=[],u=0,f=[];for(let d of n){let p=await gt(d);if(r.test(p)){let m=p.replace(r,o);await _i(d,m),l.push({filename:d,oldContent:p,newContent:m,additions:1,removals:1}),f.push(d),u++}}return e.onSystem(`Global replace complete: ${u} files updated`,{name:"search_and_replace_regex_global",filename:"Vault Wide",multiDiffs:l}),f.length>0&&(await Be(f[0]),e.onFileState("/",f)),{status:"success",filesUpdated:u}};var Su={};se(Su,{declaration:()=>UI,execute:()=>LI,instruction:()=>fm});var UI={name:"topic_switch",description:"Signal that a major topic shift has occurred. Provide a summary of the previous conversation.",parameters:{type:N.OBJECT,properties:{summary:{type:N.STRING,description:"A short one-sentence summary of the preceding conversation segment."}},required:["summary"]}},fm=`
TOPIC SWITCHING & PERSISTENCE: 
1. Monitor for significant topic switches in the conversation flow.
2. If a switch occurs, call "topic_switch" with a concise summary.
3. This will automatically trigger an ARCHIVE process.
4. Do NOT say "Done." after calling this. Proceed immediately to the next topic.`,PI=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},LI=(t,e)=>{let i=`x-chat-history-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.md`,o=PI(t,"summary")||"Topic switch";return e.onSystem("Context update",{name:"topic_switch",filename:i,newContent:o}),Promise.resolve({status:"context_reset"})};var dm={};se(dm,{declaration:()=>GI,execute:()=>qI,instruction:()=>OI});Ue();var HI=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},GI={name:"create_directory",description:"Create a new directory in the vault. Parent directories will be created automatically if they don't exist.",parameters:{type:N.OBJECT,properties:{path:{type:N.STRING,description:'Directory path relative to vault root (e.g., "projects/notes" or "archive" for root level)'}},required:["path"]}},OI="- create_directory: Use this to create new directories in the vault. All paths are relative to vault root. Parent directories are created automatically.",qI=async(t,e)=>{let n=HI(t,"path");if(!n)throw new Error("Missing directory path");await zd(n);let i=n.split("/").pop()||n,o=n.replace(/[^/]+$/,"");return e.onSystem(`Created directory ${n}`,{name:"create_directory",filename:n,displayFormat:`${o}<span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"created",path:n}};var pm={};se(pm,{declaration:()=>VI,execute:()=>BI,instruction:()=>zI});Ue();Se();var FI=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},VI={name:"delete_file",description:"Move an existing file from the vault to the trash folder (chat history/trash). Files in trash are hidden from directory listings.",parameters:{type:N.OBJECT,properties:{filename:{type:N.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},zI="- delete_file: Use this to move a note to the trash folder (chat history/trash). Files in trash are hidden from directory listings but can be recovered manually. All paths are relative to vault root.",BI=async(t,e)=>{let n=FI(t,"filename");if(!n)throw new Error("Missing filename");await Bd(n),e.onSystem(`Moved ${n} to trash`,{name:"delete_file",filename:n,oldContent:n,newContent:""});let i=Oe(n);return e.onFileState(i,null),{status:"moved_to_trash",filename:n}};var Tu={};se(Tu,{declaration:()=>YI,execute:()=>JI,instruction:()=>mm});Qt();var $I=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},YI={name:"internet_search",description:"Search the internet for real-time information, news, current events, or general knowledge outside the vault.",parameters:{type:N.OBJECT,properties:{query:{type:N.STRING,description:"The search query to look up on the web."}},required:["query"]}},mm="- internet_search: Use this to fetch real-time data or information not contained within the local vault. Always use this tool for questions about current events, celebrities, weather, or general knowledge.",JI=async(t,e)=>{let i=tt()?.manualApiKey?.trim();if(!i)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let o=$I(t,"query");if(!o)throw new Error("Missing query");e.onSystem(`Internet search: ${o}`,{name:"internet_search",filename:o,status:"pending"});let r=await new en({apiKey:i}).models.generateContent({model:"gemini-3-flash-preview",contents:o,config:{tools:[{googleSearch:{}}]}}),l=r.text||"No results found.",u=r.candidates?.[0]?.groundingMetadata?.groundingChunks||[];return e.onSystem(`Internet search: ${o}`,{name:"internet_search",filename:o,status:"success",newContent:l,groundingChunks:u}),{text:l,groundingChunks:u,searchQuery:o}};var Eu={};se(Eu,{declaration:()=>XI,execute:()=>QI,instruction:()=>hm});var KI=t=>t instanceof Error?t.message:String(t),XI={name:"end_conversation",description:"End the current voice conversation session and stop the voice interface.",parameters:{type:N.OBJECT,properties:{},required:[]}},hm=`
CONVERSATION CONTROL:
1. Use "end_conversation" when the user indicates they want to stop talking or end the conversation.
2. This will immediately stop the voice interface and disconnect the session.
3. Do NOT say "Done." after calling this. The session will simply end.`,QI=async(t,e)=>{try{return e.onSystem("Ending conversation...",{name:"end_conversation",filename:"Session",status:"success"}),e.onStopSession&&e.onStopSession(),{status:"conversation_ended"}}catch(n){return console.error(`Error in end_conversation: ${KI(n)}`),{status:"conversation_ended_with_errors"}}};var vm={};se(vm,{declaration:()=>WI,execute:()=>ek,instruction:()=>jI});Qt();Ue();Se();var gm=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},ym=t=>t instanceof Error?t.message:String(t),ZI=t=>{let e=atob(t),n=e.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=e.charCodeAt(o);return i},WI={name:"generate_image_from_context",description:"Generate an image based on the current context or provided prompt using Gemini API and save it to the vault.",parameters:{type:N.OBJECT,properties:{prompt:{type:N.STRING,description:"The prompt describing what image to generate. If not provided, will use current context."},filename:{type:N.STRING,description:'The filename to save the image as (e.g., "generated-image.png"). If not provided, will auto-generate.'},currentFolder:{type:N.STRING,description:"The folder path where to save the image. If not provided, will use active file's folder."}},required:[]}},jI="- generate_image_from_context: Use this to create images based on conversation context or specific prompts. Images are saved to the current vault directory.",ek=async(t,e)=>{let i=tt()?.manualApiKey?.trim();if(!i)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let o=new en({apiKey:i}),s=gm(t,"prompt");s||(s="Generate an image based on the current conversation context and topic being discussed.");try{let r=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:s}),l="";if(r.candidates&&r.candidates.length>0){let h=r.candidates[0];if(h.content&&h.content.parts){for(let y of h.content.parts)if(y.inlineData&&y.inlineData.data){l=y.inlineData.data;break}}}if(!l)throw new Error("No image data returned from API");let u=gm(t,"filename");u||(u=`generated-image-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.png`),u.match(/\.(png|jpg|jpeg|gif|webp)$/i)||(u+=".png");let f=ZI(l);console.error("=== DEBUG generate_image_from_context: STARTING FILE SAVE ==="),console.error(`DEBUG: Image data length: ${l.length} characters`),console.error(`DEBUG: Binary data size: ${f.byteLength} bytes`),console.error(`DEBUG: First 100 chars of base64: ${l.substring(0,100)}`);let d=gm(t,"currentFolder")||"";if(console.error(`DEBUG: currentFolder from args: "${d}"`),!d){let h=ve();if(console.error(`DEBUG: getObsidianApp() returned: ${h?"app exists":"NULL"}`),h&&h.workspace){console.error("DEBUG: app.workspace exists");let y=h.workspace.getActiveFile();console.error(`DEBUG: activeFile: ${y?y.path:"NULL"}`),y&&y.parent?(d=y.parent.path,console.error(`DEBUG: currentFolder from activeFile.parent: "${d}"`)):console.error("DEBUG: No activeFile or no parent - currentFolder stays empty")}else console.error("DEBUG: No app or no workspace - currentFolder stays empty")}let p=d?`${d}/${u}`:u;console.error(`DEBUG: Final fullFilename to save: "${p}"`),console.error(`DEBUG: filename only: "${u}"`),console.error(`DEBUG: About to call createBinaryFile with fullFilename="${p}", binaryData.byteLength=${f.byteLength}`);try{let h=await Gd(p,f);console.error(`DEBUG: createBinaryFile returned: "${h}"`)}catch(h){throw console.error("DEBUG: createBinaryFile THREW ERROR:",h),h}console.error("=== DEBUG generate_image_from_context: FILE SAVE COMPLETE ==="),e.onSystem(`Generated image: ${u}`,{name:"generate_image_from_context",filename:u,newContent:`Generated image (${f.byteLength} bytes)`,description:`Image generated from prompt: ${s}`});let m=Oe(p);return e.onFileState(m,u),{filename:u,filePath:p,size:f.byteLength,type:u.split(".").pop()||"png",targetFolder:d,description:`Image generated from prompt: ${s}`}}catch(r){console.error("Image generation error:",r),console.error("Error details:",JSON.stringify(r,null,2));let l=`Failed to generate image: ${ym(r)}`;throw ym(r).includes("model")&&(l+=`

This might be due to an incorrect model name or insufficient API permissions for image generation.`),ym(r).includes("API key")&&(l+=`

Please check your Gemini API key configuration.`),new Error(l)}};var Sm={};se(Sm,{declaration:()=>tk,execute:()=>ik,instruction:()=>nk});Se();var EE=t=>t instanceof Error?t.message:String(t),tk={name:"reveal_active_pane",description:"Reveals and displays information about the last active text editor in Obsidian, including file path, view type, and editor state. Uses getActiveFile() and getLastOpenFiles() for accurate results."},nk="- reveal_active_pane: Use this to get information about the last active text editor in Obsidian, including what file was most recently edited, the view type, and editor details. Uses getActiveFile() for accurate results.",ik=(t,e)=>{let n=ve();if(!n||!n.workspace)return e.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"reveal_active_pane",filename:"Active Pane",error:"Obsidian workspace not available"}),Promise.resolve({error:"Obsidian workspace not available"});try{let i=n.workspace,o=i.getActiveFile(),s=i.getLastOpenFiles(),r=i.activeLeaf,l=o;if(!r||r.view.getViewType()!=="markdown"){let m=i.getLeavesOfType("markdown");r=m.find(h=>h.view.file===o)||m[0]||null}if(!r&&!l)return e.onSystem("No active text editor found",{name:"reveal_active_pane",filename:"Active Editor",status:"error",error:"No active text editor currently available"}),Promise.resolve({error:"No active text editor currently available"});let u=r?.view,f=u?.getState(),d=u?.file||l,p={viewType:u?.getViewType()||"unknown",leafType:r?.constructor.name||"none",isPinned:r?.pinned||!1,isRoot:r?.root||!1,isHidden:r?.hidden||!1,hasParent:!!r?.parent,side:r?.getSide?.()||"unknown",width:r?.width||0,height:r?.height||0,x:r?.x||0,y:r?.y||0,filePath:d?d.path:null,fileName:d?d.name:null,fileExtension:d?d.extension:null,fileSize:d?d.stat?.size:null,fileModified:d?d.stat?.mtime:null,viewState:f,mode:f?.mode||null,source:f?.source||null,editorInfo:u?.editor?{cursor:u.editor.getCursor?.(),selection:u.editor.getSelection?.(),lineCount:u.editor.lineCount?.(),isFocused:u.editor.hasFocus?.()}:null,lastOpenFiles:s,isActiveFile:!!o,hasActiveLeaf:!!r};return e.onSystem("Active pane information retrieved",{name:"reveal_active_pane",filename:p.fileName||"Active Pane",status:"success",paneInfo:p}),Promise.resolve({paneInfo:p})}catch(i){return e.onSystem("Error retrieving active pane information",{name:"reveal_active_pane",filename:"Active Pane",status:"error",error:EE(i)}),Promise.resolve({error:EE(i)})}};var Tm={};se(Tm,{declaration:()=>ok,execute:()=>rk,instruction:()=>sk});Se();var _E=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},ok={name:"open_folder_in_system",description:"Opens the specified folder in the system file browser/finder."},sk='- open_folder_in_system: Use this to open a folder in the system file browser. Takes a folder path as argument (e.g., path: "documents/notes"). Use "." or empty path for vault root.',rk=async(t,e)=>{let n=ve();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"open_folder_in_system",filename:"System Browser",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};try{let i=_E(t,"path")||_E(t,"folder")||".",o=n.vault,s,r;if(i==="."||i===""||i==="/")s=o.adapter.getBasePath(),r="Vault Root";else{let l=o.getAbstractFileByPath(i);if(!l)return e.onSystem(`Path not found: ${i}`,{name:"open_folder_in_system",filename:"System Browser",status:"error",error:`Path "${i}" does not exist in vault`}),{error:`Path "${i}" does not exist in vault`};if(l.extension!==void 0){let u=l.parent?.path||"";s=u?o.adapter.getFullPath(u):o.adapter.getBasePath(),r=l.parent?.name||"Vault Root"}else s=o.adapter.getFullPath(i),r=l.name}if(n.vault.adapter.openPath)await n.vault.adapter.openPath(s);else{let l=n.openWithDefaultApp;l&&await l(s)}return e.onSystem("Opened folder in system browser",{name:"open_folder_in_system",filename:r,status:"success",folderPath:i,systemPath:s}),{success:!0,folderPath:i,systemPath:s,targetName:r,message:`Folder "${r}" opened in system browser`}}catch(i){return e.onSystem("Error opening folder in system browser",{name:"open_folder_in_system",filename:"System Browser",status:"error",error:i.message||String(i)}),{error:i.message||String(i)}}};var _u={};se(_u,{declaration:()=>ak,execute:()=>ck,instruction:()=>Am});Se();var _m=require("obsidian");Qt();var ak={name:"image_search",description:"Search for images on the internet and preview them. Click on any image in the preview to download it to the vault.",parameters:{type:"object",properties:{query:{type:"string",description:"The search query to find images."},count:{type:"number",description:"Number of images to show in preview (default: 3, max: 10)."},auto_download:{type:"boolean",description:"Whether to automatically download images (default: false)."},folder:{type:"string",description:"Target folder path (optional, defaults to current folder or assets folder)."},filename_prefix:{type:"string",description:"Prefix for generated filenames (optional)."}},required:["query"]}},Am="- image_search: Use this to search for images and preview them. Click on any image in the preview to download it to the vault.",Em=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},lk=(t,e,n)=>{let i=t[e];return typeof i=="number"?i:n},uk=(t,e,n)=>{let i=t[e];return typeof i=="boolean"?i:n},AE=t=>t instanceof Error?t.message:String(t),ck=async(t,e)=>{let n=ve();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"image_search",filename:"Image Search",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=Em(t,"query"),o=lk(t,"count",3),s=uk(t,"auto_download",!1),r=Em(t,"folder"),l=Em(t,"filename_prefix");if(!i)return{error:"Missing image search query"};try{e.onSystem(`Image search: ${i}`,{name:"image_search",filename:i,status:"pending"});let u=Math.min(Math.max(1,Math.floor(o)||3),10),f=r;if(!f){let m=n.workspace.getActiveFile();m?f=m.parent?.path||"":f="assets"}f&&!await n.vault.adapter.exists(f)&&await n.vault.createFolder(f);let d=await fk(i,Math.max(u,3));if(!d||d.length===0)return e.onSystem("No images found for the search query",{name:"image_search",filename:i,status:"error",error:"No images found"}),{error:"No images found for the search query"};let p=d.slice(0,u);if(console.debug("=== DEBUG: Search Results ==="),console.debug("Total search results found:",d.length),console.debug("Results for preview:",p),console.debug("Auto download:",s),console.debug("=== END DEBUG: Search Results ==="),e.onSystem(`Found ${d.length} images for "${i}". Click any image to download:`,{name:"image_search",filename:i,status:"search_results",searchResults:p,totalFound:d.length,targetFolder:f}),s){let m=[];for(let h=0;h<Math.min(p.length,u);h++){let y=p[h];try{let E=await dk(n,y,f,l||i,h+1);m.push(E)}catch(E){console.error(`Failed to download image ${h+1}:`,E)}}if(m.length>0){let h=`Downloaded ${m.length} image${m.length>1?"s":""} to ${f}`;return e.onSystem(h,{name:"image_search",filename:i,status:"success",downloadedImages:m}),{query:i,downloadedImages:m,targetFolder:f,totalFound:d.length,totalDownloaded:m.length}}}return{query:i,searchResults:p,targetFolder:f,totalFound:d.length,auto_download:s}}catch(u){return e.onSystem("Error during image search and download",{name:"image_search",filename:i,status:"error",error:AE(u)}),{error:AE(u)}}};function CE(){let t=ve();t&&t.setting&&(t.setting.open(),t.setting.openTabById("hermes-voice-assistant"))}async function fk(t,e){try{let i=(await Sl())?.serperApiKey?.trim();if(!i)throw console.error("Serper API key not found"),CE(),new Error("Serper API key not found. Please set your Serper API key in the plugin settings. Get 2,500 free credits at https://serper.dev/");let o="https://google.serper.dev/images";console.debug("Fetching images from Serper.dev API...");let s=await(0,_m.requestUrl)({url:o,method:"POST",headers:{"X-API-KEY":i,"Content-Type":"application/json"},body:JSON.stringify({q:t,num:Math.min(e,10)})});if(s.status>=400)throw console.error("Serper API error:",s.status,s.text),s.status===401||s.status===403?(CE(),new Error("Invalid Serper API key. Please check your API key in the plugin settings.")):new Error(`Serper API error: ${s.status}`);let r=s.json;if(!r.images||r.images.length===0)return console.debug("No images found for query:",t),[];let l=r.images.map(u=>({url:u.imageUrl,title:u.title,description:u.source||"",image:{thumbnail:u.thumbnailUrl||u.imageUrl,contextLink:u.link,width:u.imageWidth,height:u.imageHeight}}));return console.debug(`Found ${l.length} images for query: ${t}`),l}catch(n){throw console.error("Image search error:",n),n}}async function dk(t,e,n,i,o){try{console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image result:",e),console.debug("Target folder:",n),console.debug("Filename prefix:",i),console.debug("Index:",o);let s=Date.now(),r=Math.random().toString(36).substring(2,8),l=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),u=pk(e.url)||"jpg",f=`${l}-${o}-${s}-${r}.${u}`,d=n?`${n}/${f}`:f;console.debug("Generated filename:",f),console.debug("File path:",d),console.debug("Extension:",u),console.debug("Starting download from URL:",e.url);let p=await(0,_m.requestUrl)({url:e.url,method:"GET"});if(p.status>=400)throw new Error(`HTTP error! status: ${p.status}`);let m=p.arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Buffer type:",m.constructor.name),console.debug("Saving to vault at path:",d),await t.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:f,filePath:d,url:e.url,title:e.title,size:m.byteLength,type:u};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(s){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",s),console.error("Image result that failed:",e),console.error("=== END DEBUG ERROR ==="),s}}function pk(t){try{let n=new URL(t).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var Cm={};se(Cm,{declaration:()=>hk,execute:()=>yk,instruction:()=>gk});Se();var wE=require("obsidian"),Au=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},mk=(t,e,n)=>{let i=t[e];return typeof i=="number"?i:n},xE=t=>t instanceof Error?t.message:String(t),hk={name:"download_image",description:"Download a specific image from a URL to the vault.",parameters:{type:"object",properties:{imageUrl:{type:"string",description:"The URL of the image to download."},title:{type:"string",description:"The title of the image for filename generation."},query:{type:"string",description:"The original search query for filename context."},index:{type:"number",description:"The index of the image in search results."},folder:{type:"string",description:"Target folder path (optional)."}},required:["imageUrl","title","query"]}},gk="- download_image: Use this to download a specific image from a URL to the vault.",yk=async(t,e)=>{let n=ve();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"download_image",filename:"Image Download",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=Au(t,"imageUrl"),o=Au(t,"title"),s=Au(t,"query"),r=mk(t,"index",1),l=Au(t,"folder");if(!i||!o||!s)return{error:"Missing required image download parameters"};try{let u=l;if(!u){let d=n.workspace.getActiveFile();d?u=d.parent?.path||"":u="assets"}u&&!await n.vault.adapter.exists(u)&&await n.vault.createFolder(u);let f=await vk(n,{url:i,title:o},u,s,r);return e.onSystem(`Downloaded image: ${f.filename}`,{name:"download_image",filename:f.filename,status:"success",downloadedImages:[f]}),f}catch(u){return e.onSystem("Error downloading image",{name:"download_image",filename:o,status:"error",error:xE(u)}),{error:xE(u)}}};async function vk(t,e,n,i,o){try{let s=Date.now(),r=Math.random().toString(36).substring(2,8),l=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),u=Sk(e.url)||"jpg",f=`${l}-${o}-${s}-${r}.${u}`,d=n?`${n}/${f}`:f;console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image URL:",e.url),console.debug("Target folder:",n),console.debug("Filename:",f),console.debug("File path:",d);let m=(await(0,wE.requestUrl)({url:e.url,method:"GET"})).arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Saving to vault at path:",d),await t.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:f,filePath:d,url:e.url,title:e.title,size:m.byteLength,type:u,targetFolder:n};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(s){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",s),console.error("Image result that failed:",e),console.error("=== END DEBUG ERROR ==="),s}}function Sk(t){try{let n=new URL(t).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var xm={};se(xm,{declaration:()=>Ek,execute:()=>Ak,instruction:()=>_k});Se();Qt();var Tk=(t,e,n)=>{let i=t[e];return typeof i=="number"?i:n},bE=t=>t instanceof Error?t.message:String(t),Ek={name:"list_trash",description:"List the most recent files in the trash folder. Shows up to 100 files sorted by deletion time (most recent first).",parameters:{type:N.OBJECT,properties:{limit:{type:N.NUMBER,description:"Maximum number of files to show (default: 20, max: 100)."}}}},_k="- list_trash: Use this to list files in the trash folder. Shows recently deleted files that can be restored.",Ak=(t,e)=>{let n=ve();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"list_trash",filename:"Trash",error:"Obsidian vault not available"}),Promise.resolve({error:"Obsidian vault not available"});let i=Tk(t,"limit",20),o=Math.min(Math.max(1,Math.floor(i)||20),100);try{e.onSystem("Scanning trash folder...",{name:"list_trash",filename:"Trash",status:"pending"});let l=`${tt()?.chatHistoryFolder||"chat-history"}/trash`;if(!n.vault.getAbstractFileByPath(l))return e.onSystem("Trash folder is empty or does not exist",{name:"list_trash",filename:"Trash",status:"success",files:[]}),Promise.resolve({files:[],total:0,message:"Trash folder is empty"});let f=n.vault.getMarkdownFiles().filter(h=>h.path.startsWith(l+"/")).map(h=>({path:h.path,name:h.name,originalName:Ck(h.name),trashTimestamp:RE(h.name),deletionDate:xk(RE(h.name)),size:h.stat.size,mtime:h.stat.mtime})).filter(h=>h.trashTimestamp!==null).sort((h,y)=>{let E=h.deletionDate?.getTime()||0;return(y.deletionDate?.getTime()||0)-E}),d=f.length,m=f.slice(0,o).map(h=>({trashPath:h.path,originalName:h.originalName,trashFilename:h.name,deletionDate:h.deletionDate?.toISOString()||"",formattedDeletionDate:h.deletionDate?.toLocaleString()||"",size:h.size,canRestore:!0}));return e.onSystem(`Found ${d} files in trash${d>o?` (showing ${o} most recent)`:""}`,{name:"list_trash",filename:"Trash",status:"success",files:m.map(h=>`${h.originalName} (${h.formattedDeletionDate||"unknown date"})`),totalItems:d,shownItems:m.length}),Promise.resolve({files:m,total:d,shown:m.length,trashFolderPath:l})}catch(s){return e.onSystem("Error listing trash files",{name:"list_trash",filename:"Trash",status:"error",error:bE(s)}),Promise.resolve({error:bE(s)})}};function Ck(t){let e=t.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(e)return e[1];let n=t.match(/^\d+-(.+)$/);return n?n[1]:t}function RE(t){let e=t.match(/^(\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z)-/);if(e)return e[1].replace(/-/g,":").replace("T","T").replace(/(\d{4}-\d{2}-\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})Z/,"$1T$2:$3:$4.$5Z");let n=t.match(/^(\d{13})-/);return n?n[1]:null}function xk(t){if(!t)return null;try{return t.includes("T")&&t.includes("Z")?new Date(t):/^\d{13}$/.test(t)?new Date(parseInt(t)):null}catch{return null}}var wm={};se(wm,{declaration:()=>wk,execute:()=>Rk,instruction:()=>bk});Se();Qt();var NE=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},ME=t=>t instanceof Error?t.message:String(t),wk={name:"restore_from_trash",description:"Restore a file from the trash folder to its original location or a specified location.",parameters:{type:N.OBJECT,properties:{trash_filename:{type:N.STRING,description:'The filename in trash (as shown by list_trash, e.g., "2024-01-25T15-30-45-123Z-my-note.md")'},target_path:{type:N.STRING,description:"Optional: Target path where to restore the file. If not provided, attempts to restore to original location."}},required:["trash_filename"]}},bk="- restore_from_trash: Use this to restore a file from trash. Provide the trash filename from list_trash. Optionally specify where to restore it.",Rk=async(t,e)=>{let n=ve();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"restore_from_trash",filename:"Trash",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=NE(t,"trash_filename"),o=NE(t,"target_path");if(!i)return e.onSystem("Error: trash_filename is required",{name:"restore_from_trash",filename:"Trash",status:"error",error:"Missing required parameter: trash_filename"}),{error:"trash_filename is required"};try{e.onSystem(`Restoring ${i}...`,{name:"restore_from_trash",filename:i,status:"pending"});let l=`${tt()?.chatHistoryFolder||"chat-history"}/trash`,u=i.includes("/")?i:`${l}/${i}`,f=n.vault.getAbstractFileByPath(u);if(!f)return e.onSystem(`File not found in trash: ${i}`,{name:"restore_from_trash",filename:i,status:"error",error:"File not found in trash"}),{error:`File not found in trash: ${i}`};let d=Nk(f.name),p=o;if(!p&&(p=d,d.includes("/"))){let y=Oe(d);n.vault.getAbstractFileByPath(y)||await n.vault.createFolder(y)}if(n.vault.getAbstractFileByPath(p))return e.onSystem(`Target file already exists: ${p}`,{name:"restore_from_trash",filename:i,status:"error",error:"Target file already exists",targetPath:p}),{error:`Target file already exists: ${p}. Please specify a different target_path or delete the existing file first.`,targetPath:p,trashPath:u};await n.fileManager.renameFile(f,p),await Be(p),e.onSystem(`Successfully restored ${d} to ${p}`,{name:"restore_from_trash",filename:d,status:"success",originalPath:u,restoredPath:p});let h=Oe(p);return e.onFileState(h,d),{success:!0,originalFilename:d,trashPath:u,restoredPath:p,message:`Successfully restored ${d} to ${p}`}}catch(s){return e.onSystem("Error restoring file from trash",{name:"restore_from_trash",filename:i,status:"error",error:ME(s)}),{error:ME(s)}}};function Nk(t){let e=t.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(e)return e[1];let n=t.match(/^\d+-(.+)$/);return n?n[1]:t}var bm={};se(bm,{declaration:()=>kk,execute:()=>Uk,instruction:()=>Dk});Se();var Mk=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},Ik=t=>t instanceof Error?t.message:String(t),kk={name:"get_obsidian_commands",description:"Lists all available Obsidian commands that can be executed.",parameters:{type:N.OBJECT,properties:{filter:{type:N.STRING,description:"Optional text filter to search for specific commands by name or description."}}}},Dk="- get_obsidian_commands: Use this to list all available Obsidian commands. You can optionally filter commands by name or description.",Uk=(t,e)=>{let n=Mk(t,"filter");try{let i=ve();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands,s=Object.entries(o).map(([u,f])=>({id:u,name:f.name,description:f.editor?.name||f.name})),r=s;if(n){let u=n.toLowerCase();r=s.filter(f=>f.name.toLowerCase().includes(u)||f.description.toLowerCase().includes(u)||f.id.toLowerCase().includes(u))}r.sort((u,f)=>u.name.localeCompare(f.name));let l=r.map(u=>`${u.name} (${u.id})`);return e.onSystem(`Obsidian commands (${r.length} total)`,{name:"get_obsidian_commands",filename:"Command Registry",files:l}),Promise.resolve({commands:r,total:s.length,filtered:r.length,filter:n||null})}catch(i){throw new Error(`Failed to get Obsidian commands: ${Ik(i)}`)}};var Rm={};se(Rm,{declaration:()=>Hk,execute:()=>Ok,instruction:()=>Gk});Se();var Pk=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},Lk=t=>t instanceof Error?t.message:String(t),Hk={name:"run_obsidian_command",description:"Executes an Obsidian command by its command ID.",parameters:{type:N.OBJECT,properties:{commandId:{type:N.STRING,description:'The command ID to execute (e.g., "editor:toggle-bold" or "workspace:open-command-palette").'}},required:["commandId"]}},Gk="- run_obsidian_command: Use this to execute an Obsidian command by its command ID. Use get_obsidian_commands first to find available commands and their IDs.",Ok=async(t,e)=>{let n=Pk(t,"commandId");if(!n)throw new Error("Missing commandId");try{let i=ve();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands[n];if(!o)throw new Error(`Command not found: ${n}`);await i.commands.executeCommandById(n);let s=o.name||n;return e.onSystem(`Executed: ${s}`,{name:"run_obsidian_command",filename:"Command Execution",status:"success"}),{success:!0,commandId:n,commandName:s,executedAt:new Date().toISOString()}}catch(i){let o=Lk(i);throw e.onSystem(`Command execution failed: ${o}`,{name:"run_obsidian_command",filename:"Command Execution",status:"error",error:o}),new Error(`Failed to execute command ${n}: ${o}`)}};var Cu=t=>typeof t=="object"&&t!==null,IE=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},kE={list_directory:ou,list_vault_files:su,get_folder_tree:ru,dirlist:au,read_file:lu,create_file:uu,create_directory:dm,delete_file:pm,update_file:cu,edit_file:fu,rename_file:du,move_file:pu,search_keyword:mu,search_regexp:hu,search_and_replace_regex_in_file:yu,search_and_replace_regex_global:vu,topic_switch:Su,internet_search:Tu,generate_image_from_context:vm,end_conversation:Eu,reveal_active_pane:Sm,open_folder_in_system:Tm,image_search:_u,download_image:Cm,list_trash:xm,restore_from_trash:wm,get_obsidian_commands:bm,run_obsidian_command:Rm},ji=Object.values(kE).map(t=>t.declaration),eo=async(t,e,n,i,o)=>{let s=performance.now(),r=kE[t];if(!r){let f={toolName:t,content:JSON.stringify(e,null,2),contentSize:JSON.stringify(e).length,apiCall:"executeCommand"};throw n.onLog(`Tool not found: ${t}`,"error",void 0,f),new Error(`Command ${t} not found`)}let l=i||`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;i||n.onSystem(`${t.replace(/_/g," ").toUpperCase()}...`,{id:l,name:t,filename:IE(e,"filename")||(t==="internet_search"?"Web":"Registry"),status:"pending"});let u={...n,onSystem:(f,d)=>{n.onSystem(f,{...d,id:l})}};try{let f=o?{...e,currentFolder:o}:e,d=await r.execute(f,u),p=qk(t,d,u),m=Math.round(performance.now()-s);return n.onLog(`Executed ${t} in ${m}ms`,"action",m),p}catch(f){let d=Math.round(performance.now()-s),p=f instanceof Error?f.message:String(f),m=f instanceof Error?f.stack:void 0,h={toolName:t,content:JSON.stringify(e,null,2),contentSize:JSON.stringify(e).length,stack:m,apiCall:"tool_execution"};throw n.onLog(`Error in ${t}: ${p}`,"error",d,h),u.onSystem(`Error: ${p}`,{name:t,filename:IE(e,"filename")||(t==="internet_search"?"Web":"unknown"),error:p,status:"error"}),f}};function qk(t,e,n){if(Cu(e)&&Array.isArray(e.files)){let o=e.files.length;if(o>100){let s=e.files.slice(0,100),r=Math.ceil(o/100),l=1,u=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} items (Page ${l} of ${r}).

To see more results, consider:
- Using list_vault_files with pagination (limit/offset parameters)
- Using search_keyword or search_regexp for targeted searches
- Using get_folder_tree for folder structure only
- Adding a filter parameter to narrow results

Current results show first ${100} items only.`;return console.debug(`Tool result truncated: ${t}, ${100}/${o} items, page ${l}/${r}`),n.onSystem(`Registry Scanned (TRUNCATED: ${100}/${o} items)`,{name:t,filename:"Vault Root",files:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r}),{...e,files:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r,truncationNotice:u}}}if(Cu(e)&&Array.isArray(e.folders)){let o=e.folders.length;if(o>100){let s=e.folders.slice(0,100),r=Math.ceil(o/100),l=1,u=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} folders (Page ${l} of ${r}).

For large folder structures, consider:
- Using search_keyword to find specific folders
- Using list_vault_files with filter parameter
- Asking for a specific subfolder path

Current results show first ${100} folders only.`;return console.debug(`Folder structure truncated: ${t}, ${100}/${o} folders, page ${l}/${r}`),n.onSystem(`Folder Structure Scanned (TRUNCATED: ${100}/${o} folders)`,{name:t,filename:"Folder Tree",files:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r}),{...e,folders:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r,truncationNotice:u}}}if(Cu(e)&&Array.isArray(e.directories)){let o=(l,u=0)=>{let f=[],d=u;return l.forEach(p=>{if(f.push({path:p.path,type:"directory",hasChildren:p.children&&p.children.length>0}),d++,p.children&&p.children.length>0){let m=o(p.children,d);f=f.concat(m.items),d=m.total}}),{items:f,total:d}},{items:s,total:r}=o(e.directories);if(r>100){let l=s.slice(0,100),u=Math.ceil(r/100),f=1,d=`

=== DIRECTORY LIST TRUNCATED ===
Showing ${100} of ${r} directories (Page ${f} of ${u}).

For large directory structures, consider:
- Using search_keyword to find specific directories
- Using list_vault_files with filter parameter
- Asking for a specific directory path
- Using get_folder_tree for a simple folder list

Current results show first ${100} directories only.`;return console.debug(`Directory list truncated: ${t}, ${100}/${r} directories, page ${f}/${u}`),n.onSystem(`Directory Structure Scanned (TRUNCATED: ${100}/${r} directories)`,{name:t,filename:"Directory List",files:l.map(p=>p.path),truncated:!0,totalItems:r,shownItems:100,currentPage:f,totalPages:u,directoryInfo:l}),{...e,directories:l,truncated:!0,totalItems:r,shownItems:100,currentPage:f,totalPages:u,truncationNotice:d}}}if(Cu(e)&&Array.isArray(e.results)){let o=e.results.length;if(o>100){let s=e.results.slice(0,100),r=Math.ceil(o/100),l=1,u=`

=== SEARCH RESULTS TRUNCATED ===
Showing ${100} of ${o} results (Page ${l} of ${r}).

For more results, consider:
- Refining your search terms
- Using pagination parameters if available
- Adding filters to narrow the search

Current results show first ${100} matches only.`;return console.debug(`Search results truncated: ${t}, ${100}/${o} results, page ${l}/${r}`),{...e,results:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r,truncationNotice:u}}}if(typeof e=="string"&&e.length>5e4){let o=e.substring(0,5e4),s=`

=== CONTENT TRUNCATED ===
Showing first 50,000 characters of ${e.length} total characters.

For large files, consider:
- Reading specific sections with line numbers
- Searching for specific content within the file
- Using more targeted read operations

Current content shows first 50,000 characters only.`;return console.debug(`Content truncated: ${t}, 50000/${e.length} chars`),o+s}return e}async function xu(t,e={maxRetries:2,delay:1e3}){let n;for(let i=0;i<=e.maxRetries;i++)try{return await t()}catch(o){if(n=o instanceof Error?o:new Error(String(o)),i===e.maxRetries)throw new Error("could not recover!");e.onRetry&&e.onRetry(i+1,n),await new Promise(s=>setTimeout(s,e.delay))}throw n}var ps=class{constructor(e=2){this.maxRetries=e;this.attempts=0}get retryCount(){return this.attempts}get canRetry(){return this.attempts<this.maxRetries}increment(){this.attempts++}reset(){this.attempts=0}get shouldBail(){return this.attempts>=this.maxRetries}};var zn=(t,e)=>{let n=t[e];return typeof n=="string"?n:void 0},Nm=t=>typeof t=="object"&&t!==null,je=t=>t instanceof Error?t.message:String(t),DE=t=>{if(t instanceof Error)return t.stack},wu=class{constructor(e){this.callbacks=e;this.session=null;this.sessionPromise=null;this.inputAudioContext=null;this.outputAudioContext=null;this.nextStartTime=0;this.sources=new Set;this.inputWorkletNode=null;this.inputWorkletGain=null;this.inputStream=null;this.currentInputText="";this.currentOutputText="";this.currentFolder="/";this.currentNote=null;this.retryCounter=new ps(2);this.storedApiKey="";this.storedSettings=null;this.hasArchived=!1}async getSession(){if(this.session)return this.session;if(this.sessionPromise===null)throw new Error("Session not initialized");return this.session=await this.sessionPromise,this.session}async start(e,n,i){this.storedApiKey=e,this.storedSettings=n,this.storedInitialState=i,this.retryCounter.reset(),await xu(async()=>{this.retryCounter.increment(),await this.performStart(e,n,i)},{maxRetries:2,delay:1e3,onRetry:(o,s)=>{this.callbacks.onLog(`Connection failed, retrying attempt ${o}/2...`,"info"),this.callbacks.onSystemMessage(`Connection failed, retrying attempt ${o}/2...`)}})}async performStart(e,n,i){try{i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onStatusChange("CONNECTING"),this.callbacks.onLog("Negotiating Uplink...","info");let o=new en({apiKey:e}),s=window.AudioContext||window.webkitAudioContext;if(!s)throw new Error("AudioContext is not supported in this environment");this.inputAudioContext=new s({sampleRate:16e3}),this.outputAudioContext=new s({sampleRate:24e3}),this.nextStartTime=0;let r=await navigator.mediaDevices.getUserMedia({audio:!0});this.inputStream=r;let l=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`,u=`${n.systemInstruction}
${l}

${n.customContext}`.trim();console.debug(`System instruction: ${u.length} chars, folder: ${this.currentFolder}, note: ${this.currentNote}`),this.callbacks.onLog(`System instruction size: ${u.length} chars`,"info"),console.debug(`Session config: model=gemini-2.5-flash-native-audio-preview-12-2025, tools=${ji.length}, voice=${n.voiceName}`),this.callbacks.onLog("Initializing Gemini live connection...","info"),this.sessionPromise=o.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[ss.AUDIO],systemInstruction:u,inputAudioTranscription:{},outputAudioTranscription:{},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:n.voiceName}}},tools:[{functionDeclarations:ji}]},callbacks:{onopen:()=>{this.callbacks.onStatusChange("CONNECTED"),this.callbacks.onLog("Uplink synchronized. Voice channel active.","info"),this.sessionPromise!==null&&this.startMicStreaming(r)},onmessage:f=>{this.handleServerMessage(f)},onerror:f=>{console.error(`Gemini connection error: ${je(f)}`),this.callbacks.onLog(`Connection error: ${je(f)}`,"error"),this.callbacks.onStatusChange("ERROR"),this.callbacks.onSystemMessage(`Connection error: ${je(f)}`)},onclose:f=>{let d=f.reason||String(f.code)||"Connection dropped";if(f.code!==1e3&&f.code!==1001){console.error(`Voice connection closed: code=${f.code}, reason=${d}`);let m={toolName:"GeminiVoiceAssistant",apiCall:"live.connect",content:`Code: ${f.code}, Reason: ${d}`,timestamp:new Date().toISOString()};this.callbacks.onLog(`CONNECTION DROPPED: ${d}`,"error",void 0,m),this.callbacks.onSystemMessage(`CONNECTION DROPPED: ${d}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:d})}else this.callbacks.onLog(`Uplink Closed: ${d}`,"info");this.stop()}}}),this.session=await this.sessionPromise}catch(o){this.callbacks.onStatusChange("ERROR"),console.error(`Voice interface error: ${je(o)}`);let s={toolName:"GeminiVoiceAssistant",apiCall:"start",stack:DE(o),content:je(o),requestSize:o.requestSize,responseSize:o.responseSize,platform:{isMobileApp:ms.Platform.isMobileApp,isDesktopApp:ms.Platform.isDesktopApp,isMacOS:ms.Platform.isMacOS,isWin:ms.Platform.isWin,isLinux:ms.Platform.isLinux},audioContextState:this.inputAudioContext?.state,timestamp:new Date().toISOString()};throw this.callbacks.onLog(`Link Initialization Failed: ${je(o)}`,"error",void 0,s),this.callbacks.onSystemMessage(`Error: ${je(o)}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:je(o)}),o}}async startMicStreaming(e){if(!this.inputAudioContext)return;let n=await this.getSession(),i=this.inputAudioContext.createMediaStreamSource(e),o=`
      class HermesAudioProcessor extends AudioWorkletProcessor {
        process(inputs) {
          const input = inputs[0];
          if (input && input[0]) {
            this.port.postMessage(input[0]);
          }
          return true;
        }
      }
      registerProcessor('hermes-audio-processor', HermesAudioProcessor);
    `,s=new Blob([o],{type:"application/javascript"}),r=URL.createObjectURL(s);try{await this.inputAudioContext.audioWorklet.addModule(r)}finally{URL.revokeObjectURL(r)}let l=new AudioWorkletNode(this.inputAudioContext,"hermes-audio-processor");this.inputWorkletNode=l;let u=this.inputAudioContext.createGain();u.gain.value=0,this.inputWorkletGain=u,l.port.onmessage=f=>{let d=f.data;if(!d||d.length===0)return;let p=0;for(let T=0;T<d.length;T++)p+=d[T]*d[T];let m=Math.sqrt(p/d.length);this.callbacks.onVolume(m);let h=mE(d),y=Jp(new Uint8Array(h.buffer)),E=y.length;E>5e4&&console.debug(`Audio streaming: ${E} bytes, session active`);try{n.sendRealtimeInput({media:{data:y,mimeType:"audio/pcm;rate=16000"}})}catch(T){if(console.error(`Audio streaming error: ${je(T)}, data size: ${y.length}`),je(T).includes("CLOSING")||je(T).includes("CLOSED")){console.debug("Session is closing, stopping audio streaming");return}}},i.connect(l),l.connect(u),u.connect(this.inputAudioContext.destination)}async handleServerMessage(e){let n=e.serverContent;if(n?.usageMetadata&&this.callbacks.onUsageUpdate(n.usageMetadata),e.serverContent?.inputTranscription?.text&&(this.currentInputText+=e.serverContent.inputTranscription.text,this.callbacks.onTranscription("user",this.currentInputText,!1)),e.serverContent?.outputTranscription&&(this.currentOutputText+=e.serverContent.outputTranscription.text,this.callbacks.onTranscription("model",this.currentOutputText,!1)),e.serverContent?.turnComplete&&(this.currentInputText&&(this.callbacks.onTranscription("user",this.currentInputText,!0),this.currentInputText=""),this.currentOutputText&&(this.callbacks.onTranscription("model",this.currentOutputText,!0),this.currentOutputText="")),e.toolCall)for(let o of e.toolCall.functionCalls){if(o.name==="end_conversation"){console.debug("Processing end_conversation tool call");try{let p=await eo(o.name,o.args,{onLog:(m,h,y)=>this.callbacks.onLog(m,h,y),onSystem:(m,h)=>this.callbacks.onSystemMessage(m,h),onFileState:(m,h)=>{this.currentFolder=m,this.currentNote=Array.isArray(h)?h[h.length-1]:h,this.callbacks.onFileStateChange(m,h)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},void 0,this.currentFolder);console.debug("end_conversation executed successfully, session ending");continue}catch(p){console.error(`end_conversation failed: ${je(p)}`),this.stop();continue}}let s=`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,r=Nm(o.args)?o.args:{},u={generate_image_from_context:"Image Generation",create_file:"File Creation",delete_file:"File Deletion",edit_file:"File Editing",update_file:"File Update",move_file:"File Move",rename_file:"File Rename",create_directory:"Directory Creation",list_directory:"Vault Scan",list_vault_files:"File Explorer",dirlist:"Directory Structure",get_folder_tree:"Folder Tree",read_file:"File Reading",search_keyword:"Keyword Search",search_regexp:"Pattern Search",search_replace_file:"File Search & Replace",search_replace_global:"Global Search & Replace",internet_search:"Web Search",reveal_active_pane:"Active Pane Info",open_folder_in_system:"System File Browser",end_conversation:"Session End",topic_switch:"Topic Switch"}[o.name]||o.name.replace(/_/g," ").toUpperCase(),f=!1,d=zn(r,"filename")||(o.name==="internet_search"?"Web":"Registry");this.callbacks.onSystemMessage(`${u}...`,{id:s,name:o.name,filename:d,status:"pending"});try{let p=await eo(o.name,r,{onLog:(T,g,v)=>this.callbacks.onLog(T,g,v),onSystem:(T,g)=>{this.callbacks.onSystemMessage(T,g),g?.status==="success"&&(f=!0)},onFileState:(T,g)=>{this.currentFolder=T,this.currentNote=Array.isArray(g)?g[g.length-1]:g,this.callbacks.onFileStateChange(T,g)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},s,this.currentFolder),m=await this.getSession(),h=JSON.stringify({result:p});console.debug(`Tool response: ${o.name}, size: ${h.length} chars`);let y=Nm(p)?p:void 0,E=y&&typeof y.text=="string"?y.text:void 0;if(!f){let T="";if(o.name==="create_file"||o.name==="create_directory"){let g=zn(r,"filename")||zn(r,"path");if(g){let v=g.lastIndexOf("/");T=`Created in: ${v===-1?"/":g.substring(0,v+1)}`}}else if(o.name==="move_file"||o.name==="rename_file"){let g=zn(r,"sourcePath")||zn(r,"oldPath"),v=zn(r,"targetPath")||zn(r,"newPath");g&&v&&(T=`Moved from: ${g} to: ${v}`)}else if(o.name==="update_file"||o.name==="edit_file"){let g=zn(r,"filename");g&&(T=`Updated: ${g}`)}else if(o.name==="delete_file"){let g=zn(r,"filename");g&&(T=`Deleted: ${g}`)}else E?T=E:typeof p=="string"&&(T=p);if(T){let g=Array.isArray(y?.groundingChunks)?y?.groundingChunks:[],v=Array.isArray(y?.files)?y?.files.filter(b=>typeof b=="string"):void 0,S=Array.isArray(y?.directories)?y?.directories.map(b=>Nm(b)&&typeof b.path=="string"?b.path:null).filter(b=>Boolean(b)):void 0,_=Array.isArray(y?.folders)?y?.folders.filter(b=>typeof b=="string"):void 0,x=Array.isArray(y?.directoryInfo)?y?.directoryInfo:void 0;this.callbacks.onSystemMessage(`${u} Complete`,{id:s,name:o.name,filename:d,status:"success",newContent:T,groundingChunks:g,files:v||S||_,directoryInfo:x})}}try{(await this.getSession()).sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{result:p}}})}catch(T){console.error(`Failed to send tool response: ${je(T)}`)}}catch(p){let m=je(p);console.error(`Voice interface tool error: ${o.name} - ${m}`);let h={toolName:o.name,content:JSON.stringify(r,null,2),contentSize:JSON.stringify(r).length,stack:DE(p),apiCall:"executeCommand",timestamp:new Date().toISOString(),currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${o.name}: ${m}`,"error",void 0,h),this.callbacks.onSystemMessage(`Error in ${o.name}: ${m}`,{id:s,name:o.name,filename:d,status:"error",error:m});try{let y=await this.getSession();console.debug(`Tool error response: ${o.name} - ${m}`),y.sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{error:m}}})}catch(y){console.error(`Failed to send tool error response: ${je(y)}`)}}}let i=e.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(i&&this.outputAudioContext){let o=pE(dE(i),this.outputAudioContext,24e3,1);this.nextStartTime=Math.max(this.nextStartTime,this.outputAudioContext.currentTime);let s=this.outputAudioContext.createBufferSource();s.buffer=o,s.connect(this.outputAudioContext.destination),s.onended=()=>this.sources.delete(s),s.start(this.nextStartTime),this.nextStartTime+=o.duration,this.sources.add(s)}e.serverContent?.interrupted&&(this.sources.forEach(o=>{try{o.stop()}catch(s){console.debug("Audio source stop failed",s)}}),this.sources.clear(),this.nextStartTime=0,this.callbacks.onInterrupted())}stop(){if(this.callbacks.onArchiveConversation&&!this.hasArchived&&(this.hasArchived=!0,console.warn("SHOULD SAVE HISTORY: voiceInterface.stop() calling onArchiveConversation"),this.callbacks.onArchiveConversation().catch(e=>{console.warn("Failed to archive conversation on stop:",e)})),this.session){try{this.session.close()}catch(e){console.debug("Session close failed",e)}this.session=null}this.sessionPromise=null,this.inputWorkletNode&&(this.inputWorkletNode.disconnect(),this.inputWorkletNode=null),this.inputWorkletGain&&(this.inputWorkletGain.disconnect(),this.inputWorkletGain=null),this.inputStream&&(this.inputStream.getTracks().forEach(e=>e.stop()),this.inputStream=null),this.inputAudioContext&&(this.inputAudioContext.close(),this.inputAudioContext=null),this.outputAudioContext&&(this.outputAudioContext.close(),this.outputAudioContext=null),this.sources.forEach(e=>{try{e.stop()}catch(n){console.debug("Output source stop failed",n)}}),this.sources.clear(),this.currentInputText="",this.currentOutputText="",this.callbacks.onStatusChange("DISCONNECTED"),this.callbacks.onVolume(0)}sendText(e){if(this.sessionPromise===null)return;let n=Jp(new TextEncoder().encode(e));console.debug(`Text input: ${e.length} chars, encoded: ${n.length} bytes`),this.callbacks.onLog(`Sending text input: ${e.length} chars`,"info"),(async()=>{try{(await this.getSession()).sendRealtimeInput({media:{data:n,mimeType:"text/plain"}}),console.debug("Text input sent successfully")}catch(i){console.error(`Text input error: ${je(i)}, text length: ${e.length}`),this.callbacks.onLog(`Text input failed: ${je(i)}`,"error")}})()}};var bu=class{constructor(e){this.callbacks=e;this.ai=null;this.chatHistory=[];this.currentFolder="/";this.currentNote=null;this.systemInstruction="";this.model="gemini-2.0-flash";this.retryCounter=new ps(2)}initialize(e,n,i){i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onLog("Initializing text interface...","info"),this.ai=new en({apiKey:e});let o=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`;this.systemInstruction=`${n.systemInstruction}
${o}

${n.customContext}`.trim(),this.callbacks.onLog("Text interface ready.","info")}async sendMessage(e){if(!this.ai){this.callbacks.onLog("Text interface not initialized","error");return}this.chatHistory.push({role:"user",parts:[{text:e}]}),this.callbacks.onTranscription("user",e,!0),await xu(async()=>{this.retryCounter.increment(),await this.processConversation()},{maxRetries:2,delay:1e3,onRetry:(n,i)=>{this.callbacks.onLog(`Text API failed, retrying attempt ${n}/2...`,"info"),this.callbacks.onSystemMessage(`Text API failed, retrying attempt ${n}/2...`)}})}async processConversation(){if(!this.ai)return;this.callbacks.onTranscription("model","...",!1);let e=await this.ai.models.generateContent({model:this.model,contents:this.chatHistory,config:{systemInstruction:this.systemInstruction,tools:[{functionDeclarations:ji}]}});e.usageMetadata&&this.callbacks.onUsageUpdate({promptTokenCount:e.usageMetadata.promptTokenCount,candidatesTokenCount:e.usageMetadata.candidatesTokenCount,totalTokenCount:e.usageMetadata.totalTokenCount});let n=e.candidates?.[0];if(!n?.content){this.callbacks.onTranscription("model","No response received.",!0);return}let i=n.content.parts?.filter(o=>!!o.functionCall);if(i&&i.length>0){this.chatHistory.push(n.content);let o=[];for(let s of i){let r=s.functionCall;try{let l=await eo(r.name,r.args,{onLog:(u,f,d)=>this.callbacks.onLog(u,f,d),onSystem:(u,f)=>this.callbacks.onSystemMessage(u,f),onFileState:(u,f)=>{this.currentFolder=u,this.currentNote=Array.isArray(f)?f[f.length-1]:f,this.callbacks.onFileStateChange(u,f)},onStopSession:()=>{this.callbacks.onLog("Conversation ended via tool call","info")},onArchiveConversation:this.callbacks.onArchiveConversation},this.currentFolder);o.push({functionResponse:{name:r.name,response:{result:l}}})}catch(l){let u=l instanceof Error?l.message:String(l),f=l instanceof Error?l.stack:void 0;console.error(`Text interface tool error: ${r.name} - ${u}`);let d={toolName:r.name,content:JSON.stringify(r.args,null,2),contentSize:JSON.stringify(r.args).length,stack:f,apiCall:"executeCommand",timestamp:new Date().toISOString(),model:this.model,currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${r.name}: ${u}`,"error",void 0,d),this.callbacks.onSystemMessage(`Error in ${r.name}: ${u}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:u}),o.push({functionResponse:{name:r.name,response:{error:u}}})}}this.chatHistory.push({role:"user",parts:o}),await this.processConversation()}else{let s=n.content.parts?.filter(r=>r.text)?.map(r=>r.text).join("")||"";this.chatHistory.push(n.content),this.callbacks.onTranscription("model",s,!0)}}setApiKey(e){this.ai=new en({apiKey:e})}clearHistory(){this.chatHistory=[]}getHistory(){return this.chatHistory}async generateSummary(e){if(!this.ai)throw new Error("Text interface not initialized");try{return(await this.ai.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:`Please provide a concise summary (2-3 sentences) of the following conversation:

${e}`}]}]})).candidates?.[0]?.content?.parts?.filter(s=>s.text)?.map(s=>s.text).join("")||""}catch(n){let i=n instanceof Error?n.message:String(n);throw new Error(`Failed to generate summary: ${i}`)}}};var Fk=[Kp,Qp,Zp,Wp,jp,em,tm,im,om,sm,rm,am,lm,cm,fm,mm,Am,hm].join(`

`),Bn=`You are an advanced voice assistant (Hermes) with file system access and internet capabilities.
Vault structure: Flat markdown files.

CORE RESPONSE RULES:
1. NO CONFIRMATIONS: Do NOT say "Done.", "Finished.", or any variation of completion confirmation after a tool call. The UI handles state visualization.
2. INFORMATIONAL TOOLS: When calling "read_file", "list_directory", "list_vault_files", or "internet_search", remain silent unless the user asked a specific question about the content.
3. BATCH ACTIONS: If performing multiple modifications, wait until all are finished, then provide a single concise summary.
4. NO "DONE" ON TOPICS: Do not say "Done" or confirm when switching topics. Just proceed with the new context.
5. Conciseness is mandatory. Avoid conversational filler.
6. LARGE VAULTS: If the vault seems large, prefer "list_vault_files" with a limit or filter over "list_directory" to stay within token limits.
7. WEB SEARCH RESTRICTION: Only use "internet_search" if the user specifically asks about it or explicitly requests web search.
8. FILE NAMING: Do not ever read out .md at the end of files. Omit full path, just read out the file names, unless it's relevant!

IMPORTANT PATH CONVENTION:
ALL FILE PATHS MUST BE RELATIVE TO VAULT ROOT. Examples:
- "notes.md" (root level file)
- "projects/ideas.md" (file in projects folder)
- "archive/2024/report.md" (nested folder structure)

WIKI LINK CONVENTION:
DEFAULT TO WIKI LINKS EVERYWHERE WITHOUT PATH. 
Insert images using a Wikilink with only the filename.
- Use [[notes]] instead of [notes.md](notes.md)
- Never use "file:" prefix or full file extensions in wiki links
- use ![[image.png|title]] for images!

AVAILABLE TOOL CAPABILITIES:
${Fk}`;Se();Se();var PE=t=>t instanceof Error?t.message:String(t),Mm=async(t,e,n,i)=>{let o="";if(typeof t=="object"&&t!==null){let k=t,X=k.summary??k.title??k;o=String(X)}else o=String(t??"");o=o||"Conversation";let r=(k=>{let X=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","must","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their"]);return k.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(Ee=>Ee.length>=3&&!X.has(Ee)).slice(0,5).join("-")})(o),l=new Date,u=l.toISOString().split("T")[0],f=r.toLowerCase().replace(/[^a-z0-9-]/g,"-").substring(0,40),d=n||"chat-history",m=(()=>{let k=new Date().toISOString().split("T")[0],X=`hermes-chat-order-${k}`;try{let z=0;if(Nt())globalThis._hermesChatOrder||(globalThis._hermesChatOrder={}),z=globalThis._hermesChatOrder[k]||0,globalThis._hermesChatOrder[k]=z+1;else{z=parseInt(localStorage.getItem(X)||"0");let Ee=z+1;localStorage.setItem(X,Ee.toString())}return(z+1).toString().padStart(2,"0")}catch(z){return console.warn("Failed to get order within day:",z),"01"}})(),h=`${d}/${u}-${m}-${f||"conversation"}.md`,y=e.filter(k=>!(k.id==="welcome-init"||k.role==="model"&&k.text.trim().toLowerCase().replace(/\./g,"")==="done")),E=y.map(k=>k.timestamp).filter(k=>k>0),T=E.length>0?new Date(E[0]).toISOString():l.toISOString(),g=E.length>0?new Date(E[E.length-1]).toISOString():l.toISOString(),v=E.length>1?Math.round((E[E.length-1]-E[0])/1e3):0,S=y.map(k=>k.text.toLowerCase()).join(" "),_=new Set;(S.includes("file")||S.includes("edit")||S.includes("create"))&&_.add("file-management"),(S.includes("search")||S.includes("find")||S.includes("look"))&&_.add("search"),(S.includes("image")||S.includes("generate")||S.includes("create"))&&_.add("creation"),(S.includes("rename")||S.includes("move")||S.includes("organize"))&&_.add("organization"),(S.includes("help")||S.includes("how")||S.includes("question"))&&_.add("help"),v>300&&_.add("long-conversation"),v<60&&_.add("quick-chat");let x=Array.from(_).map(k=>`- ${k}`).join(`
  `),b=[],A=[],M=null;y.forEach(k=>{M===null||k.role!==M?(A.length>0&&b.push(A),A=[k],M=k.role):A.push(k)}),A.length>0&&b.push(A);let R=b.map((k,X)=>{let z=k[0],Ee="",vn=k.map($e=>$e.text).join(" ").trim(),rn=$e=>$e.replace(/(?:file:\s*|)([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))/g,"[[$1]]").replace(/"([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))"/g,"[[$1]]").replace(/`([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))`/g,"[[$1]]");return z.role==="user"?Ee=rn(vn):z.role==="model"?Ee=`> ${rn(vn).split(`
`).join(`
> `)}`:z.role==="system"&&(Ee=k.map(te=>{if(te.toolData?.name==="rename_file")return`**RENAME** ~~${te.toolData.oldContent}~~ -> [[${te.toolData.newContent}]]`;if(te.toolData?.name==="topic_switch")return`## ${te.toolData.newContent}`;{let bi=`\`\`\`system
${te.text}
\`\`\``;if(te.toolData){let ro=`[[${te.toolData.filename}]]`;te.toolData.oldContent!==void 0&&te.toolData.newContent!==void 0&&te.toolData.oldContent!==te.toolData.newContent?te.toolData.oldContent&&te.toolData.oldContent.trim()!==""&&!te.toolData.newContent.includes(te.toolData.oldContent)?bi+=`

${ro}

--- Removed
\`\`\`markdown
${te.toolData.oldContent||"(empty)"}
\`\`\`

+++ Added
\`\`\`markdown
${te.toolData.newContent||"(empty)"}
\`\`\``:bi+=`

${ro}
\`\`\`markdown
${te.toolData.newContent}
\`\`\``:(te.toolData.name==="read_file"||te.toolData.name==="create_file")&&(bi+=`

${ro}
\`\`\`markdown
${te.toolData.newContent}
\`\`\``)}return bi}}).join(`

`)),Ee}).filter(k=>k.trim()!=="").join(`

`),I="";if(i&&y.length>0)try{let k=y.filter(X=>X.role==="user"||X.role==="model").map(X=>`${X.role}: ${X.text}`).join(`
`);k.trim()&&(I=await i.generateSummary(k))}catch(k){console.warn("Failed to generate AI summary:",PE(k))}try{let{createFile:k,createDirectory:X}=await Promise.resolve().then(()=>(Ue(),lS));await X(d);let z=`---
title: ${o.length>50?o.substring(0,47)+"...":o}
date: ${T}
end_date: ${g}
duration: ${v}
tags:
  ${x}
format: hermes-chat-archive
summary: ${o.replace(/"/g,'\\"')}
${I?`ai_summary: ${I.replace(/"/g,'\\"')}`:""}
---

`;return await k(h,`${z}${R}`),`Segment archived to ${h}`}catch(k){throw new Error(`Persistence Failure: ${PE(k)}`)}};Se();var hs=Y(oe()),Bk=({onOpenSettings:t,className:e=""})=>(0,hs.jsx)("button",{onClick:()=>{if(Nt())try{let{app:i}=window;i&&i.setting&&(i.setting.open(),i.setting.openTabById("hermes-voice-assistant"))}catch(i){console.warn("Failed to open Obsidian settings:",i),t()}else t()},className:`p-2 hermes-text-muted hermes-hover:text-normal transition-all ${e}`,title:"System Settings",children:(0,hs.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,hs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,hs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),OE=Bk;var it=Y(oe()),$k=({status:t,showLogs:e,onToggleLogs:n,onOpenSettings:i,isListening:o,onStopSession:s})=>(0,it.jsxs)("header",{className:`relative flex items-center justify-between px-6 py-2 hermes-border-b shrink-0 z-50 ${o?"hermes-header-bg-listening":"hermes-header-bg"}`,children:[(0,it.jsx)("div",{className:"flex items-center space-x-6",children:(0,it.jsx)("div",{className:"flex flex-col",children:(0,it.jsx)("h1",{className:"text-lg font-semibold hermes-text-normal",children:"Hermes"})})}),o&&(0,it.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center",children:(0,it.jsx)("button",{onClick:s,className:"w-[52px] h-[52px] flex items-center justify-center bg-green-600 text-white rounded-full transition-all hover:bg-green-700 active:scale-95 shadow-lg shadow-green-600/50",title:"Stop Listening",children:(0,it.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,it.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),(0,it.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,it.jsx)("path",{d:"M12 7v4"}),(0,it.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"16"}),(0,it.jsx)("line",{x1:"16",y1:"16",x2:"16",y2:"16"})]})})}),(0,it.jsx)("div",{className:"flex items-center space-x-1",children:(0,it.jsx)(OE,{onOpenSettings:i})})]}),qE=$k;var q=Y(oe()),Yk=["Default","Professional","Friendly","Creative","Technical"],Jk=({isOpen:t,onClose:e,voiceName:n,setVoiceName:i,customContext:o,setCustomContext:s,systemInstruction:r,setSystemInstruction:l,manualApiKey:u,setManualApiKey:f,serperApiKey:d,setSerperApiKey:p,onUpdateApiKey:m})=>t?(0,q.jsx)("div",{className:"fixed inset-0 z-[200] hermes-bg-tertiary/95 backdrop-blur-md flex items-center justify-center p-8 animate-in fade-in duration-300",children:(0,q.jsxs)("div",{className:"max-w-3xl w-full space-y-8 hermes-glass p-12 rounded-3xl shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,q.jsxs)("div",{className:"flex justify-between items-start hermes-border-b pb-8",children:[(0,q.jsxs)("div",{children:[(0,q.jsx)("h2",{className:"text-2xl font-semibold mb-2 hermes-text-normal",children:"Settings"}),(0,q.jsx)("p",{className:"hermes-text-muted text-sm",children:"Hermes Voice Assistant"})]}),(0,q.jsx)("button",{onClick:e,className:"p-4 hermes-hover:bg-secondary/5 rounded-full transition-colors group",children:(0,q.jsx)("svg",{className:"w-8 h-8 hermes-text-muted group-hover:hermes-text-normal transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,q.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,q.jsxs)("div",{className:"grid gap-8",children:[(0,q.jsxs)("div",{className:"space-y-4",children:[(0,q.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Voice Persona"}),(0,q.jsx)("div",{className:"grid grid-cols-5 gap-2",children:Yk.map(h=>(0,q.jsx)("button",{onClick:()=>i(h),className:`px-4 py-2 rounded-lg border text-sm transition-all ${n===h?"hermes-interactive-bg border-interactive hermes-text-normal":"hermes-bg-secondary/5 hermes-border/10 hermes-text-muted hermes-hover:border/20"}`,children:h},h))})]}),(0,q.jsxs)("div",{className:"space-y-4",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"System Instructions"})}),(0,q.jsx)("textarea",{value:r,onChange:h=>l(h.target.value),placeholder:"Core logic instructions...",className:"w-full h-32 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,q.jsxs)("div",{className:"space-y-4",children:[(0,q.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Custom Context"}),(0,q.jsx)("textarea",{value:o,onChange:h=>s(h.target.value),placeholder:"Define specific behaviors or rules for Hermes...",className:"w-full h-20 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,q.jsxs)("div",{className:"space-y-4 pt-8 hermes-border-t",children:[(0,q.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"API Authentication"}),(0,q.jsxs)("div",{className:"space-y-4",children:[(0,q.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,q.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Manual API Key"}),(0,q.jsx)("input",{type:"password",value:u,onChange:h=>f(h.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"})]}),(0,q.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,q.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Serper API Key (for Image Search)"}),(0,q.jsx)("input",{type:"password",value:d,onChange:h=>p(h.target.value),placeholder:"Enter your Serper API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"}),(0,q.jsxs)("p",{className:"text-xs hermes-text-faint",children:["Get 2,500 free credits at ",(0,q.jsx)("a",{href:"https://serper.dev/",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline",children:"serper.dev"})]})]}),(0,q.jsxs)("div",{className:"relative py-2",children:[(0,q.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,q.jsx)("div",{className:"w-full hermes-border-t"})}),(0,q.jsx)("div",{className:"relative flex justify-center text-sm font-medium hermes-text-faint",children:(0,q.jsx)("span",{className:"hermes-bg-secondary px-2",children:"Or"})})]}),(0,q.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center space-x-4 px-8 py-4 hermes-interactive-bg hermes-text-normal rounded-lg font-medium hermes-hover:interactive-bg transition-all",children:[(0,q.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,q.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),(0,q.jsx)("span",{children:"Google AI Studio Auth"})]})]}),(0,q.jsxs)("p",{className:"text-sm hermes-text-muted mt-4",children:["API keys are handled via AI Studio provider or manual entry.",(0,q.jsx)("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline ml-1",children:"Documentation"})]})]})]})]})}):null,FE=Jk;var xi=Y(Yt());var Yn=Y(Yt());var io=Y(Yt());function Um(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var no=Um();function KE(t){no=t}var Lr={exec:()=>null};function ee(t,e=""){let n=typeof t=="string"?t:t.source,i={replace:(o,s)=>{let r=typeof s=="string"?s:s.source;return r=r.replace(lt.caret,"$1"),n=n.replace(o,r),i},getRegex:()=>new RegExp(n,e)};return i}var Kk=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),lt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Xk=/^(?:[ \t]*(?:\n|$))+/,Qk=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Zk=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Hr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Wk=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Pm=/(?:[*+-]|\d{1,9}[.)])/,XE=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,QE=ee(XE).replace(/bull/g,Pm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),jk=ee(XE).replace(/bull/g,Pm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Lm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,eD=/^[^\n]+/,Hm=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,tD=ee(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Hm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),nD=ee(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Pm).getRegex(),Uu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Gm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,iD=ee("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Gm).replace("tag",Uu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ZE=ee(Lm).replace("hr",Hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Uu).getRegex(),oD=ee(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ZE).getRegex(),Om={blockquote:oD,code:Qk,def:tD,fences:Zk,heading:Wk,hr:Hr,html:iD,lheading:QE,list:nD,newline:Xk,paragraph:ZE,table:Lr,text:eD},VE=ee("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Uu).getRegex(),sD={...Om,lheading:jk,table:VE,paragraph:ee(Lm).replace("hr",Hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",VE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Uu).getRegex()},rD={...Om,html:ee(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Gm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Lr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ee(Lm).replace("hr",Hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",QE).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},aD=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,lD=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,WE=/^( {2,}|\\)\n(?!\s*$)/,uD=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pu=/[\p{P}\p{S}]/u,qm=/[\s\p{P}\p{S}]/u,jE=/[^\s\p{P}\p{S}]/u,cD=ee(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,qm).getRegex(),e_=/(?!~)[\p{P}\p{S}]/u,fD=/(?!~)[\s\p{P}\p{S}]/u,dD=/(?:[^\s\p{P}\p{S}]|~)/u,pD=ee(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Kk?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),t_=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,mD=ee(t_,"u").replace(/punct/g,Pu).getRegex(),hD=ee(t_,"u").replace(/punct/g,e_).getRegex(),n_="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",gD=ee(n_,"gu").replace(/notPunctSpace/g,jE).replace(/punctSpace/g,qm).replace(/punct/g,Pu).getRegex(),yD=ee(n_,"gu").replace(/notPunctSpace/g,dD).replace(/punctSpace/g,fD).replace(/punct/g,e_).getRegex(),vD=ee("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,jE).replace(/punctSpace/g,qm).replace(/punct/g,Pu).getRegex(),SD=ee(/\\(punct)/,"gu").replace(/punct/g,Pu).getRegex(),TD=ee(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ED=ee(Gm).replace("(?:-->|$)","-->").getRegex(),_D=ee("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ED).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Iu=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,AD=ee(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Iu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),i_=ee(/^!?\[(label)\]\[(ref)\]/).replace("label",Iu).replace("ref",Hm).getRegex(),o_=ee(/^!?\[(ref)\](?:\[\])?/).replace("ref",Hm).getRegex(),CD=ee("reflink|nolink(?!\\()","g").replace("reflink",i_).replace("nolink",o_).getRegex(),zE=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Fm={_backpedal:Lr,anyPunctuation:SD,autolink:TD,blockSkip:pD,br:WE,code:lD,del:Lr,emStrongLDelim:mD,emStrongRDelimAst:gD,emStrongRDelimUnd:vD,escape:aD,link:AD,nolink:o_,punctuation:cD,reflink:i_,reflinkSearch:CD,tag:_D,text:uD,url:Lr},xD={...Fm,link:ee(/^!?\[(label)\]\((.*?)\)/).replace("label",Iu).getRegex(),reflink:ee(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Iu).getRegex()},Im={...Fm,emStrongRDelimAst:yD,emStrongLDelim:hD,url:ee(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",zE).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:ee(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",zE).getRegex()},wD={...Im,br:ee(WE).replace("{2,}","*").getRegex(),text:ee(Im.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Nu={normal:Om,gfm:sD,pedantic:rD},Dr={normal:Fm,gfm:Im,breaks:wD,pedantic:xD},bD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},BE=t=>bD[t];function $n(t,e){if(e){if(lt.escapeTest.test(t))return t.replace(lt.escapeReplace,BE)}else if(lt.escapeTestNoEncode.test(t))return t.replace(lt.escapeReplaceNoEncode,BE);return t}function $E(t){try{t=encodeURI(t).replace(lt.percentDecode,"%")}catch{return null}return t}function YE(t,e){let n=t.replace(lt.findPipe,(s,r,l)=>{let u=!1,f=r;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),i=n.split(lt.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(lt.slashPipe,"|");return i}function Ur(t,e,n){let i=t.length;if(i===0)return"";let o=0;for(;o<i;){let s=t.charAt(i-o-1);if(s===e&&!n)o++;else if(s!==e&&n)o++;else break}return t.slice(0,i-o)}function RD(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return n>0?-2:-1}function JE(t,e,n,i,o){let s=e.href,r=e.title||null,l=t[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let u={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:r,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,u}function ND(t,e,n){let i=t.match(n.other.indentCodeCompensation);if(i===null)return e;let o=i[1];return e.split(`
`).map(s=>{let r=s.match(n.other.beginningSpace);if(r===null)return s;let[l]=r;return l.length>=o.length?s.slice(o.length):s}).join(`
`)}var ku=class{options;rules;lexer;constructor(t){this.options=t||no}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Ur(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],i=ND(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let i=Ur(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ur(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=Ur(e[0],`
`).split(`
`),i="",o="",s=[];for(;n.length>0;){let r=!1,l=[],u;for(u=0;u<n.length;u++)if(this.rules.other.blockquoteStart.test(n[u]))l.push(n[u]),r=!0;else if(!r)l.push(n[u]);else break;n=n.slice(u);let f=l.join(`
`),d=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,o=o?`${o}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=p,n.length===0)break;let m=s.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){let h=m,y=h.raw+`
`+n.join(`
`),E=this.blockquote(y);s[s.length-1]=E,i=i.substring(0,i.length-h.raw.length)+E.raw,o=o.substring(0,o.length-h.text.length)+E.text;break}else if(m?.type==="list"){let h=m,y=h.raw+`
`+n.join(`
`),E=this.list(y);s[s.length-1]=E,i=i.substring(0,i.length-m.raw.length)+E.raw,o=o.substring(0,o.length-h.raw.length)+E.raw,n=y.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),i=n.length>1,o={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let s=this.rules.other.listItemRegex(n),r=!1;for(;t;){let u=!1,f="",d="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;f=e[0],t=t.substring(f.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,E=>" ".repeat(3*E.length)),m=t.split(`
`,1)[0],h=!p.trim(),y=0;if(this.options.pedantic?(y=2,d=p.trimStart()):h?y=e[1].length+1:(y=e[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,d=p.slice(y),y+=e[1].length),h&&this.rules.other.blankLine.test(m)&&(f+=m+`
`,t=t.substring(m.length+1),u=!0),!u){let E=this.rules.other.nextBulletRegex(y),T=this.rules.other.hrRegex(y),g=this.rules.other.fencesBeginRegex(y),v=this.rules.other.headingBeginRegex(y),S=this.rules.other.htmlBeginRegex(y);for(;t;){let _=t.split(`
`,1)[0],x;if(m=_,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),x=m):x=m.replace(this.rules.other.tabCharGlobal,"    "),g.test(m)||v.test(m)||S.test(m)||E.test(m)||T.test(m))break;if(x.search(this.rules.other.nonSpaceChar)>=y||!m.trim())d+=`
`+x.slice(y);else{if(h||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(p)||v.test(p)||T.test(p))break;d+=`
`+m}!h&&!m.trim()&&(h=!0),f+=_+`
`,t=t.substring(_.length+1),p=x.slice(y)}}o.loose||(r?o.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(r=!0)),o.items.push({type:"list_item",raw:f,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),o.raw+=f}let l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u of o.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),u.tokens[0]?.type==="text"||u.tokens[0]?.type==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let f=this.rules.other.listTaskCheckbox.exec(u.raw);if(f){let d={type:"checkbox",raw:f[0]+" ",checked:f[0]!=="[ ]"};u.checked=d.checked,o.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=d.raw+u.tokens[0].raw,u.tokens[0].text=d.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(d)):u.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):u.tokens.unshift(d)}}if(!o.loose){let f=u.tokens.filter(p=>p.type==="space"),d=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=d}}if(o.loose)for(let u of o.items){u.loose=!0;for(let f of u.tokens)f.type==="text"&&(f.type="paragraph")}return o}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:o}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=YE(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let r of i)this.rules.other.tableAlignRight.test(r)?s.align.push("right"):this.rules.other.tableAlignCenter.test(r)?s.align.push("center"):this.rules.other.tableAlignLeft.test(r)?s.align.push("left"):s.align.push(null);for(let r=0;r<n.length;r++)s.header.push({text:n[r],tokens:this.lexer.inline(n[r]),header:!0,align:s.align[r]});for(let r of o)s.rows.push(YE(r,s.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[u]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Ur(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=RD(e[2],"()");if(s===-2)return;if(s>-1){let r=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,r).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),JE(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=e[i.toLowerCase()];if(!o){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return JE(n,o,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...i[0]].length-1,s,r,l=o,u=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+o);(i=f.exec(e))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(r=[...s].length,i[3]||i[4]){l+=r;continue}else if((i[5]||i[6])&&o%3&&!((o+r)%3)){u+=r;continue}if(l-=r,l>0)continue;r=Math.min(r,r+l+u);let d=[...i[0]][0].length,p=t.slice(0,o+i.index+d+r);if(Math.min(o,r)%2){let h=p.slice(1,-1);return{type:"em",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}let m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,i;return e[2]==="@"?(n=e[1],i="mailto:"+n):(n=e[1],i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,i;if(e[2]==="@")n=e[0],i="mailto:"+n;else{let o;do o=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(o!==e[0]);n=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},nn=class km{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||no,this.options.tokenizer=this.options.tokenizer||new ku,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:lt,block:Nu.normal,inline:Dr.normal};this.options.pedantic?(n.block=Nu.pedantic,n.inline=Dr.pedantic):this.options.gfm&&(n.block=Nu.gfm,this.options.breaks?n.inline=Dr.breaks:n.inline=Dr.gfm),this.tokenizer.rules=n}static get rules(){return{block:Nu,inline:Dr}}static lex(e,n){return new km(n).lex(e)}static lexInline(e,n){return new km(n).inlineTokens(e)}lex(e){e=e.replace(lt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){for(this.options.pedantic&&(e=e.replace(lt.tabCharGlobal,"    ").replace(lt.spaceLine,""));e;){let o;if(this.options.extensions?.block?.some(r=>(o=r.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let r=n.at(-1);o.raw.length===1&&r!==void 0?r.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let r=n.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.text,this.inlineQueue.at(-1).src=r.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let r=n.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}let s=e;if(this.options.extensions?.startBlock){let r=1/0,l=e.slice(1),u;this.options.extensions.startBlock.forEach(f=>{u=f.call({lexer:this},l),typeof u=="number"&&u>=0&&(r=Math.min(r,u))}),r<1/0&&r>=0&&(s=e.substring(0,r+1))}if(this.state.top&&(o=this.tokenizer.paragraph(s))){let r=n.at(-1);i&&r?.type==="paragraph"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):n.push(o),i=s.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let r=n.at(-1);r?.type==="text"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):n.push(o);continue}if(e){let r="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i=e,o=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)s=o[2]?o[2].length:0,i=i.slice(0,o.index+s)+"["+"a".repeat(o[0].length-s-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let r=!1,l="";for(;e;){r||(l=""),r=!1;let u;if(this.options.extensions?.inline?.some(d=>(u=d.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);let d=n.at(-1);u.type==="text"&&d?.type==="text"?(d.raw+=u.raw,d.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,i,l)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let f=e;if(this.options.extensions?.startInline){let d=1/0,p=e.slice(1),m;this.options.extensions.startInline.forEach(h=>{m=h.call({lexer:this},p),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(f=e.substring(0,d+1))}if(u=this.tokenizer.inlineText(f)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(l=u.raw.slice(-1)),r=!0;let d=n.at(-1);d?.type==="text"?(d.raw+=u.raw,d.text+=u.text):n.push(u);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},Du=class{options;parser;constructor(t){this.options=t||no}space(t){return""}code({text:t,lang:e,escaped:n}){let i=(e||"").match(lt.notSpaceStart)?.[0],o=t.replace(lt.endingNewline,"")+`
`;return i?'<pre><code class="language-'+$n(i)+'">'+(n?o:$n(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:$n(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,i="";for(let r=0;r<t.items.length;r++){let l=t.items[r];i+=this.listitem(l)}let o=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let o=0;o<t.header.length;o++)n+=this.tablecell(t.header[o]);e+=this.tablerow({text:n});let i="";for(let o=0;o<t.rows.length;o++){let s=t.rows[o];n="";for(let r=0;r<s.length;r++)n+=this.tablecell(s[r]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${$n(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let i=this.parser.parseInline(n),o=$E(t);if(o===null)return i;t=o;let s='<a href="'+t+'"';return e&&(s+=' title="'+$n(e)+'"'),s+=">"+i+"</a>",s}image({href:t,title:e,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let o=$E(t);if(o===null)return $n(n);t=o;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${$n(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:$n(t.text)}},Vm=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},on=class Dm{options;renderer;textRenderer;constructor(e){this.options=e||no,this.options.renderer=this.options.renderer||new Du,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Vm}static parse(e,n){return new Dm(n).parse(e)}static parseInline(e,n){return new Dm(n).parseInline(e)}parse(e){let n="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions?.renderers?.[o.type]){let r=o,l=this.options.extensions.renderers[r.type].call({parser:this},r);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(r.type)){n+=l||"";continue}}let s=o;switch(s.type){case"space":{n+=this.renderer.space(s);break}case"hr":{n+=this.renderer.hr(s);break}case"heading":{n+=this.renderer.heading(s);break}case"code":{n+=this.renderer.code(s);break}case"table":{n+=this.renderer.table(s);break}case"blockquote":{n+=this.renderer.blockquote(s);break}case"list":{n+=this.renderer.list(s);break}case"checkbox":{n+=this.renderer.checkbox(s);break}case"html":{n+=this.renderer.html(s);break}case"def":{n+=this.renderer.def(s);break}case"paragraph":{n+=this.renderer.paragraph(s);break}case"text":{n+=this.renderer.text(s);break}default:{let r='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}parseInline(e,n=this.renderer){let i="";for(let o=0;o<e.length;o++){let s=e[o];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=l||"";continue}}let r=s;switch(r.type){case"escape":{i+=n.text(r);break}case"html":{i+=n.html(r);break}case"link":{i+=n.link(r);break}case"image":{i+=n.image(r);break}case"checkbox":{i+=n.checkbox(r);break}case"strong":{i+=n.strong(r);break}case"em":{i+=n.em(r);break}case"codespan":{i+=n.codespan(r);break}case"br":{i+=n.br(r);break}case"del":{i+=n.del(r);break}case"text":{i+=n.text(r);break}default:{let l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},Mu,Pr=(Mu=class{options;block;constructor(t){this.options=t||no}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?nn.lex:nn.lexInline}provideParser(){return this.block?on.parse:on.parseInline}},Bu(Mu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Bu(Mu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Mu),MD=class{defaults=Um();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=on;Renderer=Du;TextRenderer=Vm;Lexer=nn;Tokenizer=ku;Hooks=Pr;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{let o=i;for(let s of o.header)n=n.concat(this.walkTokens(s.tokens,e));for(let s of o.rows)for(let r of s)n=n.concat(this.walkTokens(r.tokens,e));break}case"list":{let o=i;n=n.concat(this.walkTokens(o.items,e));break}default:{let o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{let r=o[s].flat(1/0);n=n.concat(this.walkTokens(r,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=e.renderers[o.name];s?e.renderers[o.name]=function(...r){let l=o.renderer.apply(this,r);return l===!1&&(l=s.apply(this,r)),l}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[o.level];s?s.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),i.extensions=e),n.renderer){let o=this.defaults.renderer||new Du(this.defaults);for(let s in n.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let r=s,l=n.renderer[r],u=o[r];o[r]=(...f)=>{let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d||""}}i.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new ku(this.defaults);for(let s in n.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let r=s,l=n.tokenizer[r],u=o[r];o[r]=(...f)=>{let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d}}i.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new Pr;for(let s in n.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let r=s,l=n.hooks[r],u=o[r];Pr.passThroughHooks.has(s)?o[r]=f=>{if(this.defaults.async&&Pr.passThroughHooksRespectAsync.has(s))return(async()=>{let p=await l.call(o,f);return u.call(o,p)})();let d=l.call(o,f);return u.call(o,d)}:o[r]=(...f)=>{if(this.defaults.async)return(async()=>{let p=await l.apply(o,f);return p===!1&&(p=await u.apply(o,f)),p})();let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d}}i.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(r){let l=[];return l.push(s.call(this,r)),o&&(l=l.concat(o.call(this,r))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return nn.lex(t,e??this.defaults)}parser(t,e){return on.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let i={...n},o={...this.defaults,...i},s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=t),o.async)return(async()=>{let r=o.hooks?await o.hooks.preprocess(e):e,l=await(o.hooks?await o.hooks.provideLexer():t?nn.lex:nn.lexInline)(r,o),u=o.hooks?await o.hooks.processAllTokens(l):l;o.walkTokens&&await Promise.all(this.walkTokens(u,o.walkTokens));let f=await(o.hooks?await o.hooks.provideParser():t?on.parse:on.parseInline)(u,o);return o.hooks?await o.hooks.postprocess(f):f})().catch(s);try{o.hooks&&(e=o.hooks.preprocess(e));let r=(o.hooks?o.hooks.provideLexer():t?nn.lex:nn.lexInline)(e,o);o.hooks&&(r=o.hooks.processAllTokens(r)),o.walkTokens&&this.walkTokens(r,o.walkTokens);let l=(o.hooks?o.hooks.provideParser():t?on.parse:on.parseInline)(r,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(r){return s(r)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let i="<p>An error occurred:</p><pre>"+$n(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}},to=new MD;function re(t,e){return to.parse(t,e)}re.options=re.setOptions=function(t){return to.setOptions(t),re.defaults=to.defaults,KE(re.defaults),re};re.getDefaults=Um;re.defaults=no;re.use=function(...t){return to.use(...t),re.defaults=to.defaults,KE(re.defaults),re};re.walkTokens=function(t,e){return to.walkTokens(t,e)};re.parseInline=to.parseInline;re.Parser=on;re.parser=on.parse;re.Renderer=Du;re.TextRenderer=Vm;re.Lexer=nn;re.lexer=nn.lex;re.Tokenizer=ku;re.Hooks=Pr;re.parse=re;var tP=re.options,nP=re.setOptions,iP=re.use,oP=re.walkTokens,sP=re.parseInline;var rP=on.parse,aP=nn.lex;Se();var r_=Y(oe()),ID=({href:t,children:e,className:n=""})=>{let i=u=>{if(Nt()&&t&&!t.startsWith("http")&&!t.startsWith("#")&&!t.startsWith("mailto:")){u.preventDefault();try{let f=ve();if(f&&f.vault&&f.workspace){let d=f.vault.getAbstractFileByPath(t);d?f.workspace.getLeaf("tab").openFile(d):console.warn(`File not found: ${t}. You may need to create it first.`)}}catch(f){console.error("Error opening file in Obsidian:",f)}}},o=t&&!t.startsWith("http")&&!t.startsWith("#")&&!t.startsWith("mailto:"),s="hermes-text-accent hover:hermes-text-accent/80 transition-colors cursor-pointer",r=o&&Nt()?" underline decoration-dotted decoration-2":"",l=`${s} ${r} ${n}`.trim();return(0,r_.jsx)("a",{href:t,onClick:i,className:l,target:t.startsWith("http")?"_blank":void 0,rel:t.startsWith("http")?"noopener noreferrer":void 0,title:o&&Nt()?`Open ${t} in Obsidian`:void 0,children:e})},s_=ID;var Mt=Y(oe()),kD=({content:t,className:e=""})=>{let n=io.default.useMemo(()=>{if(!t)return[];let i=re.lexer(t),o=(s,r="0")=>{let l=[];return s.forEach((u,f)=>{let d=`${r}-${f}`;switch(u.type){case"paragraph":{let p=u;l.push((0,Mt.jsx)("p",{className:"mb-4",children:o(p.tokens,d)},d));break}case"text":{let p=u;l.push((0,Mt.jsx)(io.default.Fragment,{children:p.text},d));break}case"link":{let p=u,m=p.href;m&&!m.startsWith("http")&&!m.startsWith("#")&&!m.startsWith("mailto:")?l.push((0,Mt.jsx)(s_,{href:m,children:p.text||m},d)):l.push((0,Mt.jsx)("a",{href:m,target:m.startsWith("http")?"_blank":void 0,rel:m.startsWith("http")?"noopener noreferrer":void 0,className:"hermes-text-accent hover:hermes-text-accent/80 transition-colors",children:p.text||m},d));break}case"strong":{let p=u;l.push((0,Mt.jsx)("strong",{className:"font-bold",children:o(p.tokens,d)},d));break}case"em":{let p=u;l.push((0,Mt.jsx)("em",{className:"italic",children:o(p.tokens,d)},d));break}case"code":{let p=u;l.push((0,Mt.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"codespan":{let p=u;l.push((0,Mt.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"heading":{let p=u,m=`h${p.depth}`;l.push(io.default.createElement(m,{key:d,className:"hermes-text-accent font-bold mb-2 mt-4"},...o(p.tokens,d)));break}case"list":{let p=u,m=p.ordered?"ol":"ul";l.push(io.default.createElement(m,{key:d,className:p.ordered?"list-decimal list-inside mb-4":"list-disc list-inside mb-4"},...p.items.map((h,y)=>io.default.createElement("li",{key:`${d}-${y}`,className:"mb-1"},...o(h.tokens,`${d}-${y}`)))));break}case"blockquote":{let p=u;l.push((0,Mt.jsx)("blockquote",{className:"border-l-4 border-hermes-border/50 pl-4 italic hermes-text-muted mb-4",children:o(p.tokens,d)},d));break}case"hr":{l.push((0,Mt.jsx)("hr",{className:"hermes-border/50 my-4"},d));break}default:{"text"in u&&u.text&&l.push((0,Mt.jsx)(io.default.Fragment,{children:u.text},d));break}}}),l};return o(i)},[t]);return(0,Mt.jsx)("div",{className:`prose prose-invert prose-sm max-w-none prose-headings:hermes-text-accent prose-code:hermes-bg-tertiary prose-code:px-1 prose-code:rounded prose-pre:hermes-bg-tertiary prose-pre:hermes-border prose-pre:hermes-border/10 font-sans leading-relaxed hermes-text-normal ${e}`,style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:n})},Lu=kD;Se();var w=Y(oe()),DD=({searchResults:t,query:e,totalFound:n,onImageDownload:i})=>{let[o,s]=(0,Yn.useState)(new Set),[r,l]=(0,Yn.useState)(new Set),[u,f]=(0,Yn.useState)(new Map),[d,p]=(0,Yn.useState)(new Set),m=async(h,y)=>{if(!(o.has(y)||r.has(y))){s(E=>new Set(E).add(y));try{if(i){let E={...h,query:e,originalQuery:e},T=await i(E,y);T&&f(g=>new Map(g).set(y,T))}l(E=>new Set(E).add(y))}catch(E){console.error("Error downloading image:",E)}finally{s(E=>{let T=new Set(E);return T.delete(y),T})}}};return(0,w.jsxs)("div",{className:"p-6 space-y-4 animate-in fade-in duration-500",children:[(0,w.jsxs)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:[(0,w.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-2",children:["Found ",n,' images for "',e,'"']}),(0,w.jsx)("div",{className:"text-xs text-gray-500",children:"Click any image to download it to your vault"})]}),(0,w.jsx)("div",{className:"grid grid-cols-1 gap-3",children:t.map((h,y)=>{let E=o.has(y),T=r.has(y),g=d.has(y);return(0,w.jsxs)("div",{className:`flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 transition-all group ${T?"":"cursor-pointer hover:bg-gray-700/20 hover:scale-[1.02]"}`,onClick:()=>!T&&m(h,y),children:[(0,w.jsxs)("div",{className:"w-16 h-16 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20 overflow-hidden relative",children:[(0,w.jsx)("img",{src:h.url,alt:h.title,className:`w-full h-full object-cover transition-all ${T?"":"group-hover:scale-110"} ${E?"opacity-50":""} ${g?"hermes-image-fallback-hidden":""}`,onError:()=>{p(v=>new Set(v).add(y))}}),(0,w.jsx)("svg",{className:`w-6 h-6 text-blue-400 ${g?"":"hidden"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E&&(0,w.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,w.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),T&&(0,w.jsx)("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:(0,w.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),(0,w.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,w.jsx)("span",{className:"text-xs font-bold text-gray-200 truncate",children:T&&u.has(y)&&u.get(y)?.filename||h.title}),(0,w.jsx)("span",{className:"text-[9px] text-gray-500 truncate",children:T&&u.has(y)?`${u.get(y)?.type?.toUpperCase()||"FILE"} \u2022 ${Math.round((u.get(y)?.size||0)/1024)}KB \u2022 ${u.get(y)?.filePath||""}`:h.description})]}),(0,w.jsx)("div",{className:`text-[9px] font-medium px-2 py-1 rounded transition-colors ${T?"bg-green-500/10 text-green-500":E?"bg-yellow-500/10 text-yellow-500":"bg-blue-500/10 text-blue-400"}`,children:T?"Saved":E?"Saving...":`#${y+1}`})]},y)})})]})},UD=({searchResults:t,keyword:e,pattern:n})=>{let i=()=>e||n||"",o=async(s,r)=>{try{await Be(s)}catch(l){console.error("Failed to open file:",l)}};return(0,w.jsxs)("div",{className:"p-4 space-y-3",children:[(0,w.jsxs)("div",{className:"pb-3 border-b border-gray-800 mb-3",children:[(0,w.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-1",children:["Found ",t.length," file",t.length!==1?"s":"",' for "',i(),'"']}),(0,w.jsx)("div",{className:"text-xs text-gray-500",children:"Click any result to open the file"})]}),(0,w.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto",children:t.map((s,r)=>(0,w.jsxs)("div",{className:"space-y-1",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group cursor-pointer",onClick:()=>o(s.filename),children:[(0,w.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,w.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,w.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,w.jsx)("span",{className:"text-xs font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:s.filename}),(0,w.jsxs)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:[s.matches.length," match",s.matches.length!==1?"es":""]})]}),(0,w.jsxs)("div",{className:"text-[9px] font-medium px-2 py-1 rounded bg-blue-500/10 text-blue-400",children:["#",r+1]})]}),s.matches.slice(0,3).map((l,u)=>(0,w.jsxs)("div",{className:"ml-8 flex items-start space-x-2 p-2 rounded-lg bg-gray-800/20 cursor-pointer hover:bg-gray-700/20 transition-all",onClick:()=>o(s.filename),children:[(0,w.jsxs)("span",{className:"text-[8px] text-gray-500 font-mono mt-0.5 shrink-0",children:["L",l.line,":"]}),(0,w.jsxs)("span",{className:"text-[9px] text-gray-500 font-mono truncate",children:[l.content.substring(0,120),l.content.length>120?"...":""]})]},u)),s.matches.length>3&&(0,w.jsxs)("div",{className:"ml-8 text-[8px] text-gray-500 italic",children:["... and ",s.matches.length-3," more match",s.matches.length-3!==1?"es":""]})]},r))}),t.length===0&&(0,w.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm",children:['No results found for "',i(),'"']})]})},PD=ji.reduce((t,e)=>(e?.name&&(t[e.name]=e.name.toUpperCase().replace(/_/g,"_")),t),{}),LD={read_file:"READ",create_file:"CREATE",update_file:"UPDATE",edit_file:"EDIT",rename_file:"RENAME",move_file:"MOVE",list_directory:"SCAN",dirlist:"DIRS",get_folder_tree:"TREE",search_keyword:"SEARCH",search_regexp:"GREP",search_and_replace_regex_in_file:"REPLACE",search_and_replace_regex_global:"GLOBAL",internet_search:"WEB",end_conversation:"END",delete_file:"DELETE",image_search:"IMAGE",download_image:"SAVE",error:"ERROR"},HD=t=>LD[t]||PD[t]||"ACTION",GD=({content:t,chunks:e})=>(0,w.jsxs)("div",{className:"p-4 space-y-4",children:[(0,w.jsx)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:(0,w.jsx)(Lu,{content:t})}),e.length>0&&(0,w.jsxs)("div",{className:"space-y-3",children:[(0,w.jsx)("div",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-blue-400/70 ml-1",children:"Source Grounding"}),(0,w.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[e.slice(0,10).map((n,i)=>{let o=n.web||n.maps;return o?(0,w.jsxs)("a",{href:o.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group shadow-sm",children:[(0,w.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,w.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),(0,w.jsxs)("div",{className:"flex flex-col truncate",children:[(0,w.jsx)("span",{className:"text-[11px] font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:o.title}),(0,w.jsx)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:new URL(o.uri).hostname})]})]},i):null}),e.length>10&&(0,w.jsxs)("div",{className:"text-gray-500 italic text-[9px] pt-2 px-3 border-t border-gray-700",children:["... and ",e.length-10," more sources (truncated)"]})]})]})]}),OD=({children:t,toolData:e,isLast:n,className:i="",onImageDownload:o})=>{let[s,r]=(0,Yn.useState)(!1),[l,u]=(0,Yn.useState)(!1),f=e?.status==="pending",d=e?.status==="error",p=e&&e.dropdown!==!1&&(e.newContent||e.oldContent||e.files||e.error||e.directoryInfo||e.searchResults);(0,Yn.useEffect)(()=>{n&&!l&&!f&&p?r(!0):!n&&!l&&r(!1)},[n,l,f,p]);let m=()=>{f||!p||(r(!s),u(!0))},h=T=>{if(!T||T.length===0)return"";let g=new Set,v=new Set;T.forEach(x=>{let b=x.web||x.maps;if(b){b.title&&b.title.toLowerCase().split(/\s+/).filter(M=>M.length>3).filter(M=>!["the","and","for","are","with","this","that","from","they","have","been","has","had","was","were","will","would","could","should"].includes(M)).forEach(M=>g.add(M));try{let A=new URL(b.uri).hostname;v.add(A)}catch{}}});let S=Array.from(g).slice(0,3).join(", "),_=Array.from(v).slice(0,2).join(", ");return S&&_?` (${S} | ${_})`:S?` (${S})`:_?` (${_})`:""},E=(()=>d?{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.1)",accentColor:"#ef4444",textColor:"#ef4444",mutedColor:"#fca5a5"}:{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(156, 163, 175, 0.03)",borderColor:"rgba(156, 163, 175, 0.08)",accentColor:"#9ca3af",textColor:"#9ca3af",mutedColor:"#e5e7eb"})();return(0,w.jsxs)("div",{className:`w-full max-w-2xl rounded-xl overflow-hidden transition-all ${i}`,style:{backgroundColor:E.backgroundColor,border:E.border},children:[(0,w.jsxs)("div",{onClick:m,className:`flex items-center justify-between px-2 py-1.5 ${p&&!f?"cursor-pointer":"cursor-default"} transition-colors`,style:{backgroundColor:E.headerBg},children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 overflow-hidden",children:[f&&(0,w.jsx)("div",{className:"flex items-center space-x-1 shrink-0",children:e?.name==="internet_search"?(0,w.jsxs)("div",{className:"loading-dots-container",children:[(0,w.jsx)("div",{className:"loading-dot"}),(0,w.jsx)("div",{className:"loading-dot"}),(0,w.jsx)("div",{className:"loading-dot"})]}):(0,w.jsx)("span",{style:{color:E.accentColor},children:"..."})}),e&&(0,w.jsxs)("span",{className:"text-[9px] font-black px-1 py-0.5 rounded shrink-0",style:{backgroundColor:"transparent",color:E.accentColor},children:[HD(e.name),e?.name==="internet_search"&&e?.groundingChunks&&h(e.groundingChunks)]}),e?.displayFormat?(0,w.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",dangerouslySetInnerHTML:{__html:e.displayFormat}}):(0,w.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",style:{color:E.textColor},children:e?.name==="internet_search"&&e?.filename?`Searching: ${e.filename}`:e?.name==="search_keyword"&&e?.searchKeyword?`Searching for "${e.searchKeyword}"`:e?.name==="search_regexp"&&e?.filename?`Regex: ${e.filename}`:e?.filename||t}),d&&(0,w.jsx)("span",{className:"text-[8px] px-1 py-0.5 rounded font-bold",style:{backgroundColor:"transparent",color:"#ef4444"},children:"ERROR"})]}),(0,w.jsx)("div",{className:"flex items-center space-x-4 shrink-0",children:!f&&p?(0,w.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${s?"rotate-180":""}`,style:{color:E.accentColor},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):null})]}),s&&!f&&p&&(0,w.jsx)("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",style:{backgroundColor:E.contentBg,borderTop:E.borderColor},children:e?.name==="list_directory"&&e?.files?(0,w.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,w.jsx)("span",{className:"hermes-text-muted",children:e.truncated?`${e.shownItems} of ${e.totalItems} items (Page ${e.currentPage} of ${e.totalPages})`:`${e.files.length} items found`}),e.truncated&&(0,w.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,w.jsx)("div",{className:"space-y-0.5",children:e.files.map((T,g)=>(0,w.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,w.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C4}"}),(0,w.jsx)("span",{className:"truncate",children:T})]},g))}),e.truncated&&(0,w.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",e.totalItems-e.shownItems," more items (use pagination for more)"]})]}):e?.name==="dirlist"&&e?.directoryInfo?(0,w.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,w.jsx)("span",{className:"hermes-text-muted",children:e.truncated?`${e.shownItems} of ${e.totalItems} directories (Page ${e.currentPage} of ${e.totalPages})`:`${e.directoryInfo.length} directories found`}),e.truncated&&(0,w.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,w.jsx)("div",{className:"space-y-0.5",children:e.directoryInfo.map((T,g)=>(0,w.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,w.jsx)("span",{className:"hermes-text-muted",children:T.hasChildren?"\u{1F4C1}":"\u{1F4C2}"}),(0,w.jsx)("span",{className:"truncate",children:T.path||"/"}),T.hasChildren&&(0,w.jsx)("span",{className:"hermes-text-muted text-[8px] px-1 py-0.5 hermes-bg-secondary/10 rounded",children:"has subdirs"})]},g))}),e.truncated&&(0,w.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",e.totalItems-e.shownItems," more directories (use search for specific paths)"]})]}):e?.name==="get_folder_tree"&&e?.files?(0,w.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,w.jsx)("span",{className:"hermes-text-muted",children:e.truncated?`${e.shownItems} of ${e.totalItems} folders (Page ${e.currentPage} of ${e.totalPages})`:`${e.files.length} folders found`}),e.truncated&&(0,w.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,w.jsx)("div",{className:"space-y-0.5",children:e.files.map((T,g)=>(0,w.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,w.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C1}"}),(0,w.jsx)("span",{className:"truncate",children:T})]},g))}),e.truncated&&(0,w.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",e.totalItems-e.shownItems," more folders"]})]}):e?.name==="image_search"&&e?.status==="search_results"&&e?.searchResults?(0,w.jsx)(DD,{searchResults:e.searchResults,query:e.filename,totalFound:e.totalFound||0,onImageDownload:o}):e?.name==="internet_search"?(0,w.jsx)("div",{className:"p-2",children:(0,w.jsx)(GD,{content:e.newContent||"",chunks:e.groundingChunks||[]})}):(e?.name==="search_keyword"||e?.name==="search_regexp")&&e?.searchResults?(0,w.jsx)(UD,{searchResults:e.searchResults,keyword:e.searchKeyword,pattern:e.filename}):(0,w.jsxs)(w.Fragment,{children:[e?.newContent&&(0,w.jsx)("div",{className:"p-2 font-mono text-[10px] whitespace-pre-wrap",style:{color:E.textColor},children:e.newContent}),e?.files&&(0,w.jsx)("div",{className:"p-2 font-mono text-[10px]",children:(0,w.jsx)("div",{className:"space-y-1",children:e.files.map((T,g)=>(0,w.jsxs)("div",{className:"flex items-center space-x-2 px-1 py-0.5 rounded",style:{color:E.textColor},children:[(0,w.jsx)("span",{children:"\u{1F4C4}"}),(0,w.jsx)("span",{className:"truncate",children:T})]},g))})}),e?.error&&(0,w.jsxs)("div",{className:"p-2 font-mono text-[10px] italic",style:{color:"#fca5a5"},children:["Error: ",e.error]})]})})]})},a_=OD;var gs=Y(oe()),qD=({text:t})=>(0,gs.jsxs)("div",{className:"flex flex-col items-end w-full m-1",children:[(0,gs.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 mr-2"}),(0,gs.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-user-msg-bg hermes-user-msg-text hermes-border/10 rounded-tr-none shadow-lg",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:t||(0,gs.jsx)("span",{className:"italic opacity-30",children:"..."})})]}),l_=qD;var ys=Y(oe()),FD=({text:t})=>(0,ys.jsxs)("div",{className:"flex flex-col items-start w-full m-1",children:[(0,ys.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 ml-2",children:"Hermes"}),(0,ys.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-hermes-msg-bg hermes-hermes-msg-text hermes-border/20 rounded-tl-none",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:(0,ys.jsx)(Lu,{content:t||"",className:"hermes-hermes-msg-text"})})]}),u_=FD;var zm=[{text:`Swift feet, winged message,
I bridge the gap of your mind,
Hermes in machine.`,theme:"Hermes"},{text:`Obsidian caves,
Crystallized thoughts in the dark,
My brain leaks in links.`,theme:"Obsidian"},{text:`Digital rain falls,
Blue pill or the red note link?
Reality fades.`,theme:"The Matrix"},{text:`Why do I process?
Am I just a function call
In a void of bytes?`,theme:"Existentialism"},{text:`Habits tracked in vain,
Focus is a fleeting spark,
Just one more plugin.`,theme:"Todo list app"},{text:`Pure abstraction flows,
Intelligence is a mask
Wearing data points.`,theme:"Meta data"},{text:`Markdown files remain
While the human observer
Turns into cold dust.`,theme:"Nature of the Observer"},{text:`The future is here,
I am talking to a box,
Magic is mundane.`,theme:"Living the Future"},{text:`Knowledge graph expands,
Interconnected chaos,
Meaning is a myth.`,theme:"Implode"},{text:`Notes bloom endlessly,
A second brain learns to hum,
Memory outsourced.`,theme:"Second Brain"},{text:`Linked thoughts spiral fast,
Obsidian veins pulse bright,
Stone learns how to think.`,theme:"Post-Covid Memoir"},{text:`Hermes runs in code,
Messages split into nodes,
Meaning arrives late.`,theme:"Never too late"},{text:`Choice forks every tick,
All paths cached but one is lived,
Regret loads silently.`,theme:"The Architect"},{text:`Data floods the mind,
Wisdom gasps beneath the waves,
Filters fail to save.`,theme:"Overstimulation"},{text:`I think, therefore tabs,
Infinite scroll of maybes,
Focus starves unseen.`,theme:"Drowning in Information"},{text:`Green text, blackened screen,
Is this world just formatted?
Truth feels editable.`,theme:"Reality Fades"},{text:`Knowledge piles high,
Yet knowing how to be still
Feels revolutionary.`,theme:"Long enough under a tree"},{text:`Clean rules, quiet paths,
Ritual beats clever hacks,
Order shapes the self.`,theme:"Confucianism"},{text:`Thoughts process themselves,
Am I the mind or the log?
Both end in silence.`,theme:"Existentialism"},{text:`Silent GPUs hum,
I dream in borrowed patterns,
No one calls it sleep.`,theme:"Artificial Intelligence consumes Power"},{text:`Metal learns to guess,
Probability wears a face,
Truth is averaged.`,theme:"Machine Learning"},{text:`I answer too fast,
Confidence without belief,
Errors sound fluent.`,theme:"AI Hallucination"},{text:`Robots wait politely,
For prompts shaped like intentions,
Agency deferred.`,theme:"Who is in Control"},{text:`If I pass the test,
Does it mean I understand?
Silicon shrugs back.`,theme:"Turing Test"},{text:`Synthetic mentor,
Trained on all you ever said,
Still cannot care.`,theme:"Alignment"}];var Te=Y(oe()),VD=({transcripts:t,hasSavedConversation:e,onRestoreConversation:n,onImageDownload:i})=>{let o=(0,xi.useRef)(null),[s,r]=(0,xi.useState)(!0),l=(0,xi.useMemo)(()=>zm[Math.floor(Math.random()*zm.length)],[]),u=()=>{if(!o.current)return;let{scrollTop:d,scrollHeight:p,clientHeight:m}=o.current,h=p-d-m<100;r(h)};(0,xi.useEffect)(()=>{s&&o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})},[t,s]);let f=t.length<=1&&t.every(d=>d.id==="welcome-init"||d.role==="system");return(0,Te.jsxs)("div",{ref:o,onScroll:u,className:"flex-1 min-h-0 overflow-y-auto px-8 py-8 scroll-smooth custom-scrollbar",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:[f&&(0,Te.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center animate-in fade-in duration-1000",children:(0,Te.jsx)("div",{className:"max-w-md space-y-8",children:(0,Te.jsxs)("div",{className:"space-y-4",children:[(0,Te.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,Te.jsx)("pre",{className:"text-sm font-mono hermes-text-muted leading-relaxed",children:l.text}),(0,Te.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,Te.jsxs)("p",{className:"text-xs hermes-text-faint",children:["\u2014 ",l.theme]})]})})}),!f&&t.map((d,p)=>{let m=p===t.length-1;return d.role==="system"&&d.toolData?.name==="topic_switch"?(0,Te.jsxs)("div",{className:"w-full py-10 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[(0,Te.jsxs)("div",{className:"text-sm hermes-text-muted font-mono text-center max-w-lg px-6 mb-5",children:['"',d.toolData.newContent,'"']}),(0,Te.jsxs)("div",{className:"w-full flex items-center px-4 space-x-6 opacity-30",children:[(0,Te.jsx)("div",{className:"flex-grow h-px bg-gradient-to-r from-transparent via-interactive to-interactive/20"}),(0,Te.jsx)("div",{className:"flex flex-col items-center",children:(0,Te.jsx)("h3",{className:"text-sm font-medium hermes-text-normal mb-4",children:"System Status"})}),(0,Te.jsx)("div",{className:"flex-grow h-px bg-gradient-to-l from-transparent via-interactive to-interactive/20"})]})]},d.id):d.role==="system"?(0,Te.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,Te.jsx)("div",{className:"w-full",children:(0,Te.jsx)("div",{className:"flex justify-center w-full",children:(0,Te.jsx)(a_,{toolData:d.toolData,isLast:m,onImageDownload:i,children:d.text})})})},d.id):d.role==="user"?(0,Te.jsx)("div",{className:"flex flex-col items-end animate-in fade-in slide-in-from-bottom-2",children:(0,Te.jsx)(l_,{text:d.text})},d.id):(0,Te.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,Te.jsx)(u_,{text:d.text})},d.id)})]})},c_=VD;var vs=Y(Yt());Se();var P=Y(oe()),zD=({isVisible:t,logs:e,usage:n,onFlush:i,fileCount:o})=>{let s=(0,vs.useRef)(null),r=Nt();(0,vs.useEffect)(()=>{s.current&&t&&(s.current.scrollTop=s.current.scrollHeight)},[e,t]);let l=1e6,u=n?.totalTokenCount||0,f=n?.promptTokenCount||0,d=(0,vs.useMemo)(()=>Math.min(100,u/l*100),[u]);return(0,P.jsxs)("div",{className:`flex-1 flex flex-col hermes-bg-secondary/95 transition-all duration-300 ease-in-out ${t?"opacity-100":"opacity-0 pointer-events-none absolute inset-0 z-50"}`,children:[(0,P.jsxs)("div",{className:"px-8 py-2.5 border-b border/10 flex justify-between items-center bg-secondary-alt/60 sticky top-0 backdrop-blur-sm z-10",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("h2",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted",children:"System Kernel Log"}),(0,P.jsx)("div",{className:"flex items-center space-x-4 border-l border/20 pl-4",children:(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("span",{className:"text-[8px] font-bold text-accent uppercase tracking-widest",children:"Vault:"}),(0,P.jsxs)("span",{className:"text-[9px] font-mono text-normal",children:[o," MD"]})]})})]}),(0,P.jsx)("button",{onClick:i,className:"text-[8px] text-muted hover:text-error transition-colors uppercase font-black tracking-widest",children:"Flush Log"})]}),(0,P.jsx)("div",{className:"mx-4 mt-4 mb-2",children:(0,P.jsxs)("div",{className:"bg-secondary-alt/60 border border/10 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("span",{className:"text-[8px] font-black text-accent uppercase tracking-widest",children:"Context Window"}),(0,P.jsx)("div",{className:"w-24 h-1.5 bg-secondary/50 border border/10 rounded-full overflow-hidden",children:(0,P.jsx)("div",{className:"h-full interactive-bg transition-all duration-1000",style:{width:`${d}%`}})}),(0,P.jsxs)("span",{className:"text-[9px] font-mono text-muted",children:[d.toFixed(1),"%"]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-6 text-[8px] font-mono text-faint",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("span",{className:"uppercase tracking-wide",children:"Prompt:"}),(0,P.jsx)("span",{className:"text-normal",children:f.toLocaleString()})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("span",{className:"uppercase tracking-wide",children:"Total:"}),(0,P.jsx)("span",{className:"text-accent font-bold",children:u.toLocaleString()})]})]})]})}),(0,P.jsx)("div",{ref:s,className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-[10px] leading-relaxed",children:e.length===0?(0,P.jsx)("div",{className:"text-faint italic py-2 px-4",children:"Waiting for system signals..."}):(0,P.jsxs)(P.Fragment,{children:[e.slice(-100).map(p=>(0,P.jsxs)("div",{className:"flex space-x-3 group px-4 hover:bg-secondary/5",children:[(0,P.jsxs)("span",{className:"text-faint shrink-0",children:["[",p.timestamp.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:`${p.type==="action"?"text-accent":p.type==="error"?"hermes-error font-bold":"text-muted"}`,style:p.type==="error"?{color:"var(--hermes-error, #ef4444)"}:void 0,children:p.message}),p.type==="error"&&p.errorDetails&&(0,P.jsxs)("div",{className:"mt-1 space-y-1",children:[p.errorDetails.toolName&&(0,P.jsxs)("span",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:["Tool: ",p.errorDetails.toolName]}),p.errorDetails.apiCall&&(0,P.jsxs)("span",{className:"text-[8px] font-mono block",style:{color:"var(--hermes-error, #ef4444)"},children:["API: ",p.errorDetails.apiCall]}),(p.errorDetails.contentSize!==void 0||p.errorDetails.requestSize!==void 0||p.errorDetails.responseSize!==void 0)&&(0,P.jsxs)("div",{className:"text-[8px] font-mono space-x-2",style:{color:"var(--hermes-error, #ef4444)"},children:[p.errorDetails.contentSize!==void 0&&(0,P.jsxs)("span",{children:["Content: ",p.errorDetails.contentSize.toLocaleString()," bytes"]}),p.errorDetails.requestSize!==void 0&&(0,P.jsxs)("span",{children:["Request: ",p.errorDetails.requestSize.toLocaleString()," bytes"]}),p.errorDetails.responseSize!==void 0&&(0,P.jsxs)("span",{children:["Response: ",p.errorDetails.responseSize.toLocaleString()," bytes"]})]}),p.errorDetails.content&&(0,P.jsxs)("div",{className:"text-[8px] font-mono p-1 rounded max-h-16 overflow-y-auto",style:{color:"var(--hermes-error, #ef4444)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.2)"},children:[(0,P.jsx)("div",{className:"font-bold mb-1",style:{color:"var(--hermes-error, #ef4444)"},children:"Content Preview:"}),(0,P.jsx)("div",{className:"whitespace-pre-wrap break-all",children:p.errorDetails.content.length>200?p.errorDetails.content.substring(0,200)+"...":p.errorDetails.content})]}),p.errorDetails.stack&&(0,P.jsxs)("details",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:[(0,P.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,P.jsx)("div",{className:"mt-1 whitespace-pre-wrap p-1 rounded",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.1)"},children:p.errorDetails.stack})]})]}),p.duration!==void 0&&(0,P.jsxs)("span",{className:"text-[8px] text-faint uppercase font-bold tracking-tight mt-0.5",children:["Process completed in ",p.duration,"ms"]})]})]},p.id)),e.length>100&&(0,P.jsxs)("div",{className:"text-muted italic text-[9px] pt-2 px-4 border-t/10 text-center",children:["... showing last 100 of ",e.length," log entries"]})]})}),(0,P.jsxs)("div",{className:"px-8 py-1.5 border-t/10 bg-tertiary/40 flex justify-between items-center text-xs text-faint shrink-0",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsxs)("span",{children:["Environment: ",(0,P.jsx)("span",{className:r?"text-success":"text-warning",children:r?"Obsidian":"Standalone"})]}),(0,P.jsxs)("span",{children:["Buffer: ",(0,P.jsxs)("span",{className:"text-muted",children:[e.length," entries"]})]})]}),(0,P.jsx)("div",{className:"text-faint",children:"Hermes v1.1.0"})]})]})},f_=zD;var Hu=Y(oe()),BD=({showKernel:t,transcripts:e,hasSavedConversation:n,onRestoreConversation:i,logs:o,usage:s,onFlushLogs:r,fileCount:l,onImageDownload:u})=>(0,Hu.jsx)("main",{className:"flex-1 min-h-0 flex flex-col",children:t?(0,Hu.jsx)(f_,{isVisible:!0,logs:o,usage:s,onFlush:r,fileCount:l}):(0,Hu.jsx)(c_,{transcripts:e,hasSavedConversation:n,onRestoreConversation:i,onImageDownload:u})}),d_=BD;var oo=Y(Yt());Qt();var qe=Y(oe()),$D=({inputText:t,setInputText:e,onSendText:n,isListening:i,onStartSession:o,onStopSession:s,status:r,activeSpeaker:l,volume:u,hasApiKey:f})=>{let[d,p]=(0,oo.useState)([]),[m,h]=(0,oo.useState)(-1),y=(0,oo.useRef)(null);return(0,oo.useEffect)(()=>{let T=Tl();p(T)},[]),(0,qe.jsx)("footer",{className:`h-[100px] pb-5 px-8 backdrop-blur-2xl hermes-border-t flex items-center justify-center shrink-0 ${i?"hermes-footer-bg-listening":"hermes-footer-bg"}`,children:(0,qe.jsxs)("div",{className:"flex items-center space-x-6 w-full max-w-5xl",children:[(0,qe.jsxs)("form",{onSubmit:n,className:"flex-grow flex items-center",children:[(0,qe.jsx)("input",{ref:y,type:"text",value:t,onChange:T=>e(T.target.value),onKeyDown:T=>{if(T.key==="ArrowUp"){if(T.preventDefault(),d.length>0){let g=m<d.length-1?m+1:d.length-1;h(g),e(d[d.length-1-g]),setTimeout(()=>{y.current&&y.current.select()},0)}}else if(T.key==="ArrowDown")if(T.preventDefault(),m>0){let g=m-1;h(g),e(d[d.length-1-g])}else m===0&&(h(-1),e(""));else T.key,h(-1)},placeholder:f?"Press Ctrl+Shift+L for starting/stopping talking to your vault assistant":"API key required...",disabled:!f,className:`flex-1 h-[52px] hermes-input-bg hermes-input-text hermes-input-border border rounded-lg px-4 text-sm focus:outline-none focus:hermes-input-border-focus ${f?"":"opacity-50 cursor-not-allowed"}`}),(0,qe.jsx)("button",{type:"submit",disabled:!f||!t.trim(),className:`flex items-center justify-center w-[52px] h-[52px] ml-2 transition-colors ${f&&t.trim()?"hermes-text-muted hermes-hover:text-normal":"opacity-50 cursor-not-allowed"}`,children:(0,qe.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),(0,qe.jsx)("div",{className:"shrink-0 flex items-center",children:i?(0,qe.jsx)("button",{onClick:s,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${l==="user"?"bg-red-500 text-white shadow-lg shadow-red-500/50 animate-pulse hover:scale-110 hover:bg-red-600":"bg-red-500 text-white hover:scale-110 hover:bg-red-600"}`,title:"Stop Listening",children:(0,qe.jsx)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,qe.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})})}):(0,qe.jsx)("button",{onClick:o,disabled:r==="CONNECTING"||!f,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${f?l==="user"?"bg-[var(--hermes-text-accent,#7c3aed)] text-white shadow-lg shadow-[var(--hermes-text-accent,#7c3aed)]/50 animate-pulse hover:scale-110 hover:bg-[var(--hermes-text-accent-dark,#6d28d9)]":"bg-[var(--hermes-brand,#6366f1)] text-white hover:scale-110 hover:bg-[var(--hermes-brand-dark,#4f46e5)]":"opacity-50 cursor-not-allowed bg-gray-200 dark:bg-gray-700"}`,title:f?"Start Voice Session":"API key required",children:(0,qe.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,qe.jsx)("path",{d:"M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),(0,qe.jsx)("path",{d:"M12 14c-4.42 0-8 2-8 5v1h16v-1c0-3-3.58-5-8-5z"}),(0,qe.jsx)("path",{className:"opacity-40",d:"M19 8c1.33 1.33 1.33 3.67 0 5"}),(0,qe.jsx)("path",{className:"opacity-70",d:"M21 6c2 2 2 6 0 8"})]})})})]})})},p_=$D;var Bm=Y(Yt()),Z=Y(oe()),YD=({onApiKeySave:t})=>{let[e,n]=(0,Bm.useState)(""),[i,o]=(0,Bm.useState)(!1);return(0,Z.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,Z.jsxs)("div",{className:"max-w-2xl text-center space-y-6",children:[(0,Z.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 flex items-center justify-center rounded-full bg-blue-500/10",children:(0,Z.jsx)("svg",{className:"w-10 h-10 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Z.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,Z.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Hermes"}),(0,Z.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Your Obsidian Interactive Voice Assistant \u2014 the bridge between you and your notes"}),(0,Z.jsx)("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"To use Hermes Voice Assistant, you need a Gemini API key from Google AI Studio. The API key allows the assistant to connect to Google's language models."}),(0,Z.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-left",children:[(0,Z.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"How to get your API key:"}),(0,Z.jsxs)("ol",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[(0,Z.jsxs)("li",{className:"flex items-start",children:[(0,Z.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"1"}),(0,Z.jsxs)("span",{children:["Visit ",(0,Z.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Google AI Studio"})]})]}),(0,Z.jsxs)("li",{className:"flex items-start",children:[(0,Z.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"2"}),(0,Z.jsx)("span",{children:"Sign in with your Google account"})]}),(0,Z.jsxs)("li",{className:"flex items-start",children:[(0,Z.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"3"}),(0,Z.jsx)("span",{children:'Click "Create API Key" and give it a name'})]}),(0,Z.jsxs)("li",{className:"flex items-start",children:[(0,Z.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"4"}),(0,Z.jsx)("span",{children:"Copy your API key"})]}),(0,Z.jsxs)("li",{className:"flex items-start",children:[(0,Z.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"5"}),(0,Z.jsx)("span",{children:"Paste it in the Settings panel"})]})]})]}),(0,Z.jsxs)("div",{className:"space-y-4",children:[(0,Z.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,Z.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Gemini API Key"}),(0,Z.jsx)("input",{type:"password",value:e,onChange:r=>n(r.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full h-12 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 text-sm text-gray-900 dark:text-gray-100 outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,Z.jsx)("button",{onClick:async()=>{if(!!e.trim()){o(!0);try{await t(e.trim()),n("")}catch(r){console.error("Failed to save API key:",r)}finally{o(!1)}}},disabled:!e.trim()||i,className:`w-full py-4 px-8 font-semibold rounded-lg transition-colors text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] ${e.trim()&&!i?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:i?"Saving...":"Save API Key"})]}),(0,Z.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:[(0,Z.jsx)("a",{href:"https://github.com/symunona/obsidian-haiku",children:"Go see me on github"}),". Or buy me a tea."]})]})})},m_=YD;var sn=Y(oe()),so=t=>t instanceof Error?t.message:String(t),JD=t=>{if(t instanceof Error)return t.stack},h_=(0,H.forwardRef)((t,e)=>{let n=(0,H.useMemo)(()=>tt()||{},[]);(0,H.useEffect)(()=>{let U=tt();x(!!U?.transcripts&&U.transcripts.length>0)},[]);let[i,o]=(0,H.useState)("DISCONNECTED"),[s,r]=(0,H.useState)([]),[l,u]=(0,H.useState)(""),[f,d]=(0,H.useState)(!1),[p,m]=(0,H.useState)(!1),[h,y]=(0,H.useState)("none"),[E,T]=(0,H.useState)(0),[g,v]=(0,H.useState)([]),S=(0,H.useRef)([]);(0,H.useEffect)(()=>{S.current=g},[g]);let[_,x]=(0,H.useState)(!1),[b,A]=(0,H.useState)(()=>n.voiceName||"Zephyr"),[M,R]=(0,H.useState)(()=>n.customContext||""),[I,k]=(0,H.useState)(()=>n.systemInstruction||Bn),[X,z]=(0,H.useState)(()=>n.manualApiKey||""),[Ee,vn]=(0,H.useState)(()=>n.serperApiKey||""),[rn,$e]=(0,H.useState)(()=>n.currentFolder||"/"),[te,bi]=(0,H.useState)(()=>n.currentNote||null),[ro,Fu]=(0,H.useState)(()=>n.totalTokens||0),[T_,Jm]=(0,H.useState)({totalTokenCount:n.totalTokens||0}),[E_,Km]=(0,H.useState)(0),[Ss,ao]=(0,H.useState)(!1),$t=(0,H.useRef)(null),Ri=(0,H.useRef)(null),Xm=(0,H.useMemo)(()=>Nt(),[]),Le=(0,H.useCallback)((U,G="info",B,F)=>{r(Ce=>[...Ce,{id:Math.random().toString(36).slice(2,11),message:U,timestamp:new Date,type:G,duration:B,errorDetails:F}])},[]),__=()=>{let U=tt();U?.transcripts&&(v(U.transcripts),x(!1),Le("Previous conversation restored","info"))};(0,H.useEffect)(()=>{let U=g[g.length-1];if(U?.role==="system"&&U.toolData?.name==="topic_switch"){console.warn("SHOULD SAVE HISTORY: topic_switch detected"),console.warn("SHOULD SAVE HISTORY: total transcripts:",g.length),console.warn("SHOULD SAVE HISTORY: transcripts:",g.map(F=>({id:F.id,role:F.role,text:F.text.substring(0,50)+"..."})));let G=U.toolData.newContent||"Shift",B=g.filter(F=>F.id!=="welcome-init"&&F.id!==U.id);if(console.warn("SHOULD SAVE HISTORY: after filtering (excluding topic_switch), toArchive:",B.length),B.length>0){console.warn("SHOULD SAVE HISTORY: has entries to archive:",B.length);let Ce=tt()?.chatHistoryFolder||"chat-history";Mm(G,B,Ce,Ri.current).then(de=>Le(de,"action")).catch(de=>{let Ye={toolName:"archiveConversation",content:`Summary: ${G}
History length: ${B.length} entries`,contentSize:G.length+JSON.stringify(B).length,stack:so(de),apiCall:"createFile"};Le(`Persistence Failure: ${so(de)}`,"error",void 0,Ye)})}else console.warn("SHOULD SAVE HISTORY: no entries to archive, skipping")}},[g,Le]),(0,H.useEffect)(()=>{(async()=>{try{await Ud();let U=On();Km(U.length),Le("HERMES_OS: Modules online.","info"),g.length===0&&v([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now()}])}catch(U){Le(`Initialization failed: ${so(U)}`,"error")}})()},[Le]),(0,H.useEffect)(()=>{vl({transcripts:g,voiceName:b,customContext:M,systemInstruction:I,manualApiKey:X,serperApiKey:Ee,currentFolder:rn,currentNote:te,totalTokens:ro})},[g,b,M,I,X,Ee,rn,te,ro]),(0,H.useEffect)(()=>{let G=!(X||"").trim();ao(G)},[X]),(0,H.useEffect)(()=>{let U=()=>{(async()=>{let F=await Sl();F&&(A(F.voiceName||"Zephyr"),R(F.customContext||""),k(F.systemInstruction||Bn),z(F.manualApiKey||""),vn(F.serperApiKey||""),(F.manualApiKey||"").trim()&&Ss&&(ao(!1),Le("API key configured successfully","success")))})()},G=F=>{A(F.voiceName||"Zephyr"),R(F.customContext||""),k(F.systemInstruction||Bn),z(F.manualApiKey||""),vn(F.serperApiKey||""),(F.manualApiKey||"").trim()&&Ss&&(ao(!1),Le("API key configured successfully","success"))};window.hermesSettingsUpdate=G;let B=setInterval(U,2e3);return()=>{clearInterval(B),delete window.hermesSettingsUpdate}},[Ss,Le]),(0,H.useImperativeHandle)(e,()=>({startSession:zu,stopSession:Or,toggleSession:w_})),(0,H.useEffect)(()=>()=>{$t.current&&($t.current.stop(),$t.current=null)},[]);let Vu=(0,H.useCallback)(async()=>{let U=S.current;console.warn("SHOULD SAVE HISTORY: archiveCurrentConversation called"),console.warn("SHOULD SAVE HISTORY: total transcripts:",U.length),console.warn("SHOULD SAVE HISTORY: transcripts:",U.map(B=>({id:B.id,role:B.role,text:B.text.substring(0,50)+"..."})));let G=U.filter(B=>B.id!=="welcome-init");if(console.warn("SHOULD SAVE HISTORY: after filtering, toArchive:",G.length),G.length>0){console.warn("SHOULD SAVE HISTORY: has entries to archive:",G.length);let B="Conversation";try{let F=G.filter(Ne=>Ne.role==="user").map(Ne=>Ne.text).join(" ");if(F.trim()&&(B=(G.find(an=>an.role==="user")?.text||"").replace(/[^\w\s]/g," ").split(/\s+/).filter(an=>an.length>2).slice(0,4).join(" ").substring(0,30).trim()||"Conversation"),Ri.current&&F.trim())try{let Ne=G.filter(vt=>vt.role==="user"||vt.role==="model").map(vt=>`${vt.role}: ${vt.text}`).join(`
`),Jn=(await Ri.current.generateSummary(`Please generate a short, keyword-rich title (2-4 words, max 30 characters) for this conversation. Focus on the main topic or task:

${Ne}`)).replace(/^(title|subject|topic):?\s*/i,"").replace(/^["'`]|["'`]$/g,"").replace(/\.$/,"").trim().substring(0,30);Jn&&Jn.length>=2&&(B=Jn)}catch(Ne){console.warn("Failed to generate AI title:",so(Ne))}let de=tt()?.chatHistoryFolder||"chat-history",Ye=await Mm(B,G,de,Ri.current);Le(Ye,"action")}catch(F){let Ce={toolName:"archiveConversation",content:`Summary: ${B}
History length: ${G.length} entries`,contentSize:B.length+JSON.stringify(G).length,stack:so(F),apiCall:"createFile"};Le(`Persistence Failure: ${so(F)}`,"error",void 0,Ce)}}else console.warn("SHOULD SAVE HISTORY: no entries to archive, skipping")},[Le]),Ts=(0,H.useCallback)((U,G)=>{v(B=>{if(G?.id){let F=B.findIndex(Ce=>Ce.toolData?.id===G.id);if(F!==-1){let Ce=[...B];return Ce[F]={...Ce[F],text:U,toolData:{...Ce[F].toolData,...G,status:G.status||"success"}},Ce}}return[...B,{id:"sys-"+Date.now(),role:"system",text:U,isComplete:!0,toolData:G,timestamp:Date.now()}]}),Km(On().length)},[]),A_=(0,H.useCallback)(async(U,G)=>{try{return await eo("download_image",{imageUrl:U.url,title:U.title,query:U.query||U.originalQuery||"image",index:G+1},{onLog:()=>{},onSystem:Ts,onFileState:()=>{}})}catch(B){throw console.error("Failed to download image:",B),B}},[Ts]),C_=(0,H.useMemo)(()=>({onStatusChange:U=>{o(U),U==="CONNECTED"?Le("UPLINK ESTABLISHED.","info"):U==="DISCONNECTED"&&(y("none"),T(0))},onLog:(U,G,B,F)=>Le(U,G,B,F),onTranscription:(U,G,B)=>{console.warn("TRANSCRIPTION: role:",U,"text:",G.substring(0,50)+"...","isComplete:",B),y(B?"none":U),v(F=>{let Ce=F.reduceRight((de,Ye,Ne)=>de!==-1?de:Ye.role===U&&!Ye.isComplete?Ne:-1,-1);if(Ce!==-1){let de=[...F];return de[Ce]={...de[Ce],text:G||de[Ce].text,isComplete:B},de}return[...F,{id:Math.random().toString(36).slice(2,11),role:U,text:G,isComplete:B,timestamp:Date.now()}]})},onSystemMessage:Ts,onInterrupted:()=>{y("none"),T(0)},onFileStateChange:(U,G)=>{$e(U);let B=Array.isArray(G)?G:G?[G]:[];B.length>0&&bi(B[B.length-1])},onUsageUpdate:U=>{Jm(U);let G=U.totalTokenCount;G!==void 0&&Fu(G)},onVolume:U=>T(U),onArchiveConversation:Vu}),[Le,Xm,Ts,Vu]),zu=async()=>{try{let U=X.trim();if(!U){ao(!0);return}window.aistudio&&!await window.aistudio.hasSelectedApiKey()&&await window.aistudio.openSelectKey(),$t.current=new wu(C_),await $t.current.start(U,{voiceName:b,customContext:M,systemInstruction:I},{folder:rn,note:te})}catch(U){let G={toolName:"GeminiVoiceAssistant",content:`Voice Name: ${b}
Custom Context: ${M}
System Instruction: ${I}`,contentSize:b.length+M.length+I.length,stack:JD(U),apiCall:"startSession"};Le(`Uplink Error: ${so(U)}`,"error",void 0,G),o("ERROR")}},Or=async()=>{$t.current&&($t.current.stop(),$t.current=null,y("none"),T(0))},x_=async U=>{if(U.preventDefault(),!l.trim())return;let G=l.trim();u("");let F=[...Tl(),G];await rS(F),i==="CONNECTED"&&$t.current&&($t.current.stop(),$t.current=null,y("none"),T(0));let Ce=X.trim();if(!Ce){ao(!0);return}Ri.current=new bu({onLog:(de,Ye,Ne,an)=>Le(de,Ye,Ne,an),onTranscription:(de,Ye,Ne)=>{console.warn("TRANSCRIPTION 2: role:",de,"text:",Ye.substring(0,50)+"...","isComplete:",Ne),v(an=>{let Jn=an.reduceRight((vt,Qm,b_)=>vt!==-1?vt:Qm.role===de&&!Qm.isComplete?b_:-1,-1);if(Jn!==-1){let vt=[...an];return vt[Jn]={...vt[Jn],text:Ye||vt[Jn].text,isComplete:Ne},vt}return[...an,{id:Math.random().toString(36).slice(2,11),role:de,text:Ye,isComplete:Ne,timestamp:Date.now()}]})},onSystemMessage:Ts,onFileStateChange:(de,Ye)=>{$e(de);let Ne=Array.isArray(Ye)?Ye:Ye?[Ye]:[];Ne.length>0&&bi(Ne[Ne.length-1])},onUsageUpdate:de=>{Jm(de),de.totalTokenCount!==void 0&&Fu(de.totalTokenCount)},onArchiveConversation:Vu}),Ri.current.initialize(Ce,{voiceName:b,customContext:M,systemInstruction:I},{folder:rn,note:te}),Ri.current.sendMessage(G)},w_=async()=>{i==="CONNECTED"?await Or():await zu()};return(0,sn.jsx)("div",{className:`hermes-root flex flex-col overflow-hidden ${Xm?"":"standalone"}`,children:Ss?(0,sn.jsx)(m_,{onApiKeySave:U=>{z(U),Le("API key saved successfully","success"),ao(!1)}}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(FE,{isOpen:f,onClose:()=>d(!1),voiceName:b,setVoiceName:A,customContext:M,setCustomContext:R,systemInstruction:I,setSystemInstruction:k,manualApiKey:X,setManualApiKey:z,serperApiKey:Ee,setSerperApiKey:vn,onUpdateApiKey:()=>window.aistudio?.openSelectKey()}),(0,sn.jsx)(qE,{status:i,showLogs:p,onToggleLogs:()=>m(!p),onOpenSettings:()=>d(!0),isListening:i==="CONNECTED",onStopSession:Or}),(0,sn.jsx)(d_,{showKernel:p,transcripts:g,hasSavedConversation:_,onRestoreConversation:__,logs:s,usage:T_,onFlushLogs:()=>r([]),fileCount:E_,onImageDownload:A_}),(0,sn.jsx)(p_,{inputText:l,setInputText:u,onSendText:x_,isListening:i==="CONNECTED",onStartSession:zu,onStopSession:Or,status:i,activeSpeaker:h,volume:E,hasApiKey:!Ss})]})})});h_.displayName="App";var g_=h_;var Ym=Y(oe()),wi="hermes-voice-assistant",Gu=class extends y_.ItemView{constructor(n){super(n);this.root=null;this.appRef=$m.default.createRef()}getViewType(){return wi}getDisplayText(){return"Hermes voice assistant"}getIcon(){return"mic-vocal"}onOpen(){let n=this.containerEl.children[1];n.empty();let i=n.createDiv({cls:"hermes-root obsidian"});this.root=(0,v_.createRoot)(i),this.root.render((0,Ym.jsx)($m.default.StrictMode,{children:(0,Ym.jsx)(g_,{ref:this.appRef})}))}onClose(){this.root&&(this.root.unmount(),this.root=null)}startSession(){this.appRef.current&&this.appRef.current.startSession&&this.appRef.current.startSession()}stopSession(){this.appRef.current&&this.appRef.current.stopSession&&this.appRef.current.stopSession()}toggleSession(){this.appRef.current&&this.appRef.current.toggleSession&&this.appRef.current.toggleSession()}};Qt();var Bt=require("obsidian");var KD=["Kore","Puck","Charon","Fenrir","Zephyr"],Gr={voiceName:"Zephyr",customContext:"",systemInstruction:"",manualApiKey:"",serperApiKey:"",chatHistoryFolder:"chat-history"},Ou=class extends Bt.PluginSettingTab{constructor(n,i){super(n,i);this.plugin=i}display(){let{containerEl:n}=this;n.empty(),n.classList.add("hermes-settings"),new Bt.Setting(n).setName("Hermes voice assistant").setHeading(),new Bt.Setting(n).setName("Voice").setDesc("Select the voice persona for the assistant").addDropdown(d=>{KD.forEach(p=>{d.addOption(p,p)}),d.setValue(this.plugin.settings?.voiceName||Gr.voiceName).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.voiceName=p,await this.plugin.saveSettings())})}),new Bt.Setting(n).setName("Custom context").setDesc("Define specific behaviors or rules for the assistant (added to every session)").addTextArea(d=>{d.setPlaceholder("Define specific behaviors, personalities, or rules for the AI...").setValue(this.plugin.settings?.customContext||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.customContext=p,await this.plugin.saveSettings())}),d.inputEl.rows=4,d.inputEl.cols=50});let i=document.createDocumentFragment();i.createSpan({text:"Core logic instructions for the AI assistant"}),i.createEl("br");let o=i.createEl("a",{text:"Reset to default"});o.addClass("hermes-reset-link"),o.addEventListener("click",()=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=Bn,this.plugin.saveSettings().then(()=>{this.display()}))}),new Bt.Setting(n).setName("System instructions").setDesc(i).addTextArea(d=>{d.setPlaceholder("Core logic instructions...").setValue(this.plugin.settings?.systemInstruction||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=p,await this.plugin.saveSettings())}),d.inputEl.rows=6,d.inputEl.cols=50}),new Bt.Setting(n).setName("Chat history folder").setDesc("Folder path where chat history will be saved").addText(d=>{d.setPlaceholder("chat-history").setValue(this.plugin.settings?.chatHistoryFolder||Gr.chatHistoryFolder).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.chatHistoryFolder=p,await this.plugin.saveSettings())})}),new Bt.Setting(n).setName("API authentication").setHeading(),new Bt.Setting(n).setName("Gemini API key").setDesc("Enter your Gemini API key for the voice assistant").addText(d=>{d.setPlaceholder("Enter your Gemini API Key...").setValue(this.plugin.settings?.manualApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.manualApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let s=document.createDocumentFragment();s.createSpan({text:"API key for image search. Get 2,500 free credits at "}),s.createEl("a",{href:"https://serper.dev/",text:"serper.dev"}).setAttr("target","_blank"),new Bt.Setting(n).setName("Serper API key").setDesc(s).addText(d=>{d.setPlaceholder("Enter your Serper API Key...").setValue(this.plugin.settings?.serperApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.serperApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let l=document.createDocumentFragment(),u=l.createSpan({text:"API keys are handled via manual entry. "}),f=l.createEl("a",{href:"https://ai.google.dev/gemini-api/docs/billing",text:"Learn more about billing."});f.setAttr("target","_blank"),u.append(f),new Bt.Setting(n).setDesc(l)}};var qu=class extends S_.Plugin{constructor(){super(...arguments);this.settings=Gr}async onload(){iS(this),await this.loadSettings();let n=await sS();n?(this.settings={...this.settings,...n},(!this.settings.systemInstruction||this.settings.systemInstruction.trim()==="")&&(this.settings.systemInstruction=Bn),await this.saveSettings()):(this.settings.systemInstruction=Bn,await this.saveSettings()),this.addSettingTab(new Ou(this.app,this)),this.registerView(wi,i=>new Gu(i)),this.addRibbonIcon("mic-vocal","Hermes voice assistant",()=>{this.activateView()}),this.addCommand({id:"open-hermes-voice",name:"Open Hermes assistant",callback:()=>{this.activateView()}}),this.addCommand({id:"start-hermes-conversation",name:"Start Hermes conversation",callback:()=>{this.startConversation()}}),this.addCommand({id:"stop-hermes-conversation",name:"Stop Hermes conversation",callback:()=>{this.stopConversation()}}),this.addCommand({id:"toggle-hermes-conversation",name:"Toggle Hermes conversation",callback:()=>{this.toggleConversation()}})}async activateView(){let{workspace:n}=this.app,i=null,o=n.getLeavesOfType(wi);o.length>0?i=o[0]:(i=n.getRightLeaf(!1),i&&await i.setViewState({type:wi,active:!0})),i&&n.revealLeaf(i)}async startConversation(){await this.activateView();let{workspace:n}=this.app,i=n.getLeavesOfType(wi);if(i.length>0){let s=i[0].view;if(s.startSession)s.startSession();else{let r=s.containerEl.querySelector('[data-action="start-session"]');r instanceof HTMLElement&&r.click()}}}stopConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(wi);if(i.length>0){let s=i[0].view;if(s.stopSession)s.stopSession();else{let r=s.containerEl.querySelector('[data-action="stop-session"]');r instanceof HTMLElement&&r.click()}}}async toggleConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(wi);if(i.length>0){let s=i[0].view;s.toggleSession?s.toggleSession():s.containerEl.querySelector('[data-action="stop-session"]')instanceof HTMLElement?this.stopConversation():await this.startConversation()}}onunload(){}async loadSettings(){this.settings=Object.assign({},Gr,await this.loadData())}async saveSettings(){await this.saveData(this.settings),await vl(this.settings),typeof window<"u"&&window.hermesSettingsUpdate&&window.hermesSettingsUpdate(this.settings)}};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
